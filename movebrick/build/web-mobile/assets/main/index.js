System.register("chunks:///_virtual/gameOverPanel.ts",["cc","./audioManager.ts","./clientEvent.ts","./playerData.ts","./uiManager.ts","./gameConstants.ts","./gameManager.ts"],(function(t){"use strict";var n,e,i,a,o,r,l,u,c,s,d,b;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.Vec3,a=t.Node,o=t.Label,r=t.Component},function(t){l=t.AudioManager},function(t){u=t.clientEvent},function(t){c=t.playerData},function(t){s=t.uiManager},function(t){d=t.gameConstants},function(t){b=t.GameManager}],execute:function(){var f,h,p,m,R,_,g,v,w,y,M,S,E,G,D;function I(t,n,e,i){e&&Object.defineProperty(t,n,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(i):void 0})}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function T(t,n,e,i,a){var o={};return Object.keys(i).forEach((function(t){o[t]=i[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce((function(e,i){return i(t,n,e)||e}),o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,n,o),o=null),o}n._RF.push({},"0364dX/d8tBHpGxDn8HGfRA","gameOverPanel",void 0);var z=e.ccclass,A=e.property,O=new i,L=85;t("gameOverPanel",(f=z("gameOverPanel"),h=A(a),p=A(a),m=A(o),R=A(o),_=A(o),g=A(o),f((y=T((w=function(t){var n,e;function i(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return I(P(n=t.call.apply(t,[this].concat(i))||this),"ndWinGet",y,P(n)),I(P(n),"ndPoint",M,P(n)),I(P(n),"lbGetDiamond",S,P(n)),I(P(n),"lbGetDiamondMul",E,P(n)),I(P(n),"lbGetMul",G,P(n)),I(P(n),"lbRank",D,P(n)),C(P(n),"_nowRotationZ",0),C(P(n),"addRotationState",!0),C(P(n),"_nowResultDiamond",0),n}e=t,(n=i).prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e;var a=i.prototype;return a.show=function(){b.isWin?(this.ndWinGet.active=!0,this._nowRotationZ=-85,this.addRotationState=!0,O.set(0,0,L),this.ndPoint.setRotationFromEuler(O),c.instance.updatePlayerInfo("level",1)):this.ndWinGet.active=!1;var t=Number(b.ndEndReward.children[0].name);b.ndEndReward==b.ndEndReward&&(t=1),this._nowResultDiamond=Number(t)*d.GAMEOVER_BASIS_DIAMOND,this.lbGetDiamond.string=this._nowResultDiamond.toString(),this.lbRank.string="第"+b.scriptPlayer.rankNum+"名"},a.onBtnRestart=function(){l.instance.playSound(d.MUSIC_LIST.CLICK),u.dispatchEvent(d.CLIENTEVENT_LIST.RESTARTGAME),s.instance.hideDialog(d.PANEL_PATH.GAMEOVER_PANEL)},a.onBtnGetClick=function(){l.instance.playSound(d.MUSIC_LIST.CLICK),this.onBtnRestart(),c.instance.updatePlayerInfo("diamond",this._nowResultDiamond),l.instance.playSound(d.MUSIC_LIST.GETDIAMOND)},a.onBtnGetMulClick=function(){l.instance.playSound(d.MUSIC_LIST.CLICK),c.instance.updatePlayerInfo("diamond",this._checkEulToMul()*this._nowResultDiamond),this.onBtnRestart(),l.instance.playSound(d.MUSIC_LIST.GETDIAMOND)},a._checkEulToMul=function(){var t=Math.floor(this._nowRotationZ/18),n=Math.ceil(t/2);return 2===n||-2===n?3:1===n||-1===n?2:4},a.update=function(t){if(this.ndWinGet.active){this.addRotationState?this._nowRotationZ+=100*t:this._nowRotationZ-=100*t,this._nowRotationZ>L?(this._nowRotationZ=L,this.addRotationState=!1):this._nowRotationZ<-85&&(this._nowRotationZ=-85,this.addRotationState=!0),O.set(0,0,this._nowRotationZ),this.ndPoint.setRotationFromEuler(O);var n=this._checkEulToMul();this.lbGetMul.string="领取X"+n,this.lbGetDiamondMul.string=(n*this._nowResultDiamond).toString()}},i}(r)).prototype,"ndWinGet",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=T(w.prototype,"ndPoint",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=T(w.prototype,"lbGetDiamond",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=T(w.prototype,"lbGetDiamondMul",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=T(w.prototype,"lbGetMul",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=T(w.prototype,"lbRank",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=w))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/aiWay.ts",["cc","./gameConstants.ts","./gameUtils.ts","./mapConstants.ts","./aiWayItem.ts"],(function(e){"use strict";var i,t,n,r,a,o,s,l,u,c,p,d,y;return{setters:[function(e){i=e.cclegacy,t=e._decorator,n=e.Node,r=e.CCString,a=e.CCInteger,o=e.CCBoolean,s=e.instantiate,l=e.Vec3,u=e.Component},function(e){c=e.gameConstants},function(e){p=e.gameUtils},function(e){d=e.mapConstants},function(e){y=e.AiWayItem}],execute:function(){var f,m,b,h,g,A,_,v,N,w,W,C,S,I,z,E,R,O,B,D,T,L,P;function F(e,i,t,n){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function Y(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function x(e,i,t,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,n){return n(e,i,t)||t}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,i,a),a=null),a}i._RF.push({},"08d5d6BYUtECaTLXtHTfczg","aiWay",void 0);var G=t.ccclass,U=t.property,H="aiWay",k="assets/resources/";e("AiWay",(f=G("AiWay"),m=U(n),b=U(n),h=U({type:r,displayName:" "}),g=U({type:a,min:1,step:1,displayName:d.AIWAY_STRING.SAVE_BEZIER_NUM}),A=U({type:o,displayName:d.AIWAY_STRING.SAVE_BEZIER_CHECK}),_=U({type:r,displayName:" "}),v=U({type:a,min:1,step:1,displayName:d.AIWAY_STRING.LOAD_BEZIER_NUM}),N=U({type:o,displayName:d.AIWAY_STRING.LOAD_BEZIER_CHECK}),w=U({type:r,displayName:" "}),W=U({type:o,displayName:d.AIWAY_STRING.SHOW_WAY}),C=U({type:a,displayName:d.AIWAY_STRING.SHOW_WAY_DATA,min:1}),f((z=x((I=function(e){var i,t;function n(){for(var i,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return F(M(i=e.call.apply(e,[this].concat(n))||this),"ndDrawPre",z,M(i)),F(M(i),"ndWayCubePre",E,M(i)),F(M(i),"test1",R,M(i)),F(M(i),"mapNameSave",O,M(i)),j(M(i),"_isFinish1",!0),F(M(i),"test2",B,M(i)),F(M(i),"mapNameLoad",D,M(i)),j(M(i),"_isFinish2",!0),F(M(i),"test3",T,M(i)),F(M(i),"isShowBezierWay",L,M(i)),F(M(i),"bezierWayNum",P,M(i)),j(M(i),"ndDraw",null),j(M(i),"ndWay",null),i}t=e,(i=n).prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t;var r,a,o,u=n.prototype;return u.initNode=function(){this.ndDraw=this.node.getChildByName("draw"),this.ndWay=this.node.getChildByName("way"),this.ndDraw.destroyAllChildren()},u._saveAiWay=function(){var e=this;this.initNode();for(var i=this.ndWay,t={},n=0;n<i.children.length;n++){var r,a;if(i.children[n].active){var o=i.children[n],s=Number(o.name);if(0!==s){for(var l=(null===(r=o.getComponent(y))||void 0===r?void 0:r.nextIdString).split(","),u=[],d=0;d<l.length;d++)if(999!==s){if(l[d]===o.name)return void console.error("当前节点 与 下一节点 命名相同 name:",s);""===l[d]?(u[d]=s+1,i.getChildByName((s+1).toString())||(console.error("不存在 当前自动匹配的下一点 name:",s+1),console.error("当前节点名称 name:",s),u[d]=999,console.error("自动匹配 999"))):u[d]=Number(l[d])}t[s]={nextIdList:u,pos:{x:Number(o.worldPosition.x.toFixed(2)),z:Number(o.worldPosition.z.toFixed(2))},eulY:Math.round(o.eulerAngles.y)%360,isBendEnd:null===(a=o.getComponent(y))||void 0===a?void 0:a.isBendEnd}}}}var f=window.cce.project;f.replace("\\"," / ");var m=H+this.mapNameSave+".json",b=f+"/"+k+c.AIWAY_PATH_IN_RESOURCES+"/";console.log("开始生成:",m),console.warn("当前生成关卡路径:",b+m);var h=require("fs"),g=JSON.stringify(t),A=function(){h.writeFile(b+m,g,(function(i){i?console.error("生成第"+e.mapNameSave+"关 ai路径 失败:",i):console.warn("生成第"+e.mapNameSave+"关 ai路径 成功"),e._isFinish1=!0}))};h.exists(b,(function(e){e?A():h.mkdir(b,(function(e){e?console.log("创建目录失败："+e):(console.log("创建目录成功:",b),A())}))})),this.getBezierCalculateList(t,p.getRandomAiOffset())},u._loadAiWay=function(){var e=this;this.initNode();var i=window.cce.project+"/"+k+c.AIWAY_PATH_IN_RESOURCES+"/"+H+this.mapNameLoad+".json";console.warn("加载数据路径：",i),require("fs").readFile(i,(function(i,t){if(i)return console.error("获取第"+e.mapNameLoad+"关卡 ai路径 失败",i);var n=JSON.parse(t);console.warn("获取第"+e.mapNameLoad+"关卡 ai路径 成功"),e.createWay(n),e.getBezierCalculateList(n,p.getRandomAiOffset()),e._isFinish2=!0}))},u.createWay=function(e){if(this.ndWayCubePre)for(var i in this.ndWay.destroyAllChildren(),e)if(0!==Number(i)){var t=e[i],n=s(this.ndWayCubePre);n.parent=this.ndWay,n.setPosition(t.pos.x,0,t.pos.z),n.setRotationFromEuler(new l(0,t.eulY,0)),n.name=i,n.getComponent(y).isBendEnd=t.isBendEnd,n.getComponent(y).nextIdString=t.nextIdList.toString()}},u.getBezierCalculateList=function(e,i){var t=this;this.isShowBezierWay&&this.ndDrawPre&&p.getBezierCalculateList(e,i,p.getAiDataToBezierList(new l(0,0,0)),(function(e){for(var i=0;i<e.length;i++)if(i%t.bezierWayNum==0){var n=s(t.ndDrawPre);n.parent=t.ndDraw,n.setPosition(e[i].x,0,e[i].y)}}))},r=n,(a=[{key:"getMapData",get:function(){return!this._isFinish1},set:function(e){this._isFinish1&&(console.log(d.COMMON.START_CALCULATE),this._isFinish1=!1,this._saveAiWay())}},{key:"setMapData",get:function(){return!this._isFinish2},set:function(e){this._isFinish2&&(console.log(d.COMMON.START_CALCULATE),this._isFinish2=!1,this._loadAiWay())}}])&&Y(r.prototype,a),o&&Y(r,o),n}(u)).prototype,"ndDrawPre",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=x(I.prototype,"ndWayCubePre",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=x(I.prototype,"test1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.AIWAY_STRING.SAVE_BEZIER_DATA}}),O=x(I.prototype,"mapNameSave",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x(I.prototype,"getMapData",[A],Object.getOwnPropertyDescriptor(I.prototype,"getMapData"),I.prototype),B=x(I.prototype,"test2",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.AIWAY_STRING.LOAD_BEZIER_DATA}}),D=x(I.prototype,"mapNameLoad",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x(I.prototype,"setMapData",[N],Object.getOwnPropertyDescriptor(I.prototype,"setMapData"),I.prototype),T=x(I.prototype,"test3",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.AIWAY_STRING.SHOW_WAY}}),L=x(I.prototype,"isShowBezierWay",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=x(I.prototype,"bezierWayNum",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=I))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/closePanel.ts",["cc","./audioManager.ts","./clientEvent.ts","./uiManager.ts","./gameConstants.ts"],(function(n){"use strict";var t,e,o,a,c,i,r,s;return{setters:[function(n){t=n.cclegacy,e=n._decorator,o=n.director,a=n.Component},function(n){c=n.AudioManager},function(n){i=n.clientEvent},function(n){r=n.uiManager},function(n){s=n.gameConstants}],execute:function(){var u;t._RF.push({},"09ea8phbCZKPr0bOGFj7tzk","closePanel",void 0);var l=e.ccclass;e.property,n("ClosePanel",l("ClosePanel")(u=function(n){var t,e;function a(){return n.apply(this,arguments)||this}e=n,(t=a).prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var u=a.prototype;return u.show=function(){},u.onBtnDetermineClick=function(){c.instance.playSound(s.MUSIC_LIST.CLICK),r.instance.hideDialog(s.PANEL_PATH.CLOSEPANEL),r.instance.showDialog(s.PANEL_PATH.MAIN_PANEL),i.dispatchEvent(s.CLIENTEVENT_LIST.RESTARTGAME),o.resume()},u.onBtnCancelClick=function(){c.instance.playSound(s.MUSIC_LIST.CLICK),r.instance.hideDialog(s.PANEL_PATH.CLOSEPANEL),r.instance.showDialog(s.PANEL_PATH.GAME_PANEL),o.resume()},a}(a))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["cc","./resourceUtil.ts","./csvManager.ts"],(function(n){"use strict";var e,t,r,a,i;return{setters:[function(n){e=n.cclegacy,t=n._decorator,r=n.resources},function(n){a=n.resourceUtil},function(n){i=n.CSVManager}],execute:function(){var c,o,u;function s(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function l(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}e._RF.push({},"12facSZhFRGIYa7yxiLVDOp","localConfig",void 0);var f=t.ccclass;t.property,n("localConfig",f("localConfig")((u=o=function(){function n(){l(this,"_csvManager",new i),l(this,"_callback",new Function),l(this,"_currentLoad",0),l(this,"_cntLoad",0)}var e,t,c,o=n.prototype;return o.loadConfig=function(n){this._callback=n,this._loadCSV()},o._loadCSV=function(){var n=this;r.loadDir("datas",(function(e,t){e||(n._cntLoad=t.length,t.forEach((function(e,t,r){a.getTextData(e.name,(function(t,r){n._csvManager.addTable(e.name,r),n._tryToCallbackOnFinished()}))})))}))},o.queryOne=function(n,e,t){return this._csvManager.queryOne(n,e,t)},o.queryByID=function(n,e){return this._csvManager.queryByID(n,e)},o.getTable=function(n){return this._csvManager.getTable(n)},o.getTableArr=function(n){return this._csvManager.getTableArr(n)},o.queryAll=function(n,e,t){return this._csvManager.queryAll(n,e,t)},o.queryIn=function(n,e,t){return this._csvManager.queryIn(n,e,t)},o.queryByCondition=function(n,e){return this._csvManager.queryByCondition(n,e)},o._tryToCallbackOnFinished=function(){this._callback&&(this._currentLoad++,this._currentLoad>=this._cntLoad&&this._callback())},e=n,c=[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}],(t=null)&&s(e.prototype,t),c&&s(e,c),n}(),l(o,"_instance",void 0),c=u))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/shopPanel.ts",["cc"],(function(t){"use strict";var o,r,e;return{setters:[function(t){o=t.cclegacy,r=t._decorator,e=t.Component}],execute:function(){var n;o._RF.push({},"1f274zjTrlCRL5Yi1lqdfkb","shopPanel",void 0);var c=r.ccclass;r.property,t("ShopPanel",c("ShopPanel")(n=function(t){var o,r;function e(){return t.apply(this,arguments)||this}return r=t,(o=e).prototype=Object.create(r.prototype),o.prototype.constructor=o,o.__proto__=r,e.prototype.start=function(){},e}(e))||n);o._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["cc","./resourceUtil.ts","./audioManager.ts","./clientEvent.ts","./playerData.ts","./uiManager.ts","./gameConstants.ts","./gameUtils.ts","./gameManager.ts","./effectManager.ts","./addBrickTips.ts","./roleBase.ts"],(function(t){"use strict";var i,e,s,n,o,r,a,_,c,h,E,d,R,l,u,T,A,L,S,P,I,C,f;return{setters:[function(t){i=t.cclegacy,e=t._decorator,s=t.find,n=t.instantiate,o=t.TweenSystem,r=t.Vec3,a=t.game,_=t.macro,c=t.geometry,h=t.PhysicsSystem,E=t.Animation,d=t.tween},function(t){R=t.resourceUtil},function(t){l=t.AudioManager},function(t){u=t.clientEvent},function(t){T=t.playerData},function(t){A=t.uiManager},function(t){L=t.gameConstants},function(t){S=t.gameUtils},function(t){P=t.GameManager},function(t){I=t.EffectManager},function(t){C=t.AddBrickTips},function(t){f=t.RoleBase}],execute:function(){var p;function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}i._RF.push({},"251b9H0tNVBpaGsso+56WU6","player",void 0);var M=e.ccclass;e.property,t("Player",M("Player")(p=function(t){var i,e;function f(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return O(N(i=t.call.apply(t,[this].concat(s))||this),"_ndLight",null),O(N(i),"_scriptsAddBrickTips",null),O(N(i),"_touchMoveX",0),O(N(i),"_isFirstResurrection",!1),O(N(i),"_rewardMulNum",0),O(N(i),"_checkClimbFrame",0),O(N(i),"_checkClimbCountFrame",0),O(N(i),"onceAddPos",new r),O(N(i),"climbEndPos",new r),O(N(i),"cbIdToMainBrickAdd",0),i}e=t,(i=f).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var p=f.prototype;return p.onLoad=function(){var i=this;window.player=this,t.prototype.onLoad.call(this),this._roleId=0,this._initEvent(),this._ndLight=s("Main Light"),this._ndLight.setPosition(this.node.getPosition().add3f(4.99,7.29,4.29)),R.loadModelRes("role/addBrickTips").then((function(t){var e=n(t);e.parent=s("Canvas"),e.setPosition(0,200,0),e.active=!1,i._scriptsAddBrickTips=e.getComponent(C)}))},p._initEvent=function(){u.on(L.CLIENTEVENT_LIST.ADDROLEBRICK,this._addRoleBrick,this),u.on(L.CLIENTEVENT_LIST.TOUCHMOVEPLAYER,this._touchMovePlayer,this),u.on(L.CLIENTEVENT_LIST.RESURRECTIONPLAYER,this._checkResurrectionPlayer,this)},p.createPlayer=function(){this.createInitCom(L.COLLIDER_GROUP_LIST.PLAYER)},p.initPlayer=function(){var i=this;o.instance.ActionManager.removeAllActionsFromTarget(this.node),t.prototype.initRole.call(this),this._touchMoveX=0,this._isFirstResurrection=!0,this._speed=L.PLAYER_SPEED_RUN;var e=new r(0,0,0);this.node.setPosition(e),this._updateLight(e),this.cbIdToMainBrickAdd=setInterval((function(){if(i._pfNowBrick&&i._ndBrickParent){i.cbIdToMainBrickAdd&&clearInterval(i.cbIdToMainBrickAdd);var t=T.instance.getPlayerInfo("mainBrickAdd");t>0&&i._addRoleBrick(t,!0)}}),30)},p.startCountdown=function(){t.prototype.startCountdown.call(this),this._changeRoleEul(L.ROLE_FACE_DIRECTION.BACK)},p._addBrickTips=function(){P.isGameStart&&this._scriptsAddBrickTips.addBrickTipsAni()},p._checkResurrectionPlayer=function(){this._lastBrickPos&&(this._lastBrickPos=null),this._isOver=!1,this._isFirstResurrection=!1,this._addRoleBrick(L.RESURR_PLAYER_ADD_BRICK_NUM,!0,!0),this._speed=L.PLAYER_SPEED_RUN,this._isMandatoryChange=!0,this.roleState=L.ROLE_STATE_LIST.PUT_BRICK;var t=this.node.getPosition();t.y=0,this.node.setPosition(t),u.dispatchEvent(L.CLIENTEVENT_LIST.CHANGECAMERATYPE,L.CAMERA_TYPE_LIST.PLAYING)},p._touchMovePlayer=function(t){this._touchMoveX=t},p._swoopFail=function(){t.prototype._swoopFail.call(this),this._isOver=!0,P.isWin=!1,u.dispatchEvent(L.CLIENTEVENT_LIST.CHANGECAMERATYPE,L.CAMERA_TYPE_LIST.SWOOP),A.instance.hideDialog(L.PANEL_PATH.GAME_PANEL),A.instance.showDialog(L.PANEL_PATH.RESURRECTION_PANEL,[Number(this._isFirstResurrection)])},p._triggerEnter=function(t){if(t.otherCollider&&!this._isOver&&this.roleState!==L.ROLE_STATE_LIST.CLIMB){this._initLastBrickPos();var i=t.otherCollider.node;if(P.isWin&&(this.roleState===L.ROLE_STATE_LIST.SWOOP||this.roleState===L.ROLE_STATE_LIST.JUMP&&this._nowSpeedY<0))return P.ndEndReward=i,void this._touchNowEndRewardRoad();if(i.name===L.CSV_MAP_ITEM_NAME.ROAD_END_REWARD){P.ndEndReward=i;var e=Number(i.children[0].name);e>this._rewardMulNum&&(this._rewardMulNum=e);var s=Number(P.ndEndReward.children[0].name);s===L.REWARD_CIRCLR_COUNT&&this._touchNowEndRewardRoad();var n=S.getRewardMulToMusicNum(s);n&&l.instance.playSound(L.MUSIC_LIST.REWARDMUL+n)}else if(i.name===L.CSV_MAP_ITEM_NAME.ROAD_END)this._rewardMulNum=1;else if(i.name===L.CSV_MAP_ITEM_NAME.FINISH_LINE)return 0===P.arriveRoadEndNum?(P.arriveRoadEndNum++,this.rankNum=P.arriveRoadEndNum,this._rewardMulNum=1,P.ndRewardCircle.active=!0,void(P.isWin=!0)):void this._touchFinishLine();this._onFloorList.push(i)}},p.climb=function(t,i){this.roleState=L.ROLE_STATE_LIST.CLIMB,this.climbEndPos.set(t),this.climbEndPos.y=L.PLAYER_CLIMB_DOWN_Y,this._checkClimbFrame=0,this._checkClimbCountFrame=this._aniRole.getState("climb1").duration/2/(1/a.getFrameRate()),this.onceAddPos.set(this.climbEndPos);var e=1/this._checkClimbCountFrame;this.onceAddPos.subtract3f(S.getDirectionOfDistanceX(L.PLAYER_CLIMB_DOWN_RANGE,i)*e,0,S.getDirectionOfDistanceZ(L.PLAYER_CLIMB_DOWN_RANGE,i)*e),this.onceAddPos.subtract(t),this.onceAddPos.multiplyScalar(e)},p.update=function(t){var i=this;if(P.isGameStart){var e=this.node.getPosition();if(this._isOver)return this._stopRunFastEff(),void(this.roleState===L.ROLE_STATE_LIST.FALL&&(e.subtract3f(0,L.ROLE_SPEED_Y_SWOOP_DOWN*t,0),this.node.setPosition(e)));var s=this.node.eulerAngles.clone();if(s.y=s.y%360,this.roleState===L.ROLE_STATE_LIST.JUMP)this._nowSpeedY+=L.ROLE_GRAVITY_JUMP*t,e.y+=this._nowSpeedY*t,e.y<=L.ROLE_SWOOP_DEATH?this.roleState=L.ROLE_STATE_LIST.SWOOP:this._nowSpeedY<0&&e.y<=.01&&(P.isWin?(e.y<=-.05&&this._checkUnderRoad()||this._checkInBrick())&&this._touchNowEndRewardRoad():this._checkUnderRoad()||this._checkInBrick()?this.roleState=L.ROLE_STATE_LIST.RUN:e.y<-.1&&(this.roleState=L.ROLE_STATE_LIST.SWOOP));else{if(this.roleState===L.ROLE_STATE_LIST.SWOOP){if(e.subtract3f(0,L.ROLE_SPEED_Y_SWOOP_DOWN*t,0),e.y<=L.PLAYER_CLIMB_DOWN_Y){if(P.isWin)return void this._touchNowEndRewardRoad();this.roleState=L.ROLE_STATE_LIST.FALL,this._swoopFail()}var n=t*this._speed,o=s.y*_.RAD,r=n*Math.sin(o),a=n*Math.cos(o);if(e=e.subtract3f(r,0,a),this.node.setPosition(e),!P.isWin&&e.y>L.PLAYER_CLIMB_DOWN_Y&&e.y<.05){var d=(s.y+180)*_.RAD,R=new c.Ray(e.x,0,e.z,Math.sin(d),0,Math.cos(d));if(h.instance.raycast(R,L.COLLIDER_GROUP_LIST.FLOOR,L.PLAYER_CLIMB_CHECK_RANGE)){var l=0;if(h.instance.raycastResults.length>1)for(var u=0;u<h.instance.raycastResults.length;u++)2<h.instance.raycastResults[u].distance&&(l=u);return void this.climb(h.instance.raycastResults[l].hitPoint,d)}var T=e.clone().subtract3f(S.getDirectionOfDistanceX(L.BRICK_ONCE_CHECK_RANGE,d),0,S.getDirectionOfDistanceZ(L.BRICK_ONCE_CHECK_RANGE,d));if(this._checkInBrick(T))return void this.climb(this._lastBrickPos,d)}return this._updateLight(e),void this._stopRunFastEff()}if(this.roleState===L.ROLE_STATE_LIST.CLIMB){if(-999===this._checkClimbFrame)return;return this._checkClimbFrame++,this._checkClimbCountFrame<=this._checkClimbFrame&&-999!==this._checkClimbFrame?(this._checkClimbFrame=-999,this.climbEndPos.y=0,this.node.setPosition(this.climbEndPos),this._aniRole.play("climb2"),void this._aniRole.once(E.EventType.FINISHED,(function(){i._isMandatoryChange=!0,i._checkRunState()}))):(e.add(this.onceAddPos),e.y>0&&(e.y=0),this.node.setPosition(e),void this._stopRunFastEff())}e.y<0&&(e.y-=L.ROLE_GRAVITY_JUMP*t,e.y>0&&(e.y=0)),this._checkCanGetBrick(),this._checkUnderFooting()||this._checkUnderRoad()||(this.brickNum>0?(this._subRoleBrick(),this._isInBrick=!0):this.roleState=L.ROLE_STATE_LIST.JUMP)}var A=!1;if(0!==this._touchMoveX){var I=this._touchMoveX*t;this.node.eulerAngles=s.subtract3f(0,I,0),this._touchMoveX>L.TOUCH_MOVE_CHECK_NAX?(this._brickMoveTime>-L.BRICK_SHAKE_HALF_TIME&&(this._brickMoveTime-=t,this._brickMoveToLeft=!0),A=!0):this._touchMoveX<-L.TOUCH_MOVE_CHECK_NAX&&(this._brickMoveTime<L.BRICK_SHAKE_HALF_TIME&&(this._brickMoveTime+=t,this._brickMoveToLeft=!1),A=!0)}this._allBrickShake(t,A),this._checkSpeed(t);var C=t*this._speed,f=s.y*_.RAD,p=C*Math.sin(f),N=C*Math.cos(f);e=e.subtract3f(p,0,N),this.node.setPosition(e),this._updateLight(e)}},p._checkSpeed=function(t){if(this.roleState!==L.ROLE_STATE_LIST.CLIMB&&this.roleState!==L.ROLE_STATE_LIST.JUMP&&this.roleState!==L.ROLE_STATE_LIST.SWOOP){var i=L.PLAYER_SPEED_RUN;if(this._onFloorList.length>0?(i=L.PLAYER_SPEED_RUN,this._stopRunFastEff()):this._isInBrick&&(i=L.PLAYER_SPEED_ON_BRICK),this._speed-L.PLAYER_SPEED_RUN>.8&&this._checkBumpAi(),this._speed>i-.01&&i===L.PLAYER_SPEED_ON_BRICK){if(this._isRunFastCheck)return;return this._isRunFastCheck=!0,l.instance.playSound(L.MUSIC_LIST.RUNFAST),void I.instance.getRunFastEff(this.node)}var e=i-this._speed;e<.008?this._speed=i:e>0?this._speed+=4*t:this._speed-=4*t}},p._checkBumpAi=function(){for(var t=0;t<P.scriptAiList.length;t++){var i=P.scriptAiList[t];if(!i.checkCanBump()){var e=this.node.position,s=i.node.position;S.getTwoPosXZLength(e.x,e.z,s.x,s.z)<=L.PLAYER_BUMP_AI_DISTANCE&&(P.scriptAiList[t].bump(S.checkTwoPosEulRad(e.x,e.z,s.x,s.z)*_.DEG),this._addRoleBrick(i.brickNum))}}},p._updateLight=function(t){t.y=0,this._ndLight.setPosition(t.add3f(4.99,7.29,4.29))},p._touchNowEndRewardRoad=function(){var t,i=this;l.instance.playSound(L.MUSIC_LIST.WIN),this._isOver=!0,this.roleState=L.ROLE_STATE_LIST.RUN;var e,s=new r(0,0,0);P.ndEndReward.name.split("-")[0]===L.CSV_MAP_ITEM_NAME.ROAD_END?(e=P.ndRoadEnd.getPosition().add(L.ROAD_END_POS_LIST[P.arriveRoadEndNum-1]),u.dispatchEvent(L.CLIENTEVENT_LIST.CHANGECAMERATYPE,L.CAMERA_TYPE_LIST.ENDROAD),t=L.EFFECT_LIST.END_ROAD,s.set(0,-.02,-.5),s.add(P.ndRoadEnd.position)):(e=P.ndEndReward.getPosition(),u.dispatchEvent(L.CLIENTEVENT_LIST.CHANGECAMERATYPE,L.CAMERA_TYPE_LIST.REWARD),t=L.EFFECT_LIST.REWARD_ROAD,s.set(0,0,0),s.add(e)),this.node.lookAt(e),this._stopRunFastEff(),d(this.node).to(.5,{position:e}).call((function(){i._isOver&&(i.roleState=L.ROLE_STATE_LIST.WIN,i.node.eulerAngles=new r(0,0,0),i._changeRoleEul(L.ROLE_FACE_DIRECTION.FRONT),i._gameIsOver(!0),i.brickNum>0&&(i.brickNum=0,i._clrerAllGetBrick()),I.instance.playParticleNotPool(t,s,0,1,null,null,!0))})).start()},f}(f))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/ai.ts",["cc","./gameConstants.ts","./gameManager.ts","./effectManager.ts","./roleBase.ts"],(function(t){"use strict";var e,i,s,r,n,o,_,h,a;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.TweenSystem,r=t.macro,n=t.Vec3},function(t){o=t.gameConstants},function(t){_=t.GameManager},function(t){h=t.EffectManager},function(t){a=t.RoleBase}],execute:function(){var c;function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e._RF.push({},"288a56sUldPp70GEv5Gn3QF","ai",void 0);var u=i.ccclass;i.property,t("Ai",u("Ai")(c=function(t){var e,i;function a(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return S(l(e=t.call.apply(t,[this].concat(s))||this),"_bezierList",[]),S(l(e),"_bezierNowId",0),S(l(e),"_bezierlastId",0),S(l(e),"_nextEul",new n),S(l(e),"_isBump",!1),e}i=t,(e=a).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var c=a.prototype;return c.createAi=function(t,e){_.scriptAiList.push(this),this.createInitCom(o.COLLIDER_GROUP_LIST.AI),this.initAi(t,e)},c.initAi=function(e,i){s.instance.ActionManager.removeAllActionsFromTarget(this.node),this._roleId=e,t.prototype.initRole.call(this),this._bezierList.length=0,this._bezierList=i,this._bezierNowId=0,this._bezierlastId=0,this._nextEul.set(this.node.eulerAngles),this._isBump=!1,this._speed=o.AI_SPEED_RUN,this.node.setPosition(o.AI_INIT_POS_LIST[e]),this.node.setScale(1,1,1),this.node.active=!0},c._triggerEnter=function(t){if(t.otherCollider&&!this._isOver){this._initLastBrickPos();var e=t.otherCollider.node;e.name!==o.CSV_MAP_ITEM_NAME.FINISH_LINE?this._onFloorList.push(e):this._touchFinishLine()}},c.bump=function(t){this._clrerAllGetBrick(),this._isOver=!0,this._isBump=!0,this._isMandatoryChange=!0,this.roleState=o.ROLE_STATE_LIST.BUMP,this.node.setRotationFromEuler(0,t,0)},c.checkAiDead=function(){return this._isOver},c.checkCanBump=function(){return this._isOver||this.roleState===o.ROLE_STATE_LIST.SWOOP},c.update=function(t){if(_.isGameStart){var e=this.node.getPosition();if(this._isBump){this._nowSpeedY+=o.AI_GRAVITY_BUMP*t,e.y+=this._nowSpeedY*t;var i=this.node.eulerAngles.y,s=t*this._speed,n=i*r.RAD,h=s*Math.sin(n),a=s*Math.cos(n);e=e.subtract3f(h,0,a),this.node.setPosition(e);var c=this.node.scale.x-.7*t;return c<=0&&(this.node.active=!1),void this.node.setScale(c,c,c)}if(!this._isOver){if(this.roleState===o.ROLE_STATE_LIST.SWOOP||this.roleState===o.ROLE_STATE_LIST.FALL)return e.subtract3f(0,o.ROLE_SPEED_Y_SWOOP_DOWN*t,0),this.node.setPosition(e),void(e.y<=o.AI_CHECK_HIDE_Y&&(this.node.active=!1,this._isOver=!0));if(this.roleState===o.ROLE_STATE_LIST.JUMP){if(this._nowSpeedY+=o.ROLE_GRAVITY_JUMP*t,e.y+=this._nowSpeedY*t,e.y<=o.ROLE_SWOOP_DEATH)this.roleState=o.ROLE_STATE_LIST.SWOOP;else if(this._nowSpeedY<0&&e.y<=0)if(this._checkUnderRoad()||this._checkInBrick())this.roleState=o.ROLE_STATE_LIST.RUN,e.y=0;else if(e.y<o.ROLE_CHECK_SWOOP_Y)return void(this.roleState=o.ROLE_STATE_LIST.SWOOP)}else e.y<0&&(e.y-=o.ROLE_GRAVITY_JUMP*t,e.y>0&&(e.y=0)),this._checkCanGetBrick(),this._checkUnderFooting()||(this.brickNum>0?(this._subRoleBrick(),this._isInBrick=!0):this.roleState=o.ROLE_STATE_LIST.JUMP);this._bezierNowId+=t*this._speed;var l=Math.floor(this._bezierNowId);if(l>=this._bezierList.length-1)this._isOver=!0;else{if(l!==this._bezierlastId){this._bezierlastId=l;var S=this._bezierList[l].clone().subtract(this._bezierList[l+1]);this._nextEul.set(0,Math.atan2(S.x,S.y)*r.DEG,0)}var u=this._bezierNowId-l;this.node.setRotationFromEuler(this._nextEul);var d=this._bezierList[l].clone().lerp(this._bezierList[l+1],u);this.node.setPosition(d.x,e.y,d.y),this._checkSpeed(t)}}}},c._checkSpeed=function(t){if(this.roleState!==o.ROLE_STATE_LIST.CLIMB&&this.roleState!==o.ROLE_STATE_LIST.JUMP&&this.roleState!==o.ROLE_STATE_LIST.SWOOP){var e=o.AI_SPEED_RUN;if(this._onFloorList.length>0?(e=o.AI_SPEED_RUN,this._stopRunFastEff()):this._isInBrick&&(e=o.AI_SPEED_ON_BRICK),this._speed>e)return e===o.AI_SPEED_ON_BRICK&&(this._isRunFastCheck=!0,h.instance.getRunFastEff(this.node)),void(this._speed=e);var i=e-this._speed;i<.08||(i>0?this._speed+=20*t:this._speed-=20*t)}},a}(a))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/mainPanel.ts",["cc","./audioManager.ts","./clientEvent.ts","./playerData.ts","./uiManager.ts","./gameConstants.ts"],(function(e){"use strict";var t,i,n,o,a,r,l,s,c,u,d,L,h,p;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Label,o=e.Node,a=e.ProgressBar,r=e.SpriteFrame,l=e.Sprite,s=e.Vec3,c=e.Component},function(e){u=e.AudioManager},function(e){d=e.clientEvent},function(e){L=e.playerData},function(e){h=e.uiManager},function(e){p=e.gameConstants}],execute:function(){var g,f,m,b,v,_,N,I,y,A,C,P,S,B,D,E,w;function M(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,i,n,o){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}t._RF.push({},"31af4NFhJVIPrDy9yXqQTEo","mainPanel",void 0);var O=i.ccclass,z=i.property,G=0,U=1;e("MainPanel",(g=O("MainPanel"),f=z(n),m=z(o),b=z(o),v=z(a),_=z(o),N=z(n),I=z(r),g((C=k((A=function(e){var t,i;function o(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return M(T(t=e.call.apply(e,[this].concat(n))||this),"lbDiamond",C,T(t)),M(T(t),"layoutDiamod",P,T(t)),M(T(t),"layoutBrick",S,T(t)),M(T(t),"pbLevel",B,T(t)),M(T(t),"ndLevelNodeList",D,T(t)),M(T(t),"lbLevelList",E,T(t)),M(T(t),"sfIconList",w,T(t)),t}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=o.prototype;return a.show=function(){this._updateDiamond(),this._updateLevel(),this._updateDiamondBtn(),this._updateBrickBtn()},a._checkVideo=function(e){return e>L.instance.getPlayerInfo("diamond")},a._updateBrickBtn=function(){var e=this._getNowBrick();this._checkVideo(e)?(this.layoutBrick.getChildByName("lb").getComponent(n).string=p.LANGUAGE_LIST.VIDEO,this.layoutBrick.getChildByName("icon").getComponent(l).spriteFrame=this.sfIconList[G]):(this.layoutBrick.getChildByName("lb").getComponent(n).string=e.toString(),this.layoutBrick.getChildByName("icon").getComponent(l).spriteFrame=this.sfIconList[U])},a._updateDiamondBtn=function(){var e=this._getNowDiamond();this._checkVideo(e)?(this.layoutDiamod.getChildByName("lb").getComponent(n).string=p.LANGUAGE_LIST.VIDEO,this.layoutDiamod.getChildByName("icon").getComponent(l).spriteFrame=this.sfIconList[G]):(this.layoutDiamod.getChildByName("lb").getComponent(n).string=e.toString(),this.layoutDiamod.getChildByName("icon").getComponent(l).spriteFrame=this.sfIconList[U])},a._updateLevel=function(){var e=Number(L.instance.getPlayerInfo("level"));if(e!==Number(this.lbLevelList[2].string)){this.pbLevel.node.setScale(1,1,1);for(var t=0;t<this.ndLevelNodeList.length;t++)this.ndLevelNodeList[t].active=!0;for(var i=0;i<this.lbLevelList.length;i++)this.lbLevelList[i].node.active=!0;1===e?(this.pbLevel.progress=0,this.pbLevel.node.setPosition(new s(96,0,0)),this.pbLevel.node.setScale(.6,1,1),this.lbLevelList[0].node.active=!1,this.lbLevelList[1].node.active=!1,this.ndLevelNodeList[0].active=!1,this.ndLevelNodeList[1].active=!1):2===e?(this.pbLevel.progress=.3,this.pbLevel.node.setPosition(new s(50,0,0)),this.ndLevelNodeList[0].active=!1,this.lbLevelList[0].node.active=!1,this.lbLevelList[1].string=(e-1).toString()):(this.pbLevel.progress=.5,this.pbLevel.node.setPosition(new s(0,0,0)),this.lbLevelList[1].string=(e-1).toString(),this.lbLevelList[0].string=(e-2).toString()),this.lbLevelList[2].string=e.toString(),this.lbLevelList[3].string=(e+1).toString(),this.lbLevelList[4].string=(e+2).toString()}},a._updateDiamond=function(){var e=L.instance.getPlayerInfo("diamond");this.lbDiamond.string=e},a.onBtnStartClick=function(){u.instance.playSound(p.MUSIC_LIST.CLICK),h.instance.showDialog(p.PANEL_PATH.GAME_PANEL,[!0]),h.instance.hideDialog(p.PANEL_PATH.MAIN_PANEL)},a.onBtnSettingClick=function(){u.instance.playSound(p.MUSIC_LIST.CLICK),h.instance.showDialog(p.PANEL_PATH.SETTING_PANEL),h.instance.hideDialog(p.PANEL_PATH.MAIN_PANEL)},a.onBtnShopClick=function(){u.instance.playSound(p.MUSIC_LIST.CLICK),h.instance.showDialog(p.PANEL_PATH.TIPS_PANEL,[p.LANGUAGE_LIST.COMMING_SOON,""])},a.onBtnAddBrickClick=function(){u.instance.playSound(p.MUSIC_LIST.CLICK),this._checkVideo(this._getNowDiamond())?h.instance.showDialog(p.PANEL_PATH.TIPS_PANEL,[p.LANGUAGE_LIST.DIAMOND_NOT_ENOUGH]):(d.dispatchEvent(p.CLIENTEVENT_LIST.ADDROLEBRICK,1,!0),L.instance.updatePlayerInfo("diamond",-this._getNowBrick()),L.instance.updatePlayerInfo("mainBrickAdd",1),L.instance.savePlayerInfoToLocalCache(),this._updateDiamondBtn(),this._updateBrickBtn(),this._updateDiamond())},a.onBtnAddDiamondClick=function(){u.instance.playSound(p.MUSIC_LIST.CLICK),this._checkVideo(this._getNowDiamond())?h.instance.showDialog(p.PANEL_PATH.TIPS_PANEL,[p.LANGUAGE_LIST.DIAMOND_NOT_ENOUGH]):(L.instance.updatePlayerInfo("diamond",-this._getNowDiamond()),L.instance.updatePlayerInfo("mainDiamondMul",1),L.instance.savePlayerInfoToLocalCache(),this._updateDiamondBtn(),this._updateBrickBtn(),this._updateDiamond())},a._getNowBrick=function(){return Math.round(p.MAIN_BASIS_BRICK*Math.pow(p.MAIN_MUL,L.instance.getPlayerInfo("mainBrickAdd")))},a._getNowDiamond=function(){return Math.round(p.MAIN_BASIS_BRICK*Math.pow(p.MAIN_MUL,L.instance.getPlayerInfo("mainDiamondMul")))},o}(c)).prototype,"lbDiamond",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=k(A.prototype,"layoutDiamod",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=k(A.prototype,"layoutBrick",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=k(A.prototype,"pbLevel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=k(A.prototype,"ndLevelNodeList",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=k(A.prototype,"lbLevelList",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=k(A.prototype,"sfIconList",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=A))||y));t._RF.pop()}}}));

System.register("chunks:///_virtual/mapLoader.ts",["cc","./gameConstants.ts","./gameUtils.ts","./mapConstants.ts"],(function(e){"use strict";var t,i,n,a,r,o,s,l,c,u,p,A,_,m,R;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Material,a=e.CCString,r=e.CCInteger,o=e.CCBoolean,s=e.director,l=e.instantiate,c=e.Vec3,u=e.macro,p=e.MeshRenderer,A=e.Component},function(e){_=e.gameConstants},function(e){m=e.gameUtils},function(e){R=e.mapConstants}],execute:function(){var d,N,E,g,f,h,D,M,S,L,y,v,T,b,C,O,I,P;function F(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function w(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function z(e,t,i,n,a){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}t._RF.push({},"38bbdzZyqVAXo6lB18DB+W7","mapLoader",void 0);var V=i.ccclass,W=i.property,x="assets/resources/datas/";e("MapLoader",(d=V("MapLoader"),N=W(n),E=W({type:a,displayName:" "}),g=W({type:r,min:1,step:1,displayName:R.MAPLOADER_STRING.SAVE_MAP_NUM}),f=W({type:o,displayName:R.MAPLOADER_STRING.SAVE_MAP_CHECK}),h=W({type:a,displayName:" "}),D=W({type:r,min:1,step:1,displayName:R.MAPLOADER_STRING.LOAD_MAP_NUM}),M=W({type:o,displayName:R.MAPLOADER_STRING.LOAD_MAP_CHECK}),S=W({type:a,displayName:" "}),L=W({type:o,displayName:R.MAPLOADER_STRING.AMEND_MAPITEM_NAME2}),d((T=z((v=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return F(G(t=e.call.apply(e,[this].concat(n))||this),"matNumList",T,G(t)),F(G(t),"test1",b,G(t)),F(G(t),"mapNameSave",C,G(t)),U(G(t),"_isFinish1",!0),F(G(t),"test2",O,G(t)),F(G(t),"mapNameLoad",I,G(t)),U(G(t),"_isFinish2",!0),F(G(t),"test0",P,G(t)),U(G(t),"_isFinish0",!0),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a,r,o,A=n.prototype;return A._changendMapItemName=function(){for(var e,t=null===(e=s.getScene())||void 0===e?void 0:e.getChildByName("mapItem"),i=0;i<t.children.length;i++)t.children[i].name=t.children[i].name.split("-")[0]+"-";this._isFinish0=!0},A._saveMap=function(){for(var e=this,t="编号,对应资源编号,位置,缩放,角度\nnumber,string,string,string,string\nID,name,position,scale,eulY\n",i=0;i<this.node.children.length;i++){var n=this.node.children[i],a=n.name;if(-1!==a.indexOf("-")&&(a=a.split("-")[0]),a!==_.CSV_MAP_ITEM_NAME.ROAD_END_REWARD){var r=this._getNumberToFixed2(n.getPosition()),o=this._getNumberToFixed2(n.getScale()),s=n.eulerAngles.y;t+=i+1+","+a+","+r+","+o+","+s+"\n"}}var l=window.cce.project;l.replace("\\"," / ");var c=l+"/"+x,u=require("fs"),p=function(){u.writeFile(c+"map"+e.mapNameSave+".csv",t,(function(t){t?(console.warn(R.MAPLOADER_STRING.FAIL+" "+R.MAPLOADER_STRING.LEVEL+":"+e.mapNameSave),console.error("error",t)):console.warn(R.MAPLOADER_STRING.SUCCESS+" "+R.MAPLOADER_STRING.LEVEL+":"+e.mapNameSave),e._isFinish1=!0}))};u.exists(c,(function(e){e?p():u.mkdir(c,(function(e){e?console.log(R.MAPLOADER_STRING.CREATE_DIRECTORY+" "+R.MAPLOADER_STRING.FAIL+" "+e):(console.log(R.MAPLOADER_STRING.CREATE_DIRECTORY+" "+R.MAPLOADER_STRING.SUCCESS+" "+c),p())}))}))},A._getNumberToFixed2=function(e){return JSON.stringify(Number(e.x.toFixed(2))+","+Number(e.y.toFixed(2))+","+Number(e.z.toFixed(2)))},A._loadMap=function(){var e=this,t=window.cce.project;t.replace("\\"," / ");var i=t+"/"+x+"map"+this.mapNameLoad+".csv";require("fs").readFile(i,"utf-8",(function(t,i){if(t)return console.error(R.MAPLOADER_STRING.FAIL+" "+R.MAPLOADER_STRING.LEVEL+":"+e.mapNameLoad+"error:"+t);console.warn(R.MAPLOADER_STRING.SUCCESS+" "+R.MAPLOADER_STRING.LEVEL+":"+e.mapNameLoad),e._setLoadDataToMap(i),e._isFinish2=!0}))},A._setLoadDataToMap=function(e){var t;this.node.destroyAllChildren();var i=null===(t=s.getScene())||void 0===t?void 0:t.getChildByName("mapItem"),n=e.split("\n");n=this._deleteUselessData(n);for(var a=3;n[a];){var r=n[a].split('"');r=this._deleteUselessData(r);var o=this._deleteUselessData(r[0].split(",")),u=Number(r[3].split(",")[1]),p=l(i.getChildByName(o[o.length-1]+"-"));p.parent=this.node,null==p||p.setPosition(m.setStringToVec3(r[1])),null==p||p.setScale(m.setStringToVec3(r[2])),null==p||p.setRotationFromEuler(new c(0,u,0)),a++,o[o.length-1]===_.CSV_MAP_ITEM_NAME.ROAD_END&&this._initEndRewardCircle(p)}},A._deleteUselessData=function(e){for(var t=e.length-1;t>-1;t--)0!==e[t].length&&","!==e[t]||e.splice(t,1);return e},A._initEndRewardCircle=function(e){var t,i=null===(t=s.getScene())||void 0===t?void 0:t.getChildByName("mapItem"),n=e.eulerAngles.y*u.RAD,a=e.getPosition();a.subtract3f(m.getDirectionOfDistanceX(_.REWARD_START_TRANSVERSE,n),0,m.getDirectionOfDistanceZ(_.REWARD_START_TRANSVERSE,n));for(var r=new c,o=e.eulerAngles.clone(),A=_.REWARD_SIZE+0,R=function(){return A+m.getRandomRange(_.REWARD_LONGITUDINAL_RANGE_HALF)},d=function(){return m.getRandomRange(_.REWARD_TRANSVERSE_RANGE_HALF,!0)},N=0;N<_.REWARD_CIRCLR_COUNT;N++){var E=l(i.getChildByName(_.CSV_MAP_ITEM_NAME.ROAD_END_REWARD+"-"));if(this.node.addChild(E),N+1>9){var g=new c;g.set(-.37,.01,0),E.children[1].setPosition(g);var f=E.children[2];f.getComponent(p).setMaterial(this.matNumList[1],0),g.set(.01,.01,0),null==f||f.setPosition(g);var h=l(f);h.parent=E,g.set(.4,.01,0),h.setPosition(g),h.getComponent(p).setMaterial(this.matNumList[N-10+1],0)}else{E.children[2].getComponent(p).setMaterial(this.matNumList[N+1],0)}E.children[0].name=(N+1).toString(),N===_.REWARD_CIRCLR_COUNT-1&&(A+=_.REWARD_LAST_SCALE_NUM/2);var D=m.getDirectionOfDistanceX(R(),n),M=m.getDirectionOfDistanceZ(R(),n);if(a.x-=D,a.z-=M,r.set(a),N===_.REWARD_CIRCLR_COUNT-1){E.setPosition(r),E.setRotationFromEuler(o);var S=_.REWARD_LAST_SCALE_NUM,L=E.getScale();L.x=S,L.z=S,E.setScale(L)}else{var y=(e.eulerAngles.y+90)*u.RAD,v=m.getDirectionOfDistanceX(d(),y),T=m.getDirectionOfDistanceZ(d(),y);r.add3f(v,0,T),E.setPosition(r),E.setRotationFromEuler(o)}}},a=n,(r=[{key:"getMapData",get:function(){return!this._isFinish1},set:function(e){this._isFinish1&&(console.log(R.COMMON.START_CALCULATE),this._isFinish1=!1,this._saveMap())}},{key:"setMapData",get:function(){return!this._isFinish2},set:function(e){this._isFinish2&&(console.log(R.COMMON.START_CALCULATE),this._isFinish2=!1,this._loadMap())}},{key:"changeNdMapItemName",get:function(){return!this._isFinish0},set:function(e){this._isFinish0&&(console.log(R.MAPLOADER_STRING.START_AMEND),this._isFinish0=!1,this._changendMapItemName())}}])&&w(a.prototype,r),o&&w(a,o),n}(A)).prototype,"matNumList",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=z(v.prototype,"test1",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.MAPLOADER_STRING.SAVE_MAP_DATA}}),C=z(v.prototype,"mapNameSave",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z(v.prototype,"getMapData",[f],Object.getOwnPropertyDescriptor(v.prototype,"getMapData"),v.prototype),O=z(v.prototype,"test2",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.MAPLOADER_STRING.LOAD_MAP_DATA}}),I=z(v.prototype,"mapNameLoad",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z(v.prototype,"setMapData",[M],Object.getOwnPropertyDescriptor(v.prototype,"setMapData"),v.prototype),P=z(v.prototype,"test0",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.MAPLOADER_STRING.AMEND_MAPITEM_NAME1}}),z(v.prototype,"changeNdMapItemName",[L],Object.getOwnPropertyDescriptor(v.prototype,"changeNdMapItemName"),v.prototype),y=v))||y));t._RF.pop()}}}));

System.register("chunks:///_virtual/playerMusic.ts",["cc","./audioManager.ts","./gameConstants.ts","./gameUtils.ts"],(function(t){"use strict";var e,n,o,r,c,a;return{setters:[function(t){e=t.cclegacy,n=t._decorator,o=t.Component},function(t){r=t.AudioManager},function(t){c=t.gameConstants},function(t){a=t.gameUtils}],execute:function(){var s;e._RF.push({},"453b8UlVNVN1pwR6fWwYO+C","playerMusic",void 0);var u=n.ccclass;n.property,t("PlayerMusic",u("PlayerMusic")(s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,o.prototype.playWalk=function(){r.instance.playSound(c.MUSIC_LIST.WALK+a.getMusicNum(c.MUSIC_RANDOM.WALK))},o}(o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(r){"use strict";var t,e;return{setters:[function(r){t=r.cclegacy,e=r._decorator}],execute:function(){var n;t._RF.push({},"51238kLGAFBiLoz3gxcwxtH","util",void 0);var o=e.ccclass;e.property,r("util",o("util")(n=function(){function r(){}return r.clone=function(r){if(null===r||"object"!=typeof r)return r;var t={};for(var e in r.constructor===Array&&(t=[]),r)r.hasOwnProperty(e)&&(t[e]=this.clone(r[e]));return t},r.objectToArray=function(r){var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(r[e]);return t},r.arrayToObject=function(r,t){var e={};for(var n in r)r.hasOwnProperty(n)&&r[n][t]&&(e[r[n][t]]=r[n]);return e},r.getWeightRandIndex=function(r,t){for(var e=Math.floor(Math.random()*t),n=0,o=0;o<r.length&&!(e<(n+=r[o]));o++);return o},r.getRandomNFromM=function(r,t){for(var e=[],n=0,o=0;o<t&&!(o>=r+1);){n=this.getRandomInt(0,r);for(var a=0,f=0;f<o;f++)if(e[f]===n){a=1;break}0===a&&(e[o]=n,o++)}return e},r.getRandomInt=function(r,t){var e=Math.random()*(t-r+1)+r;return Math.floor(e)},r.getStringLength=function(r){for(var t=r,e=0,n=0,o=t.length;n<o;n++){e+=t.charCodeAt(n)<=255?1:2}return Math.ceil(e/2)},r.isEmptyObject=function(r){var t=!0;if(r&&r.constructor===Object){for(var e in r)if(r.hasOwnProperty(e)){t=!1;break}}else t=!1;return t},r.isNewDay=function(r){var t=new Date(r),e=new Date,n=t.getYear(),o=t.getMonth(),a=t.getDate(),f=e.getYear(),u=e.getMonth(),i=e.getDate();return f>n||(u>o||i>a)},r.getPropertyCount=function(r){var t,e=0;for(t in r)r.hasOwnProperty(t)&&e++;return e},r.difference=function(r,t){var e=[];if(r.constructor!==Array||t.constructor!==Array)return e;for(var n=r.length,o=0;o<n;o++)-1===t.indexOf(r[o])&&e.push(r[o]);return e},r._stringToArray=function(r){var t,e="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+e+"]"),a="\\ud83c[\\udffb-\\udfff]",f="[\\ufe0e\\ufe0f]?",u="["+n+"]",i="(?:"+u+"|"+a+")"+"?",c="[\\ud800-\\udfff]",h="[^\\ud800-\\udfff]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",l=f+i+("(?:\\u200d(?:"+[h,g,d].join("|")+")"+f+i+")*"),s="(?:"+[h+u+"?",u,g,d,c].join("|")+")",v=RegExp(a+"(?="+a+")|"+s+l,"g");return t=r,o.test(t)?function(r){return r.match(v)||[]}(r):function(r){return r.split("")}(r)},r.simulationUUID=function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},r.trim=function(r){return r.replace(/(^\s*)|(\s*$)/g,"")},r.isNowValid=function(r,t){var e=new Date(r),n=new Date(t),o=!1;if(e.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>e}return o},r.getDeltaDays=function(r,t){r=new Date(r),t=new Date(t);var e=r.getFullYear(),n=r.getMonth()+1,o=r.getDate(),a=t.getFullYear(),f=t.getMonth()+1,u=t.getDate();r=new Date(e+"/"+n+"/"+o+" GMT+0800").getTime();var i=(t=new Date(a+"/"+f+"/"+u+" GMT+0800").getTime())-r;return Math.floor(i/864e5)},r.getMin=function(r){var t=null;if(r.constructor===Array)for(var e=r.length,n=0;n<e;n++)t=0===n?Number(r[0]):t>Number(r[n])?Number(r[n]):t;return t},r.formatTwoDigits=function(r){return(Array(2).join(0)+r).slice(-2)},r.formatDate=function(r,t){var e={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},r.getDay=function(){var r=new Date;return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()},r.formatName=function(r,t){t=t||6;var e=this._stringToArray(r),n="";if(e.length>t){for(var o=0;o<t;o++)n+=e[o];n+="..."}else n=r;return n},r.formatMoney=function(r){for(var t=["","K","M","G","T","P","E","Z","Y","B","N","D"],e="",n=0;n<t.length;n++){if(!(r>=1e4)){e=Math.floor(r)+t[n];break}r/=1e3}return""===e&&(e=Math.floor(r)+"U"),e},r.formatValue=function(r){for(var t=[],e="",n=0;n<26;n++)t.push(String.fromCharCode(97+n));for(var o=0;o<t.length;o++){if(!(r>=1e4)){e=Math.floor(r)+t[o];break}r/=1e3}return e},r.formatTimeForSecond=function(r,t){void 0===t&&(t=!1);var e="",n=r%60,o=Math.floor(r/60);o=o<0?0:o;var a=Math.floor(o/60),f=o%60;return a>0?(e+=a>9?a.toString():"0"+a,e+=":"):e+="00:",e+=f>9?f.toString():"0"+f,t||(e+=":",e+=n>9?n.toString():"0"+n),e},r.formatTimeForMillisecond=function(r){var t=Math.floor(r/1e3%60),e=Math.floor(r/1e3/60%60);return{hour:Math.floor(r/1e3/60/60),minute:e,second:t}},r.rand=function(r){for(var t=this.clone(r),e=t.length-1;e>=0;e--){var n=Math.floor(Math.random()*(e+1)),o=t[n];t[n]=t[e],t[e]=o}return t},r.getOffsetMimutes=function(r,t){var e=t-r;return Math.floor(e%36e5/6e4)},r.formatNumToFixed=function(r,t){return void 0===t&&(t=0),Number(r.toFixed(t))},r.lerp=function(r,t,e){void 0===e&&(e=.25);var n=t;return r>t?n=t+(r-t)*e:r<t&&(n=t-(t-r)*e),n},r.decrypt=function(r){var t=6;r.length%2==0&&(t=7);for(var e="",n=0;n<r.length-t;n+=2)e+=r[n+1],e+=r[n];return e+=r.slice(r.length-t+1),e=this._base64Decode(e)},r.encrypt=function(r){var t=this._base64encode(r),e=6;t.length%2==0&&(e=7);for(var n="",o=0;o<(t.length-e+1)/2;o++)n+=t[2*o+1],n+=t[2*o];return n+=t.slice(t.length-e+1)},r._base64encode=function(r){var t,e,n,o,a,f,u,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",h=0;for(r=this._utf8Encode(r);h<r.length;)o=(t=r.charCodeAt(h++))>>2,a=(3&t)<<4|(e=r.charCodeAt(h++))>>4,f=(15&e)<<2|(n=r.charCodeAt(h++))>>6,u=63&n,isNaN(e)?f=u=64:isNaN(n)&&(u=64),c=c+i.charAt(o)+i.charAt(a)+i.charAt(f)+i.charAt(u);return c},r._utf8Encode=function(r){r=r.replace(/\r\n/g,"\n");for(var t="",e=0;e<r.length;e++){var n=r.charCodeAt(e);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},r._utf8Decode=function(r){for(var t="",e=0,n=0,o=0,a=0;e<r.length;)(n=r.charCodeAt(e))<128?(t+=String.fromCharCode(n),e++):n>191&&n<224?(o=r.charCodeAt(e+1),t+=String.fromCharCode((31&n)<<6|63&o),e+=2):(o=r.charCodeAt(e+1),a=r.charCodeAt(e+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),e+=3);return t},r._base64Decode=function(r){var t,e,n,o,a,f,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",c=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<r.length;)t=u.indexOf(r.charAt(c++))<<2|(o=u.indexOf(r.charAt(c++)))>>4,e=(15&o)<<4|(a=u.indexOf(r.charAt(c++)))>>2,n=(3&a)<<6|(f=u.indexOf(r.charAt(c++))),i+=String.fromCharCode(t),64!=a&&(i+=String.fromCharCode(e)),64!=f&&(i+=String.fromCharCode(n));return i=this._utf8Decode(i)},r}())||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/gameUtils.ts",["cc","./gameConstants.ts"],(function(t){"use strict";var e,n,o,r,s;return{setters:[function(t){e=t.cclegacy,n=t.Vec3,o=t.macro,r=t.Vec2},function(t){s=t.gameConstants}],execute:function(){e._RF.push({},"514f8hv2DFG9pNXodtbSrmb","gameUtils",void 0);t("gameUtils",function(){function t(){}return t.checkNowBrickIndex=function(t){return Math.abs(Math.floor(t/s.BRICK_CAN_GET_INTERVAL))},t.checkTwoPosEulRad=function(t,e,n,o){return Math.atan2(t-n,e-o)},t.getTwoPosXZLength=function(t,e,n,o){var r=t-n,s=e-o;return Math.sqrt(r*r+s*s)},t.setStringToVec3=function(t){var e=t.split(",");return new n(Number(e[0]),Number(e[1]),Number(e[2]))},t.getRandomRange=function(t,e){return e?(Math.random()>.5?1:-1)*Math.random()*t:Math.random()*t},t.getRandomAiOffset=function(){return this.getRandomRange(s.AI_OFFSET_MAX,!0)},t.getBezier=function(t,e){return 2===e.length?(1-t)*e[0]+t*e[1]:3===e.length?(1-t)*(1-t)*e[0]+2*t*(1-t)*e[1]+t*t*e[2]:(console.error("未补充"+e.length+"次方公式"),0)},t.getBezierCalculateList=function(e,n,u,i){var a,c,h=[],x=0,l=null,g={x:0,z:0},f=[],z=[],d=1,M=function(t){f.push(t.x),z.push(t.z)},m=n;for(u&&(d=0,e[0]=u);999!==d;){f.length=0,z.length=0;var R=0;if((a=e[d]).nextIdList.length>1&&(R=Math.floor(Math.random()*a.nextIdList.length)),c=e[a.nextIdList[R]],l)if(M(l),c.isBendEnd){var p=(m=t.getRandomRange(.4,!0))*Math.sin((c.eulY+90)*o.RAD),A=m*Math.cos((c.eulY+90)*o.RAD);g={x:c.pos.x+p,z:c.pos.z+A},a.eulY-c.eulY<0?M({x:l.x,z:g.z}):M({x:g.x,z:l.z})}else{g=c.pos;var L=a.pos,I=t.checkTwoPosEulRad(L.x,L.z,g.x,g.z),N=Math.sqrt((L.x-g.x)*(L.x-g.x)+(L.z-g.z)*(L.z-g.z));g={x:l.x-Math.sin(I)*N,z:l.z-Math.cos(I)*N}}else{if(0===d){l={x:a.pos.x,z:a.pos.z};var _=m*Math.sin((c.eulY+90)*o.RAD),v=m*Math.cos((c.eulY+90)*o.RAD);g={x:c.pos.x+_,z:c.pos.z+v}}else{var D=m*Math.sin((a.eulY+90)*o.RAD),T=m*Math.cos((a.eulY+90)*o.RAD);l={x:a.pos.x+D,z:a.pos.z+T},g={x:c.pos.x+D,z:c.pos.z+T}}M(l)}M(g);for(var E=t.getTwoPosXZLength(l.x,l.z,g.x,g.z),Y=Math.round(E/s.AIWAY_TWO_POINT_RANGE),b=0;b<Y;b++){var O=new r(0,0);x=b/Y,O.x=Number(t.getBezier(x,f).toFixed(3)),O.y=Number(t.getBezier(x,z).toFixed(3)),h.push(O)}l=g,999===(d=a.nextIdList[R])&&(h.push(new r(Number(l.x.toFixed(3)),Number(l.z.toFixed(3)))),i(h))}},t.getAiDataToBezierList=function(t){return{nextIdList:"1",pos:t,eulY:0,isBendEnd:!1}},t.getAiAndPlayerGroup=function(){return s.COLLIDER_GROUP_LIST.PLAYER+s.COLLIDER_GROUP_LIST.AI},t.getDirectionOfDistanceX=function(t,e){return t*Math.sin(e)},t.getDirectionOfDistanceZ=function(t,e){return t*Math.cos(e)},t.getRewardMulToMusicNum=function(t){return t>=2&&t<=4?1:t>=5&&t<=7?2:t>=8&&t<=14?3:15===t?4:0},t.getMusicNum=function(t){return Math.ceil(Math.random()*t)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/cocosAnalytics.min.js",["./cjs-loader.mjs"],(function(t,e){"use strict";var n;return{setters:[function(t){n=t.default}],execute:function(){let r;t("default",void 0),n.define(e.meta.url,(function(e,i,o,s,a){n.createRequireWithReqMap({},i);!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/",n(n.s=3)}([function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){(function(t,r){var i,o;!function(s,a,u){var h={function:!0,object:!0},l=h[typeof window]&&window||this,c=h[typeof e]&&e,f=h[typeof t]&&t&&!t.nodeType&&t,p=c&&f&&"object"==typeof r&&r;!p||p.global!==p&&p.window!==p&&p.self!==p||(l=p),void 0===(o="function"==typeof(i=u)?i.call(e,n,e,t):i)||(t.exports=o),l.cocosAnalytics=u()}(0,window,(function(){return n(4)}))}).call(this,n(1)(t),n(0))},function(t,e,n){var r=n(5),i=n(11),o=n(12),s=n(15),a=n(16),u=n(17),h=n(18),l=n(19),c=n(20),f=n(21),p=n(22),d=n(23),g=n(24),v={data:{msgPlus:0,isInit:!1,isShowLog:!1,msgPool:[],apiURL:"https://logstorage.cocos.com/log/v2",apiURLReserved:"http://logstorage.cocos.com/log/v2",versionCode:"v2"},version:"2.2.1",browserVersion:void 0,isActive:!0,init:function(t){this.CAAccount=new a(this),this.CAEvent=new u(this),this.CAPayment=new h(this),this.CALevels=new l(this),this.CATask=new c(this),this.CAItem=new f(this),this.CAVirtual=new p(this),this.CATaskType=new d(this),this.CACustomEvent=new s(this),this.CAAdvertising=new g(this),i.manufacturer=i.manufacturer||"",this.data.appVersion=t.version,this.data.appBuild=t.build,this.data.engine=t.engine||"",this.data.resolution=this._getScreenResolution(),this.data.uniqueID=this._getUniqueID(),this.data.CCID=this._getCCID(),this.data.age=0,this.data.sex=0,this._runInterval(),this._bindPageVisibilityEvent(),this.data.isInit=!0,console.log("cocos analytics version :"+this.version);var e=this._getLocalStorage("_SDK_APPID_")||"",n=this._getLocalStorage("_SDK_STORE_")||"",r=this._getLocalStorage("_SDK_CALLNUMBER_")||"";if(e.length>0&&e!=t.appID||n.length>0&&n!=t.storeID||r.length>0&&r!=t.callNumber){var o=this._getLocalStorage("onlineDuration"),v=this._getLocalStorage("_UID_"+e)||"";v.length>0&&parseInt(o)>0&&(this.data.appID=e,this.data.userID=v,this.data.storeID=n,this.data.callNumber=r,this.CAAccount.logout())}return t.appID?(this.data.appID=t.appID,t.storeID=t.storeID,t.storeID&&0!=t.storeID.replace(/\s/g,"").length?(this.data.storeID=t.storeID,this.data.callNumber=t.callNumber||"",this.data.userID="",this.data.channel="",this._addLocalStorage("_SDK_STORE_",this.data.storeID),this._addLocalStorage("_SDK_APPID_",t.appID),this._addLocalStorage("_SDK_CALLNUMBER_",this.data.callNumber),void this._sendInitEvent()):(console.log("storeID 不能为空!"),void(this.data.isInit=!1))):(console.log("appID 不能为空!"),void(this.data.isInit=!1))},isInited:function(){return this.data.isInit},onPause:function(){this.isActive=!1,this.data.end=((new Date).getTime()+"").substr(0,10);var t=this.data.end-this.data.start;this.log("duration..."+t+"s");var e=this._generatePostData({eventValue:{action:"background",start:this.data.start,end:this.data.end},eventTag:"successed",eventID:"view"});this._upload(e)},onResume:function(){this.isActive=!0,this.data.start=((new Date).getTime()+"").substr(0,10),this.data.end&&this.data.start-this.data.end>3600&&this._sendInitEvent()},enableDebug:function(t){this.data.isShowLog=t},_sendInitEvent:function(){if(i.runtimeMask){var t=null;t=setInterval(function(){if(!i.runtimeMask){clearInterval(t);var e=this._generatePostData({eventTag:"successed",eventID:"init"});this._upload(e)}}.bind(this),10)}else{var e=this._generatePostData({eventTag:"successed",eventID:"init"});this._upload(e)}},_runInterval:function(){var t=this;this.isInited()||(setInterval((function(){t.log("cocos analytics check and upload log...");for(var e=t._getLocalStorage("_MSG_"+t.data.appID),n=JSON.parse(e||"[]")||t.data.msgPool;0!==n.length;)if(n.length<=100)n.forEach((function(e){t._submit(e)})),n=[],t.data.msgPool=n,t._addLocalStorage("_MSG_"+t.data.appID,t._toJson(t.data.msgPool));else{var r=n.splice(0,100);t._submit(r),t.data.msgPool=n,t._addLocalStorage("_MSG_"+t.data.appID,t._toJson(t.data.msgPool))}}),3e4),setInterval((function(){t.isActive&&t.data.heartBeat&&(t.data.onlineTime=parseInt(t.data.onlineTime||0)+1,t._addLocalStorage("onlineDuration",t.data.onlineTime))}),1e3))},_bindPageVisibilityEvent:function(){var t="hidden";t in document?document.addEventListener("visibilitychange",n):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",n):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n):(t="msHidden")in document?document.addEventListener("msvisibilitychange",n):"onfocusin"in document?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n;var e=this;function n(){var t=document.visibilityState;"visible"===t&&e.onResume(),"hidden"===t&&e.onPause()}void 0!==document[t]&&n()},_generatePostData:function(t){var e=this._generateBasePostData();if(null==t)return e;for(var n in t)null!=t[n]&&e[n]!==t[n]&&(e[n]=t[n]);return e},_lastMsgID:function(){return this.data.saveMsgID||""},_msgID:function(){return this.data.saveMsgID=o(this.data.CCID+((new Date).getTime()+this.data.msgPlus)),this.data.msgPlus=this.data.msgPlus+1,this.data.saveMsgID},_generateBasePostData:function(){var t=((new Date).getTime()+"").substr(0,10),e={appVersion:this.data.appVersion,versionCode:this.data.versionCode,uniqueID:this.data.uniqueID,appID:this.data.appID,channelID:this.data.channel,platform:"H5",engine:this.data.engine,chargeTime:t,userID:this.data.userID,resolution:this.data.resolution,osVersion:i.os.version,language:this._getLanguage(),manufacturer:i.manufacturer||"",store:this.data.storeID,age:this.data.age,sex:this.data.sex,callNumber:this.data.callNumber,model:i.product};return e.lastMsgID=this._lastMsgID(),e.msgID=this._msgID(),e},_toJson:function(t){return JSON.stringify(t)},_fromJson:function(t){return JSON.parse(t)},_upload:function(t){this.data.isInit?this._submit(t):console.log("Please init first!")},log:function(){if(!0===this.data.isShowLog)for(var t in arguments)console.log(arguments[t])},_submit:function(t){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var n=this;e.onreadystatechange=function(){if(4==e.readyState){if(0==e.status&&n.data.apiURL!=n.data.apiURLReserved)return n.data.apiURL=n.data.apiURLReserved,void n._msgPersist(t);200==e.status&&n.log(n._toJson(t))}},e.onerror=function(e){n._msgPersist(t)};var i=r.encryptPostData(this._toJson(t));e.open("POST",this.data.apiURL,!0),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.send(i)},_msgPersist:function(t){this.data.msgPool.push(t),this._addLocalStorage("_MSG_"+this.data.appID,this._toJson(this.data.msgPool))},_getUniqueID:function(){var t="_SDK_UNIQUE_ID_",e=this._getLocalStorage(t);return e||(e=r.random32Str(),this._addLocalStorage(t,e)),e},_getCCID:function(){var t=r.x64hash128(),e=this._getLocalStorage(t);return e||(e=r.random32Str(),this._addLocalStorage(t,e)),e},extends:function(t){t.data=this.data,t.log=this.log,t._toJson=this._toJson,t._upload=this._upload,t._submit=this._submit,t._msgPersist=this._msgPersist,t._generatePostData=this._generatePostData,t._generateBasePostData=this._generateBasePostData,t._addLocalStorage=this._addLocalStorage,t._delLocalStorage=this._delLocalStorage,t._getLocalStorage=this._getLocalStorage,t._getLanguage=this._getLanguage,t._setHeartBeat=this._setHeartBeat,t._lastMsgID=this._lastMsgID,t._msgID=this._msgID},_addLocalStorage:function(t,e){e=e.toString(),window.localStorage&&("sessionId"==t&&window.sessionStorage?sessionStorage.setItem("__CA_"+t,e):window.wx&&wx.setStorage?wx.setStorage({key:"__CA_"+t,data:e}):localStorage.setItem("__CA_"+t,e))},_delLocalStorage:function(t){window.localStorage&&("sessionId"==t&&window.sessionStorage?sessionStorage.removeItem("__CA_"+t):window.wx&&wx.removeStorageSync?wx.removeStorageSync("__CA_"+t):localStorage.removeItem("__CA_"+t))},_getLocalStorage:function(t){if(window.localStorage)return"sessionId"==t&&window.sessionStorage?sessionStorage.getItem("__CA_"+t):window.wx&&wx.getStorageSync?wx.getStorageSync("__CA_"+t):localStorage.getItem("__CA_"+t)},_getScreenResolution:function(){if(null!=window.BK&&null!=window.BK.Director){var t=window.BK.Director.renderSize;return t.width+"*"+t.height}return null==window.screen.width?window.screen.availWidth+"*"+window.screen.availHeight:window.screen.width+"*"+window.screen.height},_getBrowserVersion:function(){if(!this.browserVersion){var t=window.navigator.userAgent.toLowerCase(),e=/micromessenger|qqbrowser|sogou|qzone|liebao|ucbrowser|360 aphone|360browser|edge|baiduboxapp|bidubrowser|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i.exec(t);e||(e=/chrome|safari|firefox|opr|oupeng|opera/i.exec(t));var n=e?e[0]:"unknown";"micromessenger"===n?n="wechat":"safari"===n&&t.match(/android.*applewebkit/)?n="androidbrowser":"trident"===n?n="ie":"360 aphone"===n?n="360browser":"mxbrowser"===n?n="maxthon":"opr"===n?n="opera":"bidubrowser"===n&&(n="baidubrowser");var r=t.match(/(micromessenger|qq|mx|maxthon|edge|bidu|baidu|sogou)(mobile)?(browserType)?\/?([\d.]+)/i);r||(r=t.match(/(msie |rv:|firefox|chrome|ucbrowser|oupeng|opera|opr|safari|miui)(mobile)?(browserType)?\/?([\d.]+)/i));var i=r?r[4]:"";this.browserVersion=n,i&&(this.browserVersion+="-"+i)}return this.browserVersion},_getLanguage:function(){var t=window.navigator.language;return(t=t||window.navigator.browserLanguage)?t.split("-")[0]:"en"},_setHeartBeat:function(t){this.data.heartBeat=t||!1,this.data.onlineTime=this._getLocalStorage("onlineDuration")||0}};t.exports=v},function(t,e,n){(function(e){function r(t,e){var n=0,r=t.length;if(!t)return 0;for(;e<r;){var i=e,o=t.charCodeAt(e);if((n+=o<=127?1:o<=2047?2:o<=65535?3:o<=2097151?4:o<=67108863?5:6)>117){e=i;break}e++}return e}function i(t){var e=new JSEncrypt;return e.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC9LCzyypg24REurnyflGy2LdFj\nc63hBk/69r84TAJHlE7x92kUpZBF+7cRf0bFRIRA52OsKlF/ljzCjfOPBE9JfNIq\n+dwF/rSqns+eyQHPQFd5lY692loz9Mo1pNgElpHuJbfydju7F5KTnQYqviCWompm\nLKKdzAPcY1AVJfWd+QIDAQAB\n-----END PUBLIC KEY-----"),e.key.encrypt(t)}n(10);var o={urlsafe_b64encode:t=>t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),encryptPostData(t){for(var n=new e(0),o=0,s=t.length;s-o>0;){var a=o,u=r(t,o),h="";do{h=i(t.substr(a,u-a))}while(256!=h.length);n+=h,o=u}var l=e.from(n,"hex").toString("base64");return this.urlsafe_b64encode(l)},x64Add:function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Multiply:function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Rotl:function(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])},x64LeftShift:function(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]},x64Xor:function(t,e){return[t[0]^e[0],t[1]^e[1]]},x64Fmix:function(t){return t=this.x64Xor(t,[0,t[0]>>>1]),t=this.x64Multiply(t,[4283543511,3981806797]),t=this.x64Xor(t,[0,t[0]>>>1]),t=this.x64Multiply(t,[3301882366,444984403]),this.x64Xor(t,[0,t[0]>>>1])},x64hash128:function(t,e){e=e||0;for(var n=(t=t||"0").length%16,r=t.length-n,i=[0,e],o=[0,e],s=[0,0],a=[0,0],u=[2277735313,289559509],h=[1291169091,658871167],l=0;l<r;l+=16)s=[255&t.charCodeAt(l+4)|(255&t.charCodeAt(l+5))<<8|(255&t.charCodeAt(l+6))<<16|(255&t.charCodeAt(l+7))<<24,255&t.charCodeAt(l)|(255&t.charCodeAt(l+1))<<8|(255&t.charCodeAt(l+2))<<16|(255&t.charCodeAt(l+3))<<24],a=[255&t.charCodeAt(l+12)|(255&t.charCodeAt(l+13))<<8|(255&t.charCodeAt(l+14))<<16|(255&t.charCodeAt(l+15))<<24,255&t.charCodeAt(l+8)|(255&t.charCodeAt(l+9))<<8|(255&t.charCodeAt(l+10))<<16|(255&t.charCodeAt(l+11))<<24],s=this.x64Multiply(s,u),s=this.x64Rotl(s,31),s=this.x64Multiply(s,h),i=this.x64Xor(i,s),i=this.x64Rotl(i,27),i=this.x64Add(i,o),i=this.x64Add(this.x64Multiply(i,[0,5]),[0,1390208809]),a=this.x64Multiply(a,h),a=this.x64Rotl(a,33),a=this.x64Multiply(a,u),o=this.x64Xor(o,a),o=this.x64Rotl(o,31),o=this.x64Add(o,i),o=this.x64Add(this.x64Multiply(o,[0,5]),[0,944331445]);switch(s=[0,0],a=[0,0],n){case 15:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+14)],48));case 14:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+13)],40));case 13:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+12)],32));case 12:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+11)],24));case 11:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+10)],16));case 10:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+9)],8));case 9:a=this.x64Xor(a,[0,t.charCodeAt(l+8)]),a=this.x64Multiply(a,h),a=this.x64Rotl(a,33),a=this.x64Multiply(a,u),o=this.x64Xor(o,a);case 8:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+7)],56));case 7:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+6)],48));case 6:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+5)],40));case 5:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+4)],32));case 4:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+3)],24));case 3:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+2)],16));case 2:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+1)],8));case 1:s=this.x64Xor(s,[0,t.charCodeAt(l)]),s=this.x64Multiply(s,u),s=this.x64Rotl(s,31),s=this.x64Multiply(s,h),i=this.x64Xor(i,s)}return i=this.x64Xor(i,[0,t.length]),o=this.x64Xor(o,[0,t.length]),i=this.x64Add(i,o),o=this.x64Add(o,i),i=this.x64Fmix(i),o=this.x64Fmix(o),i=this.x64Add(i,o),o=this.x64Add(o,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)},random32Str:function(){var t,e=Date.now().toString(32).toUpperCase();return t=Date.now(),(e||"")+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n;return n=(t+16*Math.random())%16|0,t=Math.floor(t/16),"x"===e?n.toString(16):(7&n|8).toString(16)})).replace(/-/g,"").toUpperCase()}};t.exports=o}).call(this,n(6).Buffer)},function(t,e,n){(function(t){var r=n(7),i=n(8),o=n(9);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return h(this,t,e,n)}function h(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(h(t,o+f)!==h(e,f)){c=!1;break}if(c)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return X(F(e,t.length-n),t,n,r)}function S(t,e,n,r){return X(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return S(t,e,n,r)}function x(t,e,n,r){return X(j(e),t,n,r)}function D(t,e,n,r){return X(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,h=t[i],l=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=n)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&h)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,c=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V(t[o]);return i}function B(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,r,o){return o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,o){return o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return h(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(r,i),l=t.slice(e,n),c=0;c<a;++c)if(h[c]!==l[c]){o=h[c],s=l[c];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:F(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(0))},function(t,e,n){e.byteLength=function(t){var e=h(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=h(t),s=r[0],a=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),l=0,c=a>0?s-4:s;for(n=0;n<c;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,h=u>>1,l=-7,c=n?i-1:0,f=n?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=h}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[n+p]=255&s,p+=d,s/=256,h-=8);t[n+p-d]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){!function(t){function e(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function n(t,e){return t&e}function r(t,e){return t|e}function i(t,e){return t^e}function o(t,e){return t&~e}function s(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function a(t){for(var e=0;0!=t;)t&=t-1,++e;return e}var u,h,l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},c={decode:function(t){var e;if(void 0===u){for(u=Object.create(null),e=0;e<64;++e)u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(e=0;e<"= \f\n\r\t \u2028\u2029".length;++e)u["= \f\n\r\t \u2028\u2029".charAt(e)]=-1}var n=[],r=0,i=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(-1!=(o=u[o])){if(void 0===o)throw new Error("Illegal character at offset "+e);r|=o,++i>=4?(n[n.length]=r>>16,n[n.length]=r>>8&255,n[n.length]=255&r,r=0,i=0):r<<=6}}switch(i){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:n[n.length]=r>>10;break;case 3:n[n.length]=r>>16,n[n.length]=r>>8&255}return n},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=c.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return c.decode(t)}},f=function(){function t(e,n){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=n)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,n){for(var r="",i=t;i<e;++i)if(r+=this.hexByte(this.get(i)),!0!==n)switch(15&i){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},t}(),p=function(){function t(t,e,n,r,i){if(!(r instanceof d))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=n,this.tag=r,this.sub=i}return t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),n=127&e;if(n==e)return n;if(n>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===n)return null;e=0;for(var r=0;r<n;++r)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,n=2*this.length;return t.substr(e,n)},t.decode=function(e){var n;n=e instanceof f?e:new f(e,0);var r=new f(n),i=new d(n),o=t.decodeLength(n),s=n.pos,a=s-r.pos,u=null,h=function(){var e=[];if(null!==o){for(var r=s+o;n.pos<r;)e[e.length]=t.decode(n);if(n.pos!=r)throw new Error("Content size is not correct for container starting at offset "+s)}else try{for(;;){var i=t.decode(n);if(i.tag.isEOC())break;e[e.length]=i}o=s-n.pos}catch(t){throw new Error("Exception while decoding undefined length content: "+t)}return e};if(i.tagConstructed)u=h();else if(i.isUniversal()&&(3==i.tagNumber||4==i.tagNumber))try{if(3==i.tagNumber&&0!=n.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");u=h();for(var l=0;l<u.length;++l)if(u[l].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(t){u=null}if(null===u){if(null===o)throw new Error("We can't skip over an invalid tag with undefined length at offset "+s);n.pos=s+Math.abs(o)}return new t(r,a,o,i,u)},t}(),d=function(){function t(t){var e=t.get();this.tagClass=e>>6,this.tagConstructed=0!=(32&e),this.tagNumber=31&e,31==this.tagNumber&&null.error(0)}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),g=function(){function t(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return this.toRadix(t);n=2}var r,i=(1<<n)-1,o=!1,s="",a=this.t,u=this.DB-a*this.DB%n;if(a-- >0)for(u<this.DB&&(r=this[a]>>u)>0&&(o=!0,s=e(r));a>=0;)u<n?(r=(this[a]&(1<<u)-1)<<n-u,r|=this[--a]>>(u+=this.DB-n)):(r=this[a]>>(u-=n)&i,u<=0&&(u+=this.DB,--a)),r>0&&(o=!0),o&&(s+=e(r));return o?s:"0"},t.prototype.negate=function(){var e=m();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+A(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var n=m();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&e.subTo(n,n),n},t.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new y(e):new b(e),this.exp(t,n)},t.prototype.clone=function(){var t=m();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=m();return this.bitwiseTo(t,n,e),e},t.prototype.or=function(t){var e=m();return this.bitwiseTo(t,r,e),e},t.prototype.xor=function(t){var e=m();return this.bitwiseTo(t,i,e),e},t.prototype.andNot=function(t){var e=m();return this.bitwiseTo(t,o,e),e},t.prototype.not=function(){for(var t=m(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=m();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=m();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+s(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=a(this[n]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,r)},t.prototype.clearBit=function(t){return this.changeBit(t,o)},t.prototype.flipBit=function(t){return this.changeBit(t,i)},t.prototype.add=function(t){var e=m();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=m();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=m();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=m();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=m();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=m(),n=m();return this.divRemTo(t,e,n),[e,n]},t.prototype.pow=function(t){return this.exp(t,new v)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(e,n);r=2}this.t=0,this.s=0;for(var i=e.length,o=!1,s=0;--i>=0;){var a=8==r?255&+e[i]:D(e,i);a<0?"-"==e.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(t/this.DB),s=this.s<<n&this.DM,a=this.t-1;a>=0;--a)e[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;a>=0;--a)e[a]=0;e[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},t.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},t.prototype.multiplyTo=function(e,n){var r=this.abs(),i=e.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n[o]=0;for(o=0;o<i.t;++o)n[o+r.t]=r.am(0,i[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)},t.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,n,r){var i=e.abs();if(!(i.t<=0)){var o=this.abs();if(o.t<i.t)return null!=n&&n.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=m());var s=m(),a=this.s,u=e.s,h=this.DB-A(i[i.t-1]);h>0?(i.lShiftTo(h,s),o.lShiftTo(h,r)):(i.copyTo(s),o.copyTo(r));var l=s.t,c=s[l-1];if(0!=c){var f=c*(1<<this.F1)+(l>1?s[l-2]>>this.F2:0),p=this.FV/f,d=(1<<this.F1)/f,g=1<<this.F2,v=r.t,y=v-l,b=null==n?m():n;for(s.dlShiftTo(y,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),t.ONE.dlShiftTo(l,b),b.subTo(s,s);s.t<l;)s[s.t++]=0;for(;--y>=0;){var w=r[--v]==c?this.DM:Math.floor(r[v]*p+(r[v-1]+g)*d);if((r[v]+=s.am(0,w,r,y,0,l))<w)for(s.dlShiftTo(y,b),r.subTo(b,r);r[v]<--w;)r.subTo(b,r)}null!=n&&(r.drShiftTo(l,n),a!=u&&t.ZERO.subTo(n,n)),r.t=l,r.clamp(),h>0&&r.rShiftTo(h,r),a<0&&t.ZERO.subTo(r,r)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,n){if(e>4294967295||e<1)return t.ONE;var r=m(),i=m(),o=n.convert(this),s=A(e)-1;for(o.copyTo(r);--s>=0;)if(n.sqrTo(r,i),(e&1<<s)>0)n.mulTo(i,o,r);else{var a=r;r=i,i=a}return n.revert(r)},t}(),v=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),y=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),b=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=m();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(g.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=m();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function m(){return new g(null)}function w(t,e){return new g(t,e)}"Microsoft Internet Explorer"==window.navigator.appName?(g.prototype.am=function(t,e,n,r,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],h=this[t++]>>15,l=a*u+h*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*h+(i>>>30),n[r++]=1073741823&u}return i},h=30):"Netscape"!=window.navigator.appName?(g.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},h=26):(g.prototype.am=function(t,e,n,r,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],h=this[t++]>>14,l=a*u+h*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*h,n[r++]=268435455&u}return i},h=28),g.prototype.DB=h,g.prototype.DM=(1<<h)-1,g.prototype.DV=1<<h,g.prototype.FV=Math.pow(2,52),g.prototype.F1=52-h,g.prototype.F2=2*h-52;var S,_,x=[];for(S="0".charCodeAt(0),_=0;_<=9;++_)x[S++]=_;for(S="a".charCodeAt(0),_=10;_<36;++_)x[S++]=_;for(S="A".charCodeAt(0),_=10;_<36;++_)x[S++]=_;function D(t,e){var n=x[t.charCodeAt(e)];return null==n?-1:n}function I(t){var e=m();return e.fromInt(t),e}function A(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}g.ZERO=I(0),g.ONE=I(1);var T,E,P=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}(),B=null;if(null==B){B=[],E=0;var C=void 0;if(window.crypto&&window.crypto.getRandomValues){var R=new Uint32Array(256);for(window.crypto.getRandomValues(R),C=0;C<R.length;++C)B[E++]=255&R[C]}var M=function(t){if(this.count=this.count||0,this.count>=256||E>=256)window.removeEventListener?window.removeEventListener("mousemove",M,!1):window.detachEvent&&window.detachEvent("onmousemove",M);else try{var e=t.x+t.y;B[E++]=255&e,this.count+=1}catch(t){}};window.addEventListener?window.addEventListener("mousemove",M,!1):window.attachEvent&&window.attachEvent("onmousemove",M)}function O(){if(null==T){for(T=new P;E<256;){var t=Math.floor(65536*Math.random());B[E++]=255&t}for(T.init(B),E=0;E<B.length;++E)B[E]=0;E=0}return T.next()}var L=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=O()},t}(),k=function(t){function e(n){var r=t.call(this)||this;return n&&("string"==typeof n?r.parseKey(n):(e.hasPrivateKeyProperty(n)||e.hasPublicKeyProperty(n))&&r.parsePropertiesFrom(n)),r}return function(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.parseKey=function(t){try{var e=0,n=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?Hex.decode(t):c.unarmor(t),i=p.decode(r);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){e=i.sub[1].getHexStringValue(),this.n=w(e,16),n=i.sub[2].getHexStringValue(),this.e=parseInt(n,16);var o=i.sub[3].getHexStringValue();this.d=w(o,16);var s=i.sub[4].getHexStringValue();this.p=w(s,16);var a=i.sub[5].getHexStringValue();this.q=w(a,16);var u=i.sub[6].getHexStringValue();this.dmp1=w(u,16);var h=i.sub[7].getHexStringValue();this.dmq1=w(h,16);var l=i.sub[8].getHexStringValue();this.coeff=w(l,16)}else{if(2!==i.sub.length)return!1;var f=i.sub[1].sub[0];e=f.sub[0].getHexStringValue(),this.n=w(e,16),n=f.sub[1].getHexStringValue(),this.e=parseInt(n,16)}return!0}catch(t){return!1}},e}(function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=w(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var n=[],r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var o=new L,s=[];e>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);n[--e]=s[0]}return n[--e]=2,n[--e]=0,new g(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},t}()),N=function(){function t(t){t=t||{},this.default_key_size=parseInt(t.default_key_size,10)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new k(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.version="3.0.0-rc.1",t}();window.JSEncrypt=N,t.JSEncrypt=N,t.default=N,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){(function(t,r){var i;(function(){var o={function:!0,object:!0},s=o[typeof window]&&window||this,a=o[typeof e]&&e,u=o[typeof t]&&t&&!t.nodeType&&t,h=a&&u&&"object"==typeof r&&r;!h||h.global!==h&&h.window!==h&&h.self!==h||(s=h);var l=Math.pow(2,53)-1,c=/\bOpera/,f=Object.prototype,p=f.hasOwnProperty,d=f.toString;function g(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function v(t){return t=S(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:g(t)}function y(t,e){for(var n in t)p.call(t,n)&&e(t[n],n,t)}function b(t){return null==t?g(t):d.call(t).slice(8,-1)}function m(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function w(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=l)for(;++n<r;)e(t[n],n);else y(t,e)}(t,(function(r,i){n=e(n,r,i,t)})),n}function S(t){return String(t).replace(/^ +| +$/g,"")}var _=function t(e){var n=s,r=e&&"object"==typeof e&&"String"!=b(e);r&&(n=e,e=null);var i=n.navigator||{},o=i.userAgent||"";e||(e=o);var a,u,h,l,f,p=r?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(d.toString()),g=r?"Object":"ScriptBridgingProxyObject",_=r?"Object":"Environment",x=r&&n.java?"JavaPackage":b(n.java),D=r?"Object":"RuntimeObject",I=/\bJava/.test(x)&&n.java,A=I&&b(n.environment)==_,T=I?"a":"α",E=I?"b":"β",P=n.document||{},B=n.operamini||n.opera,C=c.test(C=r&&B?B["[[Class]]"]:b(B))?C:B=null,R=e,M=[],O=null,L=e==o,k=L&&B&&"function"==typeof B.version&&B.version(),N=w([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(e)&&(n.label||n)})),U=w(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(t,n){return t||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(e)&&(n.label||n)})),V=Y([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),F=w({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(t,n,r){return t||(n[V]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(V)]||RegExp("\\b"+m(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})),j=w(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(t,n){var r=n.pattern||m(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),v(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}));if(window.BK){var X=BK.getSystemInfoSync();-1!=(V=X.platform).indexOf("ios")?(V=V.replace(/ios/,"iPhone"),e=" OS "+X.osVersion+") "):(V=V.replace(/ios/,"Android"),e=" Android "+X.osVersion+"; ",j="Android "+X.osVersion),k=X.osVersion}function Y(t){return w(t,(function(t,n){var r=n.pattern||m(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=v(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}if(N&&(N=[N]),F&&!V&&(V=Y([F])),(a=/\bGoogle TV\b/.exec(V))&&(V=a[0]),/\bSimulator\b/i.test(e)&&(V=(V?V+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(e)&&M.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(e)?(F=(a=t(e.replace(/like iPhone OS/,""))).manufacturer,V=a.product):/^iP/.test(V)?(U||(U="Safari"),j="iOS"+((a=/ OS ([\d_]+)/i.exec(e))||(a=/ OS[^]+?([\d\.]+?) /i.exec(e))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"!=U||/buntu/i.test(j)?F&&"Google"!=F&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(V))||/\bAndroid\b/.test(j)&&/^Chrome/.test(U)&&/\bVersion\//i.test(e)?(U="Android Browser",j=/\bAndroid\b/.test(j)?j:"Android"):"Silk"==U?(/\bMobi/i.test(e)||(j="Android",M.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&M.unshift("accelerated")):"PaleMoon"==U&&(a=/\bFirefox\/([\d.]+)\b/.exec(e))?M.push("identifying as Firefox "+a[1]):"Firefox"==U&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(j||(j="Firefox OS"),V||(V=a[1])):!U||(a=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(U))?(U&&!V&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(a+"/")+8))&&(U=null),(a=V||F||j)&&(V||F||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(j))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(j)?j:a)+" Browser")):"Electron"==U&&(a=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&M.push("Chromium "+a):j="Kubuntu",k||(j&&-1!=j.indexOf("Android")&&(V=V||"Android",(a=/ Android[^]+?([\d\.]+?)[\)|;]/i.exec(e))&&(j="Android "+((k=a[1].replace(/_/g,"."))||""))),k||(k=w(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",m(U),"(?:Firefox|Minefield|NetFront)"],(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})))),(a=("iCab"==N&&parseFloat(k)>3?"WebKit":/\bOpera\b/.test(U)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(N)&&"WebKit"||!N&&/\bMSIE\b/i.test(e)&&("Mac OS"==j?"Tasman":"Trident")||"WebKit"==N&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&(N=[a]),"IE"==U&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(U+=" Mobile",j="Windows Phone "+(/\+$/.test(a)?a:a+".x"),M.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(U="IE Mobile",j="Windows Phone 8.x",M.unshift("desktop mode"),k||(k=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=U&&"Trident"==N&&(a=/\brv:([\d.]+)/.exec(e))&&(U&&M.push("identifying as "+U+(k?" "+k:"")),U="IE",k=a[1]),L){if(l="global",f=null!=(h=n)?typeof h[l]:"number",/^(?:boolean|number|string|undefined)$/.test(f)||"object"==f&&!h[l])b(a=n.runtime)==g?(U="Adobe AIR",j=a.flash.system.Capabilities.os):b(a=n.phantom)==D?(U="PhantomJS",k=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof P.documentMode&&(a=/\bTrident\/(\d+)/i.exec(e))?(k=[k,P.documentMode],(a=+a[1]+4)!=k[1]&&(M.push("IE "+k[1]+" mode"),N&&(N[1]=""),k[1]=a),k="IE"==U?String(k[1].toFixed(1)):k[0]):"number"==typeof P.documentMode&&/^(?:Chrome|Firefox)\b/.test(U)&&(M.push("masking as "+U+" "+k),U="IE",k="11.0",N=["Trident"],j="Windows");else if(I&&(R=(a=I.lang.System).getProperty("os.arch"),j=j||a.getProperty("os.name")+" "+a.getProperty("os.version")),A){try{k=n.require("ringo/engine").version.join("."),U="RingoJS"}catch(t){(a=n.system)&&a.global.system==n.system&&(U="Narwhal",j||(j=a[0].os||null))}U||(U="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(M.push("Node "+a.versions.node),U="Electron",k=a.versions.electron):"string"==typeof a.versions.nw&&(M.push("Chromium "+k,"Node "+a.versions.node),U="NW.js",k=a.versions.nw)),U||(U="Node.js",R=a.arch,j=a.platform,k=(k=/[\d.]+/.exec(a.version))?k[0]:null));j=j&&v(j)}if(k&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(k)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(L&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(O=/b/i.test(a)?"beta":"alpha",k=k.replace(RegExp(a+"\\+?$"),"")+("beta"==O?E:T)+(/\d+\+?/.exec(a)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS)\b/.test(j))U="Firefox Mobile";else if("Maxthon"==U&&k)k=k.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(V))"Xbox 360"==V&&(j=null),"Xbox 360"==V&&/\bIEMobile\b/.test(e)&&M.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(U)&&(!U||V||/Browser|Mobi/.test(U))||"Windows CE"!=j&&!/Mobi/i.test(e))if("IE"==U&&L)try{null===n.external&&M.unshift("platform preview")}catch(t){M.unshift("embedded")}else(/\bBlackBerry\b/.test(V)||/\bBB10\b/.test(e))&&(a=(RegExp(V.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||k)?(j=((a=[a,/BB10/.test(e)])[1]?(V=null,F="BlackBerry"):"Device Software")+" "+a[0],k=null):this!=y&&"Wii"!=V&&(L&&B||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(j)||"IE"==U&&(j&&!/^Win/.test(j)&&k>5.5||/\bWindows XP\b/.test(j)&&k>8||8==k&&!/\bTrident\b/.test(e)))&&!c.test(a=t.call(y,e.replace(c,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),c.test(U)?(/\bIE\b/.test(a)&&"Mac OS"==j&&(j=null),a="identify"+a):(a="mask"+a,U=C?v(C.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(j=null),L||(k=null)),N=["Presto"],M.push(a));else U+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==U&&"+"==a[1].slice(-1)?(U="WebKit Nightly",O="alpha",k=a[1].slice(0,-1)):k!=a[1]&&k!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(k=null),a[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==N&&(N=["Blink"]),L&&(p||a[1])?(N&&(N[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=N?"27":"28")):(N&&(N[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:"8"),N&&(N[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==U&&(!k||parseInt(k)>45)&&(k=a)),"Opera"==U&&(a=/\bzbov|zvav$/.exec(j))?(U+=" ",M.unshift("desktop mode"),"zvav"==a?(U+="Mini",k=null):U+="Mobile",j=j.replace(RegExp(" *"+a+"$"),"")):"Safari"==U&&/\bChrome\b/.exec(N&&N[1])&&(M.unshift("desktop mode"),U="Chrome Mobile",k=null,/\bOS X\b/.test(j)?(F="Apple",j="iOS 4.3+"):j=null),k&&0==k.indexOf(a=/[\d.]+$/.exec(j))&&e.indexOf("/"+a+"-")>-1&&(j=S(j.replace(a,""))),N&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(j)&&/\bSafari\b/.test(N[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(U)&&N[1])&&(a=N[N.length-1])&&M.push(a),M.length&&(M=["("+M.join("; ")+")"]),F&&V&&V.indexOf(F)<0&&M.push("on "+F),V&&M.push((/^on /.test(M[M.length-1])?"":"on ")+V),j&&(a=/ ([\d.+]+)$/.exec(j),u=a&&"/"==j.charAt(j.length-a[0].length-1),j={architecture:32,family:a&&!u?j.replace(a[0],""):j,version:a?a[1]:null,toString:function(){var t=this.version;return this.family+(t&&!u?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(j&&(j.architecture=64,j.family=j.family.replace(RegExp(" *"+a),"")),U&&(/\bWOW64\b/i.test(e)||L&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&M.unshift("32-bit")):j&&/^OS X/.test(j.family)&&"Chrome"==U&&parseFloat(k)>=39&&(j.architecture=64),e||(e=null);var K={};K.description=e,K.layout=N&&N[0],K.manufacturer=F,K.name=U,K.prerelease=O,K.product=V,K.ua=e,K.version=U&&k,K.os=j||{architecture:null,family:null,version:null,toString:function(){return"null"}};var W=window.my||window.hbs||window.qg||window.wx||window.tt||window.loadRuntime&&window.loadRuntime();return W&&W.getSystemInfo&&(K.runtimeMask=!0,K.product="",K.manufacturer="",K.os.version="",W.getSystemInfo({success:function(t){K.product=t.model,K.manufacturer=t.brand||"";var e=/Android[^]+?([\d\.]+?)\s/i.exec(t.system+" ");e&&e.length>1?K.os.version=e[1].replace(/_/g,"."):K.os.version=t.system,K.runtimeMask=!1},fail:function(){K.runtimeMask=!1},complete:function(){K.runtimeMask=!1}})),K.parse=t,K.toString=function(){return this.description||""},K.version&&M.unshift(k),K.name&&M.unshift(U),j&&U&&(j!=String(j).split(" ")[0]||j!=U.split(" ")[0]&&!V)&&M.push(V?"("+j+")":"on "+j),M.length&&(K.description=M.join(" ")),K}();s.platform=_,void 0===(i=function(){return _}.call(e,n,e,t))||(t.exports=i)}).call(this)}).call(this,n(1)(t),n(0))},function(t,e,n){var r,i,o,s,a;r=n(13),i=n(2).utf8,o=n(14),s=n(2).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var n=r.bytesToWords(t),u=8*t.length,h=1732584193,l=-271733879,c=-1732584194,f=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var d=a._ff,g=a._gg,v=a._hh,y=a._ii;for(p=0;p<n.length;p+=16){var b=h,m=l,w=c,S=f;h=d(h,l,c,f,n[p+0],7,-680876936),f=d(f,h,l,c,n[p+1],12,-389564586),c=d(c,f,h,l,n[p+2],17,606105819),l=d(l,c,f,h,n[p+3],22,-1044525330),h=d(h,l,c,f,n[p+4],7,-176418897),f=d(f,h,l,c,n[p+5],12,1200080426),c=d(c,f,h,l,n[p+6],17,-1473231341),l=d(l,c,f,h,n[p+7],22,-45705983),h=d(h,l,c,f,n[p+8],7,1770035416),f=d(f,h,l,c,n[p+9],12,-1958414417),c=d(c,f,h,l,n[p+10],17,-42063),l=d(l,c,f,h,n[p+11],22,-1990404162),h=d(h,l,c,f,n[p+12],7,1804603682),f=d(f,h,l,c,n[p+13],12,-40341101),c=d(c,f,h,l,n[p+14],17,-1502002290),h=g(h,l=d(l,c,f,h,n[p+15],22,1236535329),c,f,n[p+1],5,-165796510),f=g(f,h,l,c,n[p+6],9,-1069501632),c=g(c,f,h,l,n[p+11],14,643717713),l=g(l,c,f,h,n[p+0],20,-373897302),h=g(h,l,c,f,n[p+5],5,-701558691),f=g(f,h,l,c,n[p+10],9,38016083),c=g(c,f,h,l,n[p+15],14,-660478335),l=g(l,c,f,h,n[p+4],20,-405537848),h=g(h,l,c,f,n[p+9],5,568446438),f=g(f,h,l,c,n[p+14],9,-1019803690),c=g(c,f,h,l,n[p+3],14,-187363961),l=g(l,c,f,h,n[p+8],20,1163531501),h=g(h,l,c,f,n[p+13],5,-1444681467),f=g(f,h,l,c,n[p+2],9,-51403784),c=g(c,f,h,l,n[p+7],14,1735328473),h=v(h,l=g(l,c,f,h,n[p+12],20,-1926607734),c,f,n[p+5],4,-378558),f=v(f,h,l,c,n[p+8],11,-2022574463),c=v(c,f,h,l,n[p+11],16,1839030562),l=v(l,c,f,h,n[p+14],23,-35309556),h=v(h,l,c,f,n[p+1],4,-1530992060),f=v(f,h,l,c,n[p+4],11,1272893353),c=v(c,f,h,l,n[p+7],16,-155497632),l=v(l,c,f,h,n[p+10],23,-1094730640),h=v(h,l,c,f,n[p+13],4,681279174),f=v(f,h,l,c,n[p+0],11,-358537222),c=v(c,f,h,l,n[p+3],16,-722521979),l=v(l,c,f,h,n[p+6],23,76029189),h=v(h,l,c,f,n[p+9],4,-640364487),f=v(f,h,l,c,n[p+12],11,-421815835),c=v(c,f,h,l,n[p+15],16,530742520),h=y(h,l=v(l,c,f,h,n[p+2],23,-995338651),c,f,n[p+0],6,-198630844),f=y(f,h,l,c,n[p+7],10,1126891415),c=y(c,f,h,l,n[p+14],15,-1416354905),l=y(l,c,f,h,n[p+5],21,-57434055),h=y(h,l,c,f,n[p+12],6,1700485571),f=y(f,h,l,c,n[p+3],10,-1894986606),c=y(c,f,h,l,n[p+10],15,-1051523),l=y(l,c,f,h,n[p+1],21,-2054922799),h=y(h,l,c,f,n[p+8],6,1873313359),f=y(f,h,l,c,n[p+15],10,-30611744),c=y(c,f,h,l,n[p+6],15,-1560198380),l=y(l,c,f,h,n[p+13],21,1309151649),h=y(h,l,c,f,n[p+4],6,-145523070),f=y(f,h,l,c,n[p+11],10,-1120210379),c=y(c,f,h,l,n[p+2],15,718787259),l=y(l,c,f,h,n[p+9],21,-343485551),h=h+b>>>0,l=l+m>>>0,c=c+w>>>0,f=f+S>>>0}return r.endian([h,l,c,f])})._ff=function(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._gg=function(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._hh=function(t,e,n,r,i,o,s){var a=t+(e^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._ii=function(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?s.bytesToString(n):r.bytesToHex(n)}},function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?e.push(n.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={onStarted:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"started",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onSuccess:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"successed",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onCancelled:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"cancelled",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onFailed:function(t,e,n){if(e&&t&&0!=t.replace(/\s/g,"").length){var r=this._generatePostData({eventTag:"failed",eventID:t,eventFailDesc:n,eventValue:e});this._upload(r)}else console.log("eventID 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={loginStart:function(t){this.data.channel=t&&t.channel||"";var e=this._generatePostData({eventTag:"started",eventID:"login"});this._upload(e)},loginSuccess:function(t){if(t&&t.userID){this.data.age=t.age||0,this.data.sex=t.sex||0;var e=t.channel||this.data.channel,n=this._getLocalStorage("onlineDuration"),r=this._getLocalStorage("_UID_"+this.data.appID)||"";r.length>0&&parseInt(n)>0&&(this.data.userID=r,this.logout()),this.data.channel=e,this.data.userID=t.userID,this._addLocalStorage("_UID_"+this.data.appID,this.data.userID),this._addLocalStorage("__SDK_CHANNEL_",this.data.channel);var i=this._generatePostData({onlineDuration:0,eventTag:"successed",eventID:"login"});this._upload(i),this._addLocalStorage("onlineDuration",0),this._setHeartBeat(!0)}else console.log("userID 不能为空!")},loginFailed:function(t){if(t){var e=t;"string"!=typeof t&&(this.data.channel=t.channel,e=t.reason);var n=this._generatePostData({exitFailDesc:e||"",eventTag:"failed",eventID:"login"});this._upload(n)}else console.log("loginFailed 参数不能为空!")},logout:function(){this.data.channel=this._getLocalStorage("__SDK_CHANNEL_")||"";var t=this._getLocalStorage("onlineDuration")||0,e=this._generatePostData({onlineDuration:t,exitTag:"successed",eventID:"logout"});this._upload(e),this.data.userID="",this._setHeartBeat(!1),this._addLocalStorage("onlineDuration",0),this._addLocalStorage("__SDK_CHANNEL_",""),this._addLocalStorage("_UID_"+this.data.appID,"")},setAccountType:function(t){var e=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:{action:"update",accountType:t}});this._upload(e)},setAge:function(t){t&&(this.data.age=t)},setGender:function(t){0==t||1==t||2==t?t&&(this.data.aex=t):console.log("gender 为 int 类型：0 未知、1 男性、 2 女性")},createRole:function(t){var e={action:"createRole",roleID:t.roleID,userName:t.userName,race:t.race,class:t.class,gameServer:t.gameServer},n=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:e});this._upload(n)},setLevel:function(t){var e=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:{action:"update",level:t}});this._upload(e)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={onEvent:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"successed",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")},onEventStart:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"started",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")},onEventEnd:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"successed",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={payBegin:function(t){var e=this._generatePostData({expendTag:"started",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},paySuccess:function(t){var e=this._generatePostData({expendTag:"successed",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},payFailed:function(t){var e=this._generatePostData({expendTag:"failed",eventID:"pay",expendFailDesc:t.reason||"",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},payCanceled:function(t){var e=this._generatePostData({expendTag:"cancelled",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.level){var e=this._generatePostData({eventTag:"started",eventID:"barrier",eventValue:{level:t.level}});this._upload(e)}else console.log("level 不能为空!")},complete:function(t){if(t&&t.level){var e=this._generatePostData({eventTag:"successed",eventID:"barrier",eventValue:{level:t.level}});this._upload(e)}else console.log("level 不能为空!")},failed:function(t,e){if(t&&t.level){var n=this._generatePostData({eventTag:"failed",eventID:"barrier",eventFailDesc:t.reason||e,eventValue:{level:t.level}});this._upload(n)}else console.log("level 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"started",eventID:"task",eventValue:{taskID:t.taskID,taskType:t.type}});this._upload(e)}else console.log("taskID 不能为空!")},complete:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"successed",eventID:"task",eventValue:{taskID:t.taskID}});this._upload(e)}else console.log("taskID 不能为空!")},failed:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"failed",eventID:"task",eventFailDesc:t.reason||"",eventValue:{taskID:t.taskID}});this._upload(e)}else console.log("taskID 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={buy:function(t){var e={action:"buy",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,virtualCoin:t.virtualCoin,virtualType:t.virtualType,consumePoint:t.consumePoint},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)},get:function(t){var e={action:"get",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)},consume:function(t){var e={action:"consume",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={setVirtualNum:function(t){var e={action:"set",type:t.type,count:t.count},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)},get:function(t){var e={action:"get",type:t.type,count:t.count,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)},consume:function(t){var e={action:"consume",type:t.type,count:t.count,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)}},t.exports=r},function(t,e,n){var r=function(t){};r.prototype={GuideLine:1,MainLine:2,BranchLine:3,Daily:4,Activity:5,Other:100},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.adID){var e=this._generatePostData({eventTag:"started",eventID:"advertising",eventValue:{ID:t.adID}});this._upload(e)}else console.log("adID 不能为空!")},complete:function(t){if(t&&t.adID&&t.timeLong&&t.profit){var e=this._generatePostData({eventTag:"successed",eventID:"advertising",eventValue:{ID:t.adID,timeLong:t.timeLong,profit:t.profit}});this._upload(e)}else console.log("adID 不能为空!")},failed:function(t){if(t&&t.adID){var e=this._generatePostData({eventTag:"failed",eventID:"advertising",eventFailDesc:t.reason||"",eventValue:{ID:t.adID}});this._upload(e)}else console.log("adID 不能为空!")}},t.exports=r}]),r=t("default",o.exports)}));t("__cjsMetaURL",e.meta.url)}}}));

System.register("chunks:///_virtual/effectManager.ts",["cc","./resourceUtil.ts","./poolManager.ts","./gameConstants.ts"],(function(n){"use strict";var e,t,o,i,a,r,l,c,u,s,d,f;return{setters:[function(n){e=n.cclegacy,t=n._decorator,o=n.Vec3,i=n.AnimationComponent,a=n.ParticleSystemComponent,r=n.instantiate,l=n.AnimationClip,c=n.find,u=n.Component},function(n){s=n.resourceUtil},function(n){d=n.poolManager},function(n){f=n.gameConstants}],execute:function(){var p,v,h;function g(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function m(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function y(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}e._RF.push({},"554baRvdXVCaZZeXFSvvApe","effectManager",void 0);var C=t.ccclass;t.property,n("EffectManager",C("EffectManager")((h=v=function(n){var e,t;function u(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return y(m(e=n.call.apply(n,[this].concat(o))||this),"_ndParent",null),e}t=n,(e=u).prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t;var p,v,h,C=u.prototype;return C.start=function(){},C.playAni=function(n,e,t,a,r,c,u){var f=this;void 0===t&&(t=new o),void 0===a&&(a=!1),void 0===r&&(r=!1),void 0===c&&(c=1),void 0===u&&(u=function(){});var p=n.split("/")[1],v=this.ndParent.getChildByName(p),h=function(){var n,s,f;null===(n=v)||void 0===n||n.setScale(new o(c,c,c)),null===(s=v)||void 0===s||s.setWorldPosition(t);var p=null===(f=v)||void 0===f?void 0:f.getComponent(i);p.play(e);var h=p.getState(e);h&&(h.wrapMode=a?l.WrapMode.Loop:l.WrapMode.Normal),p.once(i.EventType.FINISHED,(function(){u&&u(),r&&v&&d.instance.putNode(v)}))};v?h():s.loadModelRes(n).then((function(n){(v=d.instance.getNode(n,f.ndParent)).setScale(new o(c,c,c)),v.setWorldPosition(t),h()}))},C.removeEffect=function(n,e){void 0===e&&(e=this.ndParent);var t=e.getChildByName(n);t&&(t.getComponentsInChildren(i).forEach((function(n){n.stop()})),(null==t?void 0:t.getComponentsInChildren(a)).forEach((function(n){null==n||n.clear(),null==n||n.stop()})),d.instance.putNode(t))},C.playParticle=function(n,e,t,i,r,l,c){var u=this;void 0===t&&(t=0),void 0===i&&(i=1),void 0===c&&(c=!1),s.loadEffectRes(n).then((function(n){var s=d.instance.getNode(n,u.ndParent);s.setScale(new o(i,i,i)),s.setWorldPosition(e),r&&(s.eulerAngles=r);var f=0,p=s.getComponentsInChildren(a);p.forEach((function(n){n.simulationSpeed=1,null==n||n.play();var e=n.duration;f=e>f?e:f})),c||setTimeout((function(){s.parent&&(l&&l(),p.forEach((function(n){null==n||n.clear(),null==n||n.stop()})),d.instance.putNode(s))}),1e3*(t&&t>0?t:f))}))},C.playParticleNotPool=function(n,e,t,i,l,c,u){var d=this;void 0===t&&(t=0),void 0===i&&(i=1),void 0===u&&(u=!1),s.loadEffectRes(n).then((function(n){var s=r(n);s.parent=d.ndParent,s.setScale(new o(i,i,i)),s.setWorldPosition(e),l&&(s.eulerAngles=l);var f=0;s.getComponentsInChildren(a).forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;f=e>f?e:f})),u||setTimeout((function(){s.parent&&(c&&c(),s.destroy())}),1e3*(t&&t>0?t:f))}))},C.playEffect=function(n,e,t,r,l,c,u,f,p){void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===l&&(l=0),void 0===c&&(c=1),void 0===u&&(u=new o),n.parent&&s.loadEffectRes(e).then((function(e){var s=d.instance.getNode(e,n);s.setScale(new o(c,c,c)),s.setPosition(u),f&&(s.eulerAngles=f);var v=0;t&&s.getComponentsInChildren(i).forEach((function(n,e){var t;null==n||n.play();var o=null==n||null===(t=n.defaultClip)||void 0===t?void 0:t.name;if(o){var i=n.getState(o);if(i){var a=i.duration;v=a>v?a:v,i.speed=1}}}));r&&s.getComponentsInChildren(a).forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;v=e>v?e:v}));setTimeout((function(){s.parent&&(p&&p(),d.instance.putNode(s))}),1e3*(l&&l>0?l:v))}))},C.getRunFastEff=function(n){s.loadEffectRes(f.EFFECT_LIST.RUNFAST).then((function(e){var t=d.instance.getNode(e,n);t.setRotationFromEuler(0,180,0),t.setPosition(0,.2,0),t.getComponentsInChildren(a).forEach((function(n){n.simulationSpeed=1,null==n||n.play();n.duration}))}))},C.putRunFastEff=function(n){n.parent&&(n.getComponentsInChildren(a).forEach((function(n){null==n||n.clear(),null==n||n.stop()})),d.instance.putNode(n))},p=u,h=[{key:"instance",get:function(){return this._instance||(this._instance=new u),this._instance}}],(v=[{key:"ndParent",get:function(){return this._ndParent||(this._ndParent=c("effectManager")),this._ndParent}}])&&g(p.prototype,v),h&&g(p,h),u}(u),y(v,"_instance",void 0),p=h))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["cc","./util.ts"],(function(t){"use strict";var a,e,s,n,i;return{setters:[function(t){a=t.cclegacy,e=t._decorator,s=t.sys,n=t.log},function(t){i=t.util}],execute:function(){var r,o,c;function u(t,a){for(var e=0;e<a.length;e++){var s=a[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function h(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}a._RF.push({},"5689348bSJGyYo12WGa6eeJ","storageManager",void 0);var l=e.ccclass;e.property,t("StorageManager",l("StorageManager")((c=o=function(){function t(){h(this,"_jsonData",{}),h(this,"_path",null),h(this,"KEY_CONFIG","template"),h(this,"_markSave",!1),h(this,"_saveTimer",-1)}var a,e,r,o=t.prototype;return o.start=function(){var t,a=this;(this._jsonData={userId:""},this._path=this._getConfigPath(),s.isNative)?t=jsb.fileUtils.getValueMapFromFile(this._path)[this.KEY_CONFIG]:t=s.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=i.decrypt(t));try{var e=JSON.parse(t);this._jsonData=e}catch(t){}}this._saveTimer=setInterval((function(){a.scheduleSave()}),5e3)},o.setConfigDataWithoutSave=function(t,a){var e=this._jsonData.userId;this._jsonData[e]?this._jsonData[e][t]=a:console.error("no account can not save")},o.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this._markSave=!0},o.getConfigData=function(t){var a=this._jsonData.userId;if(this._jsonData[a]){var e=this._jsonData[a][t];return e||""}return n("no account can not load"),""},o.setGlobalData=function(t,a){this._jsonData[t]=a,this.save()},o.getGlobalData=function(t){return this._jsonData[t]},o.setUserId=function(t){this._jsonData.userId=t,this._jsonData[t]||(this._jsonData[t]={}),this.save()},o.getUserId=function(){return this._jsonData.userId},o.scheduleSave=function(){this._markSave&&this.save()},o.markModified=function(){this._markSave=!0},o.save=function(){var t=JSON.stringify(this._jsonData),a="@"+i.encrypt(t);if(this._markSave=!1,s.isNative){var e={};e[this.KEY_CONFIG]=a,jsb.fileUtils.writeToFile(e,this._path)}else{s.localStorage.setItem(this.KEY_CONFIG,a)}},o._getConfigPath=function(){var t=s.platform,a="";return t===s.OS_WINDOWS?a="src/conf":t===s.OS_LINUX?a="./conf":s.isNative?(a=jsb.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},a=t,r=[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}],(e=null)&&u(a.prototype,e),r&&u(a,r),t}(),h(o,"_instance",void 0),r=c))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["cc","./util.ts","./storageManager.ts","./resourceUtil.ts"],(function(i){"use strict";var t,s,o,u,n,e;return{setters:[function(i){t=i.cclegacy,s=i._decorator,o=i.AudioClip},function(i){u=i.util},function(i){n=i.StorageManager},function(i){e=i.resourceUtil}],execute:function(){var a,c,l;function r(i,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}function d(i,t,s){return t in i?Object.defineProperty(i,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[t]=s,i}t._RF.push({},"5e2ecZFEJFEHoCgx6lXVYHB","audioManager",void 0);var h=s.ccclass;s.property,i("AudioManager",h("AudioManager")((l=c=function(){function i(){d(this,"_musicVolume",.8),d(this,"_soundVolume",1),d(this,"_audios",{}),d(this,"_arrSound",[])}var t,s,a,c=i.prototype;return c.init=function(){this._musicVolume=this._getAudioSetting(!0)?this._musicVolume:0,this._soundVolume=this._getAudioSetting(!1)?this._soundVolume:0},c._getAudioSetting=function(i){var t;return!(t=i?n.instance.getGlobalData("music"):n.instance.getGlobalData("sound"))||"true"===t},c.playMusic=function(i,t){var s=this,u="audio/music/"+i;e.loadRes(u,o,(function(o,u){var n={};n.clip=u,n.loop=t,n.isMusic=!0,s._audios[i]=n,s._playClip(i,!0)}))},c.playSound=function(i,t){var s=this;if(void 0===t&&(t=!1),this._soundVolume){e.loadRes("audio/sound/"+i,o,(function(o,n){var e={};e.clip=n,e.loop=t,e.isMusic=!1,s._arrSound.push(e),t&&(s._audios[i]=e,n.setLoop(t)),n.setVolume(s._soundVolume),n.playOneShot(),n.once("ended",(function(){u.remove(s._arrSound,(function(i){return i.clip===e.clip}))}))}))}},c._playClip=function(i,t){var s=this._audios[i],o=this._musicVolume;t||(o=this._soundVolume);var u=s.clip;u.setVolume(o),u.setLoop(s.loop),u.play()},c.stop=function(i){this._audios.hasOwnProperty(i)&&this._audios[i].clip.stop()},c.stopAll=function(){for(var i in this._audios){if(this._audios.hasOwnProperty(i))this._audios[i].clip.stop()}},c._setMusicVolume=function(i){for(var t in this._musicVolume=i,this._audios){if(this._audios.hasOwnProperty(t)&&this._audios[t].isMusic)this._audios[t].clip.setVolume(this._musicVolume)}},c.getMusicVolume=function(){return n.instance.getGlobalData("music")},c.pauseAll=function(){for(var i in console.log("pause all music!!!"),this._audios){if(this._audios.hasOwnProperty(i))this._audios[i].clip.pause()}},c.resumeAll=function(){for(var i in this._audios){if(this._audios.hasOwnProperty(i))this._audios[i].clip.play()}},c.openMusic=function(){this._setMusicVolume(.8),n.instance.setGlobalData("music","true")},c.closeMusic=function(){this._setMusicVolume(0),n.instance.setGlobalData("music","false")},c.openSound=function(){this._setSoundVolume(1),n.instance.setGlobalData("sound","true")},c.closeSound=function(){this._setSoundVolume(0),n.instance.setGlobalData("sound","false")},c._setSoundVolume=function(i){for(var t in this._soundVolume=i,this._audios){if(this._audios.hasOwnProperty(t)&&!this._audios[t].isMusic)this._audios[t].clip.setVolume(this._soundVolume)}for(var s=0;s<this._arrSound.length;s++){this._arrSound[s].clip.setVolume(this._soundVolume)}},c.stopSound=function(i){this._audios.hasOwnProperty(i)&&!this._audios[i].isMusic&&this._audios[i].clip.stop()},t=i,a=[{key:"instance",get:function(){return this._instance||(this._instance=new i,this._instance.init()),this._instance}}],(s=null)&&r(t.prototype,s),a&&r(t,a),i}(),d(c,"_instance",void 0),a=l))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/rewardPanel.ts",["cc"],(function(t){"use strict";var r,e,o;return{setters:[function(t){r=t.cclegacy,e=t._decorator,o=t.Component}],execute:function(){var c;r._RF.push({},"623ecII/2ZC6bFW2TmNhauS","rewardPanel",void 0);var n=e.ccclass;e.property,t("RewardPanel",n("RewardPanel")(c=function(t){var r,e;function o(){return t.apply(this,arguments)||this}return e=t,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e,o.prototype.start=function(){},o}(o))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/settingPanel.ts",["cc","./storageManager.ts","./audioManager.ts","./uiManager.ts","./gameConstants.ts"],(function(e){"use strict";var n,i,t,a,r,s,o,u,c,l,b,p;return{setters:[function(e){n=e.cclegacy,i=e._decorator,t=e.SpriteFrame,a=e.Node,r=e.Sprite,s=e.Vec3,o=e.profiler,u=e.Component},function(e){c=e.StorageManager},function(e){l=e.AudioManager},function(e){b=e.uiManager},function(e){p=e.gameConstants}],execute:function(){var g,h,f,_,d,S,M,O,v,y,C,m,D;function w(e,n,i,t){i&&Object.defineProperty(e,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(t):void 0})}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function P(e,n,i,t,a){var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,t){return t(e,n,i)||i}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,n,r),r=null),r}n._RF.push({},"6eb0a70e/9MbK8w/pt80sbp","settingPanel",void 0);var I=i.ccclass,V=i.property;e("SettingPanel",(g=I("SettingPanel"),h=V(t),f=V(t),_=V(a),d=V(a),S=V(a),g((v=P((O=function(e){var n,i;function t(){for(var n,i=arguments.length,t=new Array(i),a=0;a<i;a++)t[a]=arguments[a];return w(B(n=e.call.apply(e,[this].concat(t))||this),"sfSelect",v,B(n)),w(B(n),"sfUnSelect",y,B(n)),w(B(n),"ndBtnVibration",C,B(n)),w(B(n),"ndBtnMusic",m,B(n)),w(B(n),"ndBtnDebug",D,B(n)),z(B(n),"_isMusicOpen",!1),z(B(n),"_isVibrationOpen",!1),z(B(n),"_isDebugOpen",!1),n}i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var a=t.prototype;return a.show=function(){var e,n;this._isMusicOpen=l.instance.getMusicVolume(),this._changeState(this.ndBtnMusic,this._isMusicOpen),this._isVibrationOpen=null===(e=c.instance.getGlobalData("vibration"))||void 0===e||e,this._changeState(this.ndBtnVibration,this._isVibrationOpen),this._isDebugOpen=null!==(n=c.instance.getGlobalData("debug"))&&void 0!==n&&n,this._changeState(this.ndBtnDebug,this._isDebugOpen)},a._changeState=function(e,n){var i=e.getComponent(r),t=e.getChildByName("dot"),a=t.position.clone();n?(i.spriteFrame=this.sfSelect,t.setPosition(new s(30,a.y,a.z))):(i.spriteFrame=this.sfUnSelect,t.setPosition(new s(-30,a.y,a.z)))},a.onBtnVibrationClick=function(){l.instance.playSound(p.MUSIC_LIST.CLICK),this._isVibrationOpen=!this._isVibrationOpen,this._changeState(this.ndBtnVibration,this._isVibrationOpen),c.instance.setGlobalData("vibration",this._isVibrationOpen)},a.onBtnMusicClick=function(){l.instance.playSound(p.MUSIC_LIST.CLICK),this._isMusicOpen=!this._isMusicOpen,this._changeState(this.ndBtnMusic,this._isMusicOpen),this._isMusicOpen?(l.instance.openMusic(),l.instance.openSound()):(l.instance.closeMusic(),l.instance.closeSound())},a.onBtnDebugClick=function(){l.instance.playSound(p.MUSIC_LIST.CLICK),this._isDebugOpen=!this._isDebugOpen,this._changeState(this.ndBtnDebug,this._isDebugOpen),c.instance.setGlobalData("debug",this._isDebugOpen),!0===this._isDebugOpen?o.showStats():o.hideStats()},a.onBtnCloseClick=function(){l.instance.playSound(p.MUSIC_LIST.CLICK),b.instance.hideDialog(p.PANEL_PATH.SETTING_PANEL),b.instance.showDialog(p.PANEL_PATH.MAIN_PANEL)},t}(u)).prototype,"sfSelect",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P(O.prototype,"sfUnSelect",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=P(O.prototype,"ndBtnVibration",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=P(O.prototype,"ndBtnMusic",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=P(O.prototype,"ndBtnDebug",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=O))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){"use strict";var n,r,o,t,i,a,s,l,f,u;return{setters:[function(e){n=e.cclegacy,r=e._decorator,o=e.resources,t=e.error,i=e.Prefab,a=e.SpriteFrame,s=e.Texture2D,l=e.instantiate,f=e.find,u=e.isValid}],execute:function(){var c;n._RF.push({},"7844e1bOwZK+7JMYjENQU5v","resourceUtil",void 0);var d=r.ccclass;e("resourceUtil",d("resourceUtil")(c=function(){function e(){}return e.loadRes=function(e,n,r){o.load(e,(function(e,n){if(e)return t(e.message||e),void r(e,n);r(null,n)}))},e.loadEffectRes=function(e){var n=this;return new Promise((function(r,o){n.loadRes("prefab/effect/"+e,i,(function(n,t){if(n)return console.error("effect load failed",e),void(o&&o());r&&r(t)}))}))},e.loadModelRes=function(e){var n=this;return new Promise((function(r,o){n.loadRes("prefab/model/"+e,i,(function(n,t){if(n)return console.error("model load failed",e),void(o&&o());r&&r(t)}))}))},e.loadMatRes=function(e){var n=this;return new Promise((function(r,o){n.loadRes(""+e,i,(function(n,t){if(n)return console.error("effect load failed",e),void(o&&o());r&&r(t)}))}))},e.loadModelResArr=function(e,n,r,t){var a=n.map((function(n){return e+"/"+n}));o.load(a,i,r,t)},e.loadSpriteFrameRes=function(e){var n=this;return new Promise((function(r,o){n.loadRes(e,a,(function(n,t){if(n)return console.error("spriteFrame load failed!",e,n),void(o&&o());var i=new s;i.image=t;var l=new a;l.texture=i,r&&r(l)}))}))},e.getMap=function(e,n){var r="map";r+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+r,null,(function(e,r){if(e)n(e,r);else{var o="";if(r._file){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(r._file));var t=JSON.parse(o);n(null,t)}else if(r.text){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(r.text));t=JSON.parse(o);n(null,t)}else r.json?n(null,r.json):n("failed")}}))},e.getMapObj=function(e,n,r,t){for(var a=[],s=0;s<n.length;s++)a.push("map/"+e+"/"+n[s]);o.load(a,i,r,t)},e.getUIPrefabRes=function(e,n){this.loadRes("prefab/ui/"+e,i,n)},e.createUI=function(e,n,r){this.getUIPrefabRes(e,(function(e,o){if(!e){var t=l(o);t.setPosition(0,0,0),r||(r=f("Canvas")),r.addChild(t),n&&n(null,t)}}))},e.getJsonData=function(e,n){this.loadRes("datas/"+e,null,(function(e,r){e?t(e.message||e):r.json?n(e,r.json):n("failed!!!")}))},e.getTextData=function(e,n){this.loadRes("datas/"+e,null,(function(e,r){if(e)t(e.message||e);else{var o=r.text;n(e,o)}}))},e.setSpriteFrame=function(e,n,r){this.loadRes(e+"/spriteFrame",a,(function(o,t){if(o)return console.error("set sprite frame failed! err:",e,o),void r(o);n&&u(n)&&(n.spriteFrame=t,r(null))}))},e}())||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/addBrickTips.ts",["cc"],(function(i){"use strict";var t,e,n,o,r;return{setters:[function(i){t=i.cclegacy,e=i._decorator,n=i.UIOpacity,o=i.Label,r=i.Component}],execute:function(){var c;function s(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function a(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}t._RF.push({},"7cf05uAAeFMWKgvXhu6vKhE","addBrickTips",void 0);var d=e.ccclass;e.property,i("AddBrickTips",d("AddBrickTips")(c=function(i){var t,e;function r(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return a(s(t=i.call.apply(i,[this].concat(n))||this),"_opacity",null),a(s(t),"_lb",null),a(s(t),"_addBrickNum",0),a(s(t),"_addBrickCheckTime",0),a(s(t),"_isHideAni",!1),t}e=i,(t=r).prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var c=r.prototype;return c.onLoad=function(){this._opacity=this.node.getComponent(n),this._lb=this.node.getComponent(o)},c.addBrickTipsAni=function(){!this._isHideAni&&this.node.active||(this._isHideAni=!1,this._opacity.opacity=255,this.node.active=!0,this.node.setPosition(0,200,0),this._addBrickCheckTime=0,this._addBrickNum=0),this._addBrickNum++,this._lb.string="+"+this._addBrickNum.toString()},c.update=function(i){if(this._addBrickCheckTime<1)this._addBrickCheckTime+=i;else{this._isHideAni=!0;var t=this.node.getPosition();if(t.y>400)return void(this.node.active=!1);this.node.setPosition(t.add3f(0,11.7,0)),this._opacity.opacity=Number(this._opacity.opacity)-15}},r}(r))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/cameraFollow.ts",["cc","./clientEvent.ts","./gameConstants.ts","./gameManager.ts"],(function(e){"use strict";var t,o,s,a,r,A,n,i,c;return{setters:[function(e){t=e.cclegacy,o=e._decorator,s=e.Vec3,a=e.Quat,r=e.Mat4,A=e.Component},function(e){n=e.clientEvent},function(e){i=e.gameConstants},function(e){c=e.GameManager}],execute:function(){var f;function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}t._RF.push({},"80af6u0E5FEOLF/g/9Soi6u","cameraFollow",void 0);var _=o.ccclass,l=(o.property,new s),R=new s,P=new s;e("CameraFollow",_("CameraFollow")(f=function(e){var t,o;function A(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return T(E(t=e.call.apply(e,[this].concat(a))||this),"ndTarget",null),T(E(t),"cameraType",0),T(E(t),"offsetPos",new s),T(E(t),"offsetLookAtPos",new s),t}o=e,(t=A).prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o;var f=A.prototype;return f.onLoad=function(){n.on(i.CLIENTEVENT_LIST.CHANGECAMERATYPE,this._changeCameraType,this)},f._changeCameraType=function(e){switch(this.cameraType=e,e){case i.CAMERA_TYPE_LIST.READY:this.ndTarget=c.scriptPlayer.node,this.offsetPos=i.CAMERA_READY_DATA.offsetPosInit,this.offsetLookAtPos=i.CAMERA_READY_DATA.offsetLookAtPos,this.followTarget(1,1);break;case i.CAMERA_TYPE_LIST.READY_TO_PLAYING:this.ndTarget=c.scriptPlayer.node,this.offsetPos=i.CAMERA_PLAYING_DATA.offsetPosInit,this.offsetLookAtPos=i.CAMERA_PLAYING_DATA.offsetLookAtPos;break;case i.CAMERA_TYPE_LIST.ENDROAD:this.ndTarget=c.ndRoadEnd,this.offsetPos=i.CAMERA_ENDROAD_DATA.offsetPosInit,this.offsetLookAtPos=i.CAMERA_ENDROAD_DATA.offsetLookAtPos;break;case i.CAMERA_TYPE_LIST.REWARD:this.ndTarget=c.ndEndReward,this.offsetPos=i.CAMERA_REWARDROAD_DATA.offsetPosInit,this.offsetLookAtPos=i.CAMERA_REWARDROAD_DATA.offsetLookAtPos;break;case i.CAMERA_TYPE_LIST.PLAYING:case i.CAMERA_TYPE_LIST.SWOOP:break;default:console.error("cameraFollow _changeCameraType error type:",e)}},f.lateUpdate=function(e){if(this.ndTarget&&this.cameraType!==i.CAMERA_TYPE_LIST.READY&&this.cameraType!==i.CAMERA_TYPE_LIST.SWOOP){var t=1,o=1,s=!1;this.cameraType===i.CAMERA_TYPE_LIST.READY_TO_PLAYING?(t=.02,o=.02,s=!0):this.cameraType===i.CAMERA_TYPE_LIST.PLAYING?c.scriptPlayer.roleState===i.ROLE_STATE_LIST.CLIMB?(t=.02,o=.02):(t=.2,o=.2,s=!0):this.cameraType===i.CAMERA_TYPE_LIST.ENDROAD?(t=.05,o=.05):this.cameraType===i.CAMERA_TYPE_LIST.REWARD&&(t=.2,o=.2),this.followTarget(t,o,s)}},f.followTarget=function(e,t,o){var s=this.ndTarget.getPosition(),A=this.ndTarget.eulerAngles.y,n=a.fromEuler(new a,0,A,0),f=r.fromRT(new r,n,s);if(o){var E=c.scriptPlayer.brickNum>i.CAMERA_MAX_BRICKNUM?i.CAMERA_MAX_BRICKNUM:c.scriptPlayer.brickNum,T=i.CAMERA_ADDBRICK_OFFSET.clone().multiplyScalar(E);l.set(this.offsetPos.clone().add(T))}else l.set(this.offsetPos);l.transformMat4(f),R.lerp(l,e),this.node.position=R,l.set(s.add(this.offsetLookAtPos)),P.lerp(l,t),this.node.lookAt(P)},A}(A))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/gamePanel.ts",["cc","./audioManager.ts","./clientEvent.ts","./uiManager.ts","./gameConstants.ts","./gameUtils.ts","./gameManager.ts"],(function(t){"use strict";var n,i,e,o,a,r,s,u,c,l,h,d,p,f,_,g,E;return{setters:[function(t){n=t.cclegacy,i=t._decorator,e=t.SpriteFrame,o=t.Node,a=t.Label,r=t.Sprite,s=t.tween,u=t.Vec3,c=t.TweenSystem,l=t.director,h=t.Component},function(t){d=t.AudioManager},function(t){p=t.clientEvent},function(t){f=t.uiManager},function(t){_=t.gameConstants},function(t){g=t.gameUtils},function(t){E=t.GameManager}],execute:function(){var w,C,m,T,v,b,y,P,L,A,R,S,N,k,M;function z(t,n,i,e){i&&Object.defineProperty(t,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(e):void 0})}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function U(t,n,i,e,o){var a={};return Object.keys(e).forEach((function(t){a[t]=e[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,e){return e(t,n,i)||i}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,n,a),a=null),a}n._RF.push({},"9f81anv1sVIlK45mx8b362W","gamePanel",void 0);var F=i.ccclass,H=i.property;t("gamePanel",(w=F("gamePanel"),C=H(e),m=H(o),T=H(o),v=H(o),b=H(o),y=H(a),w((A=U((L=function(t){var n,i;function e(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return z(O(n=t.call.apply(t,[this].concat(e))||this),"sfCountdownList",A,O(n)),z(O(n),"ndReady",R,O(n)),z(O(n),"ndCountdown",S,O(n)),z(O(n),"ndFinger",N,O(n)),z(O(n),"ndRank",k,O(n)),z(O(n),"lbRank",M,O(n)),I(O(n),"spCountdown",null),I(O(n),"startPoint",null),I(O(n),"_countdownCheck",!1),I(O(n),"_countdownTime",0),I(O(n),"_endRoadPos",new u),I(O(n),"_playerRankNum",0),I(O(n),"_countdownSize",0),n}i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var a=e.prototype;return a.onLoad=function(){this.spCountdown=this.ndCountdown.getComponent(r)},a.onEnable=function(){this.node.on(o.EventType.TOUCH_MOVE,this._touchMove,this),this.node.on(o.EventType.TOUCH_END,this._touchEnd,this),this.node.on(o.EventType.TOUCH_CANCEL,this._touchEnd,this)},a.onDisable=function(){this.node.off(o.EventType.TOUCH_MOVE,this._touchMove,this),this.node.off(o.EventType.TOUCH_END,this._touchEnd,this),this.node.off(o.EventType.TOUCH_CANCEL,this._touchEnd,this),this._guideFingerAni(!1)},a._touchMove=function(t){if(E.isGameStart){this.startPoint||(this.startPoint=t.getStartLocation());var n=t.getLocation().x-this.startPoint.x;this.startPoint=t.getLocation(),n=Math.min(n,50),n=Math.max(n,-50),p.dispatchEvent(_.CLIENTEVENT_LIST.TOUCHMOVEPLAYER,n*_.GAME_TOUCH_MUL)}},a._touchEnd=function(t){E.isGameStart&&(this.startPoint=null,p.dispatchEvent(_.CLIENTEVENT_LIST.TOUCHMOVEPLAYER,0))},a.show=function(t){t&&(this.ndReady.active=!0,this._countdownCheck=t,this._countdownTime=3,this.changeCountdownNum(2),this._countdownSize=.8,this._guideFingerAni(!0),this._endRoadPos.set(E.ndRoadEnd.position),this.rolestartCountdown(),p.dispatchEvent(_.CLIENTEVENT_LIST.CHANGECAMERATYPE,_.CAMERA_TYPE_LIST.READY_TO_PLAYING),this.ndRank.active=!1),this._changeRank(1)},a.rolestartCountdown=function(){E.scriptPlayer.startCountdown();for(var t=0;t<E.scriptAiList.length;t++)E.scriptAiList[t].startCountdown()},a.rolePlayerStart=function(){E.scriptPlayer.playerStart();for(var t=0;t<E.scriptAiList.length;t++)E.scriptAiList[t].playerStart()},a._guideFingerAni=function(t){t?(this.ndFinger.setPosition(-100,-40,0),s(this.ndFinger).to(1,{position:new u(130,-40,0)}).to(1,{position:new u(-100,-40,0)}).union().repeatForever().start()):c.instance.ActionManager.removeAllActionsFromTarget(this.ndFinger)},a._changeRank=function(t){this.lbRank.string="第"+t+"名"},a.onBtnHomeClick=function(){d.instance.playSound(_.MUSIC_LIST.CLICK),f.instance.showDialog(_.PANEL_PATH.CLOSEPANEL),f.instance.hideDialog(_.PANEL_PATH.GAME_PANEL),l.pause()},a.changeCountdownNum=function(t){this.spCountdown.spriteFrame=this.sfCountdownList[t]},a.update=function(t){if(this._countdownCheck){var n=this._countdownTime-t;if(-1===Math.floor(n))d.instance.playSound(_.MUSIC_LIST.COUNTDOWN_END),this._countdownCheck=!1,this.ndReady.active=!1,this._guideFingerAni(!1),p.dispatchEvent(_.CLIENTEVENT_LIST.CHANGECAMERATYPE,_.CAMERA_TYPE_LIST.PLAYING),E.isGameStart=!0,this.rolePlayerStart(),this.checkPlayerRankNum(),this.ndRank.active=!0;else Math.floor(n)!==Math.floor(this._countdownTime)&&(d.instance.playSound(_.MUSIC_LIST.COUNTDOWN),this.changeCountdownNum(Math.floor(n)),this._countdownSize=.8),n%1>.8?this._countdownSize+=2*t:(this._countdownSize-=2*t,this._countdownSize<0&&(this._countdownSize=0)),this.ndCountdown.setScale(this._countdownSize,this._countdownSize,this._countdownSize),this._countdownTime=n}E.isGameStart&&l.getTotalFrames()%3==0&&this.checkPlayerRankNum()},a.checkPlayerRankNum=function(){if(!E.isWin)for(var t=1,n=E.scriptPlayer.node.position,i=g.getTwoPosXZLength(n.x,n.z,this._endRoadPos.x,this._endRoadPos.z),e=E.scriptAiList.length,o=0;o<e;o++){var a=E.scriptAiList[o],r=a.node.position;!a.checkAiDead()&&g.getTwoPosXZLength(r.x,r.z,this._endRoadPos.x,this._endRoadPos.z)<i&&t++,o===e-1&&t!==this._playerRankNum&&this.updateRankNum(t)}},a.updateRankNum=function(t){this._playerRankNum=t,this.lbRank.string="第"+this._playerRankNum+"名"},e}(h)).prototype,"sfCountdownList",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=U(L.prototype,"ndReady",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=U(L.prototype,"ndCountdown",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=U(L.prototype,"ndFinger",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=U(L.prototype,"ndRank",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=U(L.prototype,"lbRank",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=L))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/gameManager.ts",["cc","./resourceUtil.ts","./clientEvent.ts","./playerData.ts","./poolManager.ts","./uiManager.ts","./localConfig.ts","./gameConstants.ts","./gameUtils.ts"],(function(e){"use strict";var t,n,i,a,r,o,c,s,l,d,_,R,u,A,E,f,C,g,L,I,p;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.Material,a=e.sys,r=e.find,o=e.Node,c=e.JsonAsset,s=e.Vec3,l=e.Collider,d=e.instantiate,_=e.MeshRenderer,R=e.macro,u=e.Component},function(e){A=e.resourceUtil},function(e){E=e.clientEvent},function(e){f=e.playerData},function(e){C=e.poolManager},function(e){g=e.uiManager},function(e){L=e.localConfig},function(e){I=e.gameConstants},function(e){p=e.gameUtils}],execute:function(){var h,N,v,m,D,S,T;function M(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t._RF.push({},"a2e47ViUuZJ36JKmr/XnNEB","gameManager",void 0);var y=n.ccclass,b=n.property;e("GameManager",(h=y("GameManager"),N=b(i),h((T=S=function(e){var t,n;function i(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return M(O(t=e.call.apply(e,[this].concat(i))||this),"matNumList",D,O(t)),P(O(t),"ndMap",null),P(O(t),"ndEffectParent",null),P(O(t),"_mapDataCount",0),P(O(t),"_isLoadNum",0),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u=i.prototype;return u.onLoad=function(){f.instance.initPlayerData(),window.cocosAnalytics&&window.cocosAnalytics.init({appID:"683896164",version:"1.0.0",storeID:a.platform.toString(),engine:"cocos"}),E.on(I.CLIENTEVENT_LIST.RESTARTGAME,this._initGame,this),this.ndMap=this.node.getChildByName("map"),this.ndEffectParent=r("effectManager"),i.ndRewardCircle=this.node.getChildByName("rewardCircle"),i.ndBrickFloor=this.node.getChildByName("brickFloor")},u.start=function(){var e=this;L.instance.loadConfig((function(){var t=L.instance.getTable("module");for(var n in t){var i=t[n];if(i.type===I.CSV_TYPE_BRICKLAYER){for(var a=i.brickLayerData.split("/"),r=0;r<a.length;r++)a[r]=Number(a[r]);I.CSV_BRICK_LAYER_DATA[n]=a}}e._initGame()}))},u._initGame=function(){var e=this;i.arriveRoadEndNum=0,i.isGameStart=!1,i.isWin=!1,i.canGetBrickList={},i.ndBrickFloor.destroyAllChildren();var t=f.instance.getPlayerInfo("roleSkinId");i.aiSkinList.length=0;for(var n=0;n<I.SKIN_ID_LIST.length;n++){var a=I.SKIN_ID_LIST[n];t!==a&&i.aiSkinList.push(a)}var r=f.instance.getPlayerInfo("level");for(r>I.MAX_LEVEL_NUM&&(r=Math.ceil(Math.random()*I.MAX_LEVEL_NUM)),this._loadMap(r);this.ndEffectParent.children.length>0;)C.instance.putNode(this.ndEffectParent.children[0]);if(!i.scriptPlayer){var s=new o("player");s.parent=this.node,i.scriptPlayer=s.addComponent("Player"),i.scriptPlayer.createPlayer()}i.scriptPlayer.initPlayer(),E.dispatchEvent(I.CLIENTEVENT_LIST.CHANGECAMERATYPE,I.CAMERA_TYPE_LIST.READY);var l=I.AI_NUM,d=I.AIWAY_PATH_IN_RESOURCES+"/"+I.AIWAY_NAME+r;A.loadRes(d,c,(function(t,n){if(i.scriptAiList.length>0)for(var a=1;a<i.scriptAiList.length+1;a++)e.initOneAi(a,n.json);else for(var r=1;r<l+1;r++)e.createOneAi(r,n.json)}))},u.initOneAi=function(e,t){p.getBezierCalculateList(t,I.AI_INIT_POS_LIST[e].x,p.getAiDataToBezierList(I.AI_INIT_POS_LIST[e]),(function(t){i.scriptAiList[e-1].initAi(e,t)}))},u.createOneAi=function(e,t){var n=this;p.getBezierCalculateList(t,I.AI_INIT_POS_LIST[e].x,p.getAiDataToBezierList(I.AI_INIT_POS_LIST[e]),(function(t){var i=new o("ai"+e);i.parent=n.node,i.addComponent("Ai").createAi(e,t)}))},u._loadMap=function(e){for(var t=this,n=L.instance.getTable("map"+e);this.ndMap.children.length>0;)C.instance.putNode(this.ndMap.children[0]);this._isLoadNum=0,this._mapDataCount=0;var i=function(e){var i=n[e],a=i.name;a>I.CSV_MAP_ITEM_RANGE.BRICK_LAYER[0]&&a<I.CSV_MAP_ITEM_RANGE.BRICK_LAYER[1]?A.loadModelRes("brick/brickInRoad").then((function(e){var n=I.CSV_BRICK_LAYER_DATA[a];if(n){var r=new s(0,Number(i.eulY),0),o=p.setStringToVec3(i.position),c=0,l=r.y*R.RAD,d=p.getDirectionOfDistanceX(I.BRICK_LAYER_ONCE_Z,l),_=p.getDirectionOfDistanceZ(I.BRICK_LAYER_ONCE_Z,l);l=(180+r.y)*R.RAD;for(var u=p.getDirectionOfDistanceX(I.BRICK_LAYER_ONCE_Z,l),A=p.getDirectionOfDistanceZ(I.BRICK_LAYER_ONCE_Z,l),E=0;E<n.length;E++){c=0;var f=n[E],C=0,g=E*I.BRICK_LAYER_ONCE_Y;for(f%2==0?c=.5:(t._loadBrick(e,o.clone().add3f(0,g,0),r),C++,c=1);C<f;)t._loadBrick(e,o.clone().add3f(d*c,g,_*c),r),t._loadBrick(e,o.clone().add3f(u*c,g,A*c),r),c+=1,C+=2}}else console.error("error brickLayer:",a)})):a>I.CSV_MAP_ITEM_RANGE.ROAD[0]&&a<I.CSV_MAP_ITEM_RANGE.ROAD[1]?(t._mapDataCount++,t._loadRoad(i)):console.error("error getPrePath:",a)};for(var a in n)i(a)},u._loadBrick=function(e,t,n){var a=C.instance.getNode(e,this.ndMap);a.setPosition(t),a.setRotationFromEuler(n);var r=I.BRICK_ONCE_SIZE_DOWN_INIT;a.setScale(new s(r,r,r));var o=p.checkNowBrickIndex(t.z);i.canGetBrickList[o]||(i.canGetBrickList[o]=[]),i.canGetBrickList[o].push(a)},u._loadRoad=function(e){var t=this;A.loadModelRes("road/"+e.name).then((function(n){t._isLoadNum++;var a=C.instance.getNode(n,t.ndMap);if(a.position=p.setStringToVec3(e.position),a.scale=p.setStringToVec3(e.scale),a.eulerAngles=new s(0,Number(e.eulY),0),a.name===I.CSV_MAP_ITEM_NAME.ROAD_END){i.ndRoadEnd=a,i.ndEndReward=a;var r=a.getChildByName(I.CSV_MAP_ITEM_NAME.FINISH_LINE).getComponent(l);r.setGroup(I.COLLIDER_GROUP_LIST.FLOOR),r.setMask(p.getAiAndPlayerGroup())}for(var o=a.getComponents(l),c=0;c<o.length;c++)o[c].setGroup(I.COLLIDER_GROUP_LIST.FLOOR),o[c].setMask(p.getAiAndPlayerGroup());t._checkLoadFinish()}))},u._checkLoadFinish=function(){this._isLoadNum===this._mapDataCount&&(this.initEndRewardCircle(),g.instance.showDialog(I.PANEL_PATH.MAIN_PANEL))},u.initEndRewardCircle=function(){var e=this;i.ndRewardCircle.children.length===I.REWARD_CIRCLR_COUNT-1?this.reSetEndRewardCircle():A.loadModelRes("road/"+I.CSV_MAP_ITEM_NAME.ROAD_END_REWARD).then((function(t){for(var n=1;n<I.REWARD_CIRCLR_COUNT;n++){for(var a=C.instance.getNode(t,i.ndRewardCircle),r=a.getComponents(l),o=0;o<r.length;o++)r[o].setGroup(I.COLLIDER_GROUP_LIST.FLOOR),r[o].setMask(I.COLLIDER_GROUP_LIST.PLAYER);if(n+1>9){var c=new s;c.set(-.37,.01,0),a.children[1].setPosition(c);var R=a.children[2];c.set(.01,.01,0),null==R||R.setPosition(c);var u=d(R);u.parent=a,c.set(.4,.01,0),u.setPosition(c),u.getComponent(_).setMaterial(e.matNumList[n-10+1],0)}else{a.children[2].getComponent(_).setMaterial(e.matNumList[n+1],0)}if(a.children[0].name=(n+1).toString(),n===I.REWARD_CIRCLR_COUNT-1){var A=I.REWARD_LAST_SCALE_NUM,E=a.getScale();E.x=A,E.z=A,a.setScale(E),e.reSetEndRewardCircle()}}}))},u.reSetEndRewardCircle=function(){i.ndRewardCircle.active=!1;var e=i.ndRoadEnd.eulerAngles.y*R.RAD,t=i.ndRoadEnd.getPosition();t.subtract3f(p.getDirectionOfDistanceX(I.REWARD_START_TRANSVERSE,e),0,p.getDirectionOfDistanceZ(I.REWARD_START_TRANSVERSE,e));for(var n=I.REWARD_SIZE+0,a=new s,r=i.ndRoadEnd.eulerAngles.clone(),o=function(){return n+p.getRandomRange(I.REWARD_LONGITUDINAL_RANGE_HALF)},c=function(){return p.getRandomRange(I.REWARD_TRANSVERSE_RANGE_HALF,!0)},l=1;l<I.REWARD_CIRCLR_COUNT;l++){var d=i.ndRewardCircle.children[l-1];l===I.REWARD_CIRCLR_COUNT-1&&(n+=I.REWARD_LAST_SCALE_NUM/2);var _=p.getDirectionOfDistanceX(o(),e),u=p.getDirectionOfDistanceZ(o(),e);if(t.x-=_,t.z-=u,a.set(t),l===I.REWARD_CIRCLR_COUNT-1)d.setPosition(a),d.setRotationFromEuler(r);else{var A=(i.ndRoadEnd.eulerAngles.y+90)*R.RAD,E=p.getDirectionOfDistanceX(c(),A),f=p.getDirectionOfDistanceZ(c(),A);a.add3f(E,0,f),d.setPosition(a),d.setRotationFromEuler(r)}}},i}(u),P(S,"scriptAiList",[]),P(S,"scriptPlayer",null),P(S,"ndBrickFloor",null),P(S,"canGetBrickList",{}),P(S,"isGameStart",!1),P(S,"isWin",!1),P(S,"arriveRoadEndNum",0),P(S,"ndRoadEnd",null),P(S,"ndEndReward",null),P(S,"ndRewardCircle",null),P(S,"aiSkinList",[]),D=function(e,t,n,i,a){var r={};return Object.keys(i).forEach((function(e){r[e]=i[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}((m=T).prototype,"matNumList",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=m))||v));t._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["cc"],(function(r){"use strict";var n,t;return{setters:[function(r){n=r.cclegacy,t=r._decorator}],execute:function(){var e,u,i;n._RF.push({},"a40a4pGR6lCqo0coR1W4kAl","lodash",void 0);var o,f,a,c=t.ccclass;r("lodash",c("lodash")((i=u=function(){function r(){}return r.find=function(n,t){var e;if(Array.isArray(n)||(n=r._toArray(n)),(e=n.filter(t)).length)return e[0]},r.forEach=function(n,t){Array.isArray(n)?n.forEach(t):r._toArrayKey(n).forEach((function(r,e,u){var i=r.key,o=r.value;t(o,i,n)}))},r.cloneDeep=function(n){if(null===n||"object"!=typeof n)return n;var t={};for(var e in n.constructor===Array&&(t=[]),n)n.hasOwnProperty(e)&&(t[e]=r.cloneDeep(n[e]));return t},r.map=function(n,t){Array.isArray(n)||(n=r._toArray(n));var e=[];return n.forEach((function(r,n,u){e.push(t(r,n,u))})),e},r._toArrayKey=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push({key:t,value:r[t]});return n},r._toArray=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(r[t]);return n},r.filter=function(n,t){return Array.isArray(n)||(n=r._toArray(n)),n.filter(t)},r.isEqual=function(n,t){if(!(n instanceof Object)||!(t instanceof Object))return n===t;if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var e in n){var u=n[e]instanceof Object,i=t[e]instanceof Object;if(u&&i)return r.isEqual(n[e],t[e]);if(n[e]!==t[e])return!1}return!0},r.pullAllWith=function(r,n,t){return n.forEach((function(n){r.filter((function(r){return t(r,n)})).forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)}))})),r},r.now=function(){return Date.now()},r.pullAll=function(r,n){return n.forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)})),r},r.forEachRight=function(n,t){Array.isArray(n)||(n=r._toArray(n));for(var e=n.length-1;e>=0;e--){if(!t(n[e]))break}},r.startsWith=function(r,n,t){return(r=r.substr(t)).startsWith(n)},r.endsWith=function(r,n,t){return(r=r.substr(t)).endsWith(n)},r.remove=function(n,t){var e=[],u=[];return n.forEach((function(r,n){t(r)&&(e.push(r),u.push(n))})),r._basePullAt(n,u),e},r._basePullAt=function(r,n){for(var t,e=r?n.length:0,u=e-1;e--;){var i=n[e];e!==u&&i===t||(t=i,Array.prototype.splice.call(r,i,1))}return r},r.findIndex=function(r,n,t){var e;if(r=r.slice(t),"function"==typeof n){for(e=0;e<r.length;e++)if(n(r[e]))return e}else if(Array.isArray(n))for(e=0;e<r.length;e++){var u=n[0],i=!0;if(n.length>1&&(i=n[1]),r[e][u]===i)return e}else for(e=0;e<r.length;e++)if(r[e]===n)return e;return-1},r.concat=function(){var r=arguments.length;if(!r)return[];for(var n=arguments[0],t=1;t<r;)n=n.concat(arguments[t]),t++;return n},r.isNumber=function(r){return"number"==typeof r},r.indexOf=function(r,n,t){return(r=r.slice(t)).indexOf(n)},r.join=function(r,n){if(null===r)return"";var t="";return r.forEach((function(r){t+=r+n})),t.substr(0,t.length-1)},r.split=function(r,n,t){return r.split(n,t)},r.max=function(r){if(r&&r.length){for(var n,t=0;t<r.length;t++)0===t?n=r[0]:n<r[t]&&(n=r[t]);return n}},r.drop=function(r,n){return(null===r?0:r.length)?r.slice(n):[]},r.flattenDeep=function(n){return n.reduce((function(n,t){return n.concat(Array.isArray(t)?r.flattenDeep(t):t)}),[])},r.uniq=function(r){var n=[];return r.forEach((function(r){-1===n.indexOf(r)&&n.push(r)})),n},r.isNaN=function(n){return r.isNumber(n)&&n!==+n},r.chunk=function(r,n){if(!(null===r?0:r.length)||n<1)return[];for(var t=[];r.length>n;)t.push(r.slice(0,n)),r=r.slice(n);return t.push(r),t},r.toFinite=function(r){var n=1/0;return r?(r=Number(r))===n||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0},r.isObject=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)},r.isLength=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=r.MAX_SAFE_INTEGER},r._isArrayLike=function(n){return null!==n&&r.isLength(n.length)},r.maxBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t<r[u]&&(t=r[u],e=r[u]);return e}},r.minBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t>r[u]&&(t=n(r[u]),e=r[u]);return e}},r.sumBy=function(r,n){var t=0;for(var e in r)t+=n(r[e]);return t},r.countBy=function(r,n){var t={};for(var e in r){var u=n(e);t.hasOwnProperty(u)?t[u]+=1:t[u]=1}return t},r}(),a=9007199254740991,(f="MAX_SAFE_INTEGER")in(o=u)?Object.defineProperty(o,f,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[f]=a,e=i))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["cc","./util.ts","./poolManager.ts"],(function(t){"use strict";var e,i,n,o,r,a,s,l,c,u,p,f,h,b;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.LabelComponent,o=t.SpriteComponent,r=t.UIOpacityComponent,a=t.SpriteFrame,s=t.Vec3,l=t.UITransformComponent,c=t.isValid,u=t.Color,p=t.tween,f=t.Component},function(t){h=t.util},function(t){b=t.poolManager}],execute:function(){var d,g,m,y,v,w,_,z,T,I,O,B,P,S,U;function C(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function F(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function H(t,e,i,n,o){var r={};return Object.keys(n).forEach((function(t){r[t]=n[t]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,n){return n(t,e,i)||i}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}e._RF.push({},"a91d7M56W1FG4vm4cXb+REy","tips",void 0);var G=i.ccclass,N=i.property;t("tips",(d=G("tips"),g=N(n),m=N(o),y=N(o),v=N(r),w=N(a),_=N(a),d((I=H((T=function(t){var e,i;function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return C(F(e=t.call.apply(t,[this].concat(n))||this),"lbTips",I,F(e)),C(F(e),"spIcon",O,F(e)),C(F(e),"spBg",B,F(e)),C(F(e),"UIOpacityBg",P,F(e)),C(F(e),"sfGold",S,F(e)),C(F(e),"sfHeart",U,F(e)),j(F(e),"_targetPos",void 0),j(F(e),"_isShow",!1),j(F(e),"_movePos",new s),j(F(e),"_curTipPos",new s),j(F(e),"_tipTotalHeight",0),j(F(e),"_tipSpeedAddTimes",0),j(F(e),"_type",""),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var o=n.prototype;return o.start=function(){},o.show=function(t,e,i,n,o){var r,a,f,d=this;void 0===o&&(o=function(){}),n||(n=1),i||(i=new s(0,0,0)),this._type=e,this.node.setScale(new s(n,n,n));var g=null===(r=this.lbTips)||void 0===r||null===(a=r.node)||void 0===a||null===(f=a.getComponent(l))||void 0===f?void 0:f.contentSize;c(g)?(this.lbTips.string=t,this.lbTips.color=new u(214,132,53,255),"gold"===e||"heart"===e?(this.spBg.enabled=!1,this._movePos=new s,this._curTipPos=new s,this._tipSpeedAddTimes=0,this._tipTotalHeight=0,this._isShow=!0,this._targetPos=i,this.UIOpacityBg.opacity=50,"gold"===e?this.spIcon.spriteFrame=this.sfGold:"heart"===e&&(this.spIcon.spriteFrame=this.sfHeart),this.lbTips.color=new u(255,255,255,255),this.lbTips.string=h.formatValue(Number(t)),p(this.node).to(1.2,{scale:new s(n,n,n)},{easing:"smooth"}).start(),p(this.UIOpacityBg).to(.8,{opacity:255},{easing:"smooth"}).to(.4,{opacity:0},{easing:"smooth"}).call((function(){d._isShow=!1,o&&o(),b.instance.putNode(d.node)})).start()):(this.spBg.enabled=!0,this.UIOpacityBg.opacity=255,this.node.setPosition(i),this.spIcon.node.active=!1,this.scheduleOnce((function(){p(d.node).to(1.1,{position:new s(0,230,0)},{easing:"smooth"}).call((function(){o&&o(),b.instance.putNode(d.node)})).start(),p(d.UIOpacityBg).to(.7,{opacity:220},{easing:"smooth"}).to(.4,{opacity:0},{easing:"smooth"}).call((function(){})).start()}),.8))):b.instance.putNode(this.node)},o.update=function(t){},n}(f)).prototype,"lbTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=H(T.prototype,"spIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=H(T.prototype,"spBg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=H(T.prototype,"UIOpacityBg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=H(T.prototype,"sfGold",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=H(T.prototype,"sfHeart",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=T))||z));e._RF.pop()}}}));

System.register("chunks:///_virtual/createBrickLayer.ts",["cc","./gameConstants.ts","./gameUtils.ts"],(function(e){"use strict";var r,i,t,n,a,o,c,l,s,u,p,f;return{setters:[function(e){r=e.cclegacy,i=e._decorator,t=e.Vec3,n=e.Prefab,a=e.CCString,o=e.CCBoolean,c=e.Node,l=e.macro,s=e.instantiate,u=e.Component},function(e){p=e.gameConstants},function(e){f=e.gameUtils}],execute:function(){var y,b,_,d,v,g,h,m,k,C,B,O;function L(e,r,i,t){i&&Object.defineProperty(e,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(t):void 0})}function R(e,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,r,i){return r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function N(e,r,i,t,n){var a={};return Object.keys(t).forEach((function(e){a[e]=t[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,t){return t(e,r,i)||i}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}r._RF.push({},"ab3a2XHiyFIcZvv0x4rB9UA","createBrickLayer",void 0);var z=i.ccclass,D=i.property,P=new t(0,0,0);e("CreateBrickLayer",(y=z("CreateBrickLayer"),b=D({type:n,displayName:"砖块预制体"}),_=D({type:a,displayName:" "}),d=D({type:a,displayName:" "}),v=D({type:a,min:1,step:1,displayName:"砖块堆数据"}),g=D({type:o,displayName:"生成砖块堆"}),y((k=N((m=function(e){var r,i;function n(){for(var r,i=arguments.length,t=new Array(i),n=0;n<i;n++)t[n]=arguments[n];return L(w(r=e.call.apply(e,[this].concat(t))||this),"brickPre",k,w(r)),L(w(r),"test1",C,w(r)),L(w(r),"test2",B,w(r)),L(w(r),"brickLayerString",O,w(r)),E(w(r),"_isFinish1",!0),r}i=e,(r=n).prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i;var a,o,u,y=n.prototype;return y._creatrBrickLayer=function(){this.node.destroyAllChildren();var e=this.brickLayerString.split("/"),r=new c("brickParent");r.parent=this.node,r.setPosition(P);for(var i=0;i<e.length;i++){var t=P,n=P,a=0,o=t.y*l.RAD,s=f.getDirectionOfDistanceX(p.BRICK_LAYER_ONCE_Z,o),u=f.getDirectionOfDistanceZ(p.BRICK_LAYER_ONCE_Z,o);o=(180+t.y)*l.RAD;var y=f.getDirectionOfDistanceX(p.BRICK_LAYER_ONCE_Z,o),b=f.getDirectionOfDistanceZ(p.BRICK_LAYER_ONCE_Z,o),_=Number(e[i]),d=0,v=i*p.BRICK_LAYER_ONCE_Y;for(_%2==0?a=.5:(this._loadBrick(r,n.clone().add3f(0,v,0),t),d++,a=1);d<_;)this._loadBrick(r,n.clone().add3f(s*a,v,u*a),t),this._loadBrick(r,n.clone().add3f(y*a,v,b*a),t),a+=1,d+=2}this._isFinish1=!0},y._loadBrick=function(e,r,i){var n=s(this.brickPre);n.parent=e,n.setPosition(r),n.setRotationFromEuler(i);var a=p.BRICK_ONCE_SIZE_DOWN_INIT;n.setScale(new t(a,a,a))},a=n,(o=[{key:"createBrickLayer",get:function(){return!this._isFinish1},set:function(e){this._isFinish1&&(console.log("开始计算"),this._isFinish1=!1,this._creatrBrickLayer())}}])&&R(a.prototype,o),u&&R(a,u),n}(u)).prototype,"brickPre",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=N(m.prototype,"test1",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"导出砖块堆"}}),B=N(m.prototype,"test2",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"导出砖块数据示例：8/7。 代表以靠近地面开始往上算层数，第一层8个砖块，第二层7个砖块"}}),O=N(m.prototype,"brickLayerString",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"8/7"}}),N(m.prototype,"createBrickLayer",[g],Object.getOwnPropertyDescriptor(m.prototype,"createBrickLayer"),m.prototype),h=m))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e._RF.push({},"b08f08kiOlEA7e6qUWa7AnA","constant",void 0);var c=t("constant",(function(){}));n(c,"GAME_NAME","template"),n(c,"GAME_VERSION","1.0.1"),n(c,"GAME_FRAME",60),n(c,"GAME_INIT_FRAME",60),n(c,"LOCAL_CACHE",{PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"}),e._RF.pop()}}}));

System.register("chunks:///_virtual/aiWayItem.ts",["cc","./mapConstants.ts"],(function(e){"use strict";var t,i,r,n,a,o;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.CCString,n=e.CCBoolean,a=e.Component},function(e){o=e.mapConstants}],execute:function(){var l,u,c,s,p,b,f,y,d,I,m,T,E,g,v;function A(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,i,r,n){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,r){return r(e,t,i)||i}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}t._RF.push({},"cfb05G3yExLnawosJgfgsbP","aiWayItem",void 0);var z=i.ccclass,w=i.property;e("AiWayItem",(l=z("AiWayItem"),u=w({type:r,displayName:" "}),c=w({type:r,displayName:" "}),s=w({type:r,displayName:" "}),p=w({type:r,displayName:" "}),b=w({type:r,displayName:o.AIWAYITEM_STRING.NEXT_NAME}),f=w({type:n,displayName:o.AIWAYITEM_STRING.ISBENDEND}),l((I=_((d=function(e){var t,i;function r(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return A(N(t=e.call.apply(e,[this].concat(r))||this),"test1",I,N(t)),A(N(t),"test2",m,N(t)),A(N(t),"test3",T,N(t)),A(N(t),"test4",E,N(t)),A(N(t),"nextIdString",g,N(t)),A(N(t),"isBendEnd",v,N(t)),t}return i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,r}(a)).prototype,"test1",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return o.AIWAYITEM_STRING.TEXT1}}),m=_(d.prototype,"test2",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return o.AIWAYITEM_STRING.TEXT2}}),T=_(d.prototype,"test3",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return o.AIWAYITEM_STRING.TEXT3}}),E=_(d.prototype,"test4",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return o.AIWAYITEM_STRING.TEXT4}}),g=_(d.prototype,"nextIdString",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=_(d.prototype,"isBendEnd",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=d))||y));t._RF.pop()}}}));

System.register("chunks:///_virtual/mapConstants.ts",["cc"],(function(A){"use strict";var E;return{setters:[function(A){E=A.cclegacy}],execute:function(){E._RF.push({},"d0428XI1pBASLc9mDYQdJHq","mapConstants",void 0);A("mapConstants",{COMMON:{START_CALCULATE:"开始计算"},MAPLOADER_STRING:{SAVE_MAP_DATA:"导出关卡——关卡分栏",SAVE_MAP_NUM:"导出关卡数",SAVE_MAP_CHECK:"保存关卡数据",LOAD_MAP_DATA:"加载关卡——关卡分栏",LOAD_MAP_NUM:"加载关卡数",LOAD_MAP_CHECK:"加载关卡数据",AMEND_MAPITEM_NAME1:"归整mapItem子节点命名",AMEND_MAPITEM_NAME2:"修改mapItem子节点命名",SUCCESS:"成功",FAIL:"失败",LEVEL:"关卡",CREATE_DIRECTORY:"创建目录"},AIWAY_STRING:{SAVE_BEZIER_DATA:"导出配置的贝塞尔数据——分栏",SAVE_BEZIER_NUM:"导出关卡数",SAVE_BEZIER_CHECK:"导出配置数据",LOAD_BEZIER_DATA:"加载配置的贝塞尔数据——分栏",LOAD_BEZIER_NUM:"加载关卡数",LOAD_BEZIER_CHECK:"加载配置数据",SHOW_WAY:"是否显示路径",SHOW_WAY_DATA:"显示贝塞尔路径(间隔越大显示的点越少,避免节点太多卡顿)"},AIWAYITEM_STRING:{TEXT1:"下一个目标节点",TEXT2:"放空代表不存在，将自动存入本身的节点名称+1",TEXT3:"下一个节点不存在，将自动存入999(999代表结束点)",TEXT4:"示例(多个用英文逗号隔开)：  2,3   下一个目标节点为2和3任选其中之一",NEXT_NAME:"下一个目标点的名称",ISBENDEND:"当前节点是否为弯道结束"}});E._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["cc"],(function(e){"use strict";var t,r;return{setters:[function(e){t=e.cclegacy,r=e._decorator}],execute:function(){var n,i,s;function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t._RF.push({},"d7554BuqnJLAKibwVUWte5P","csvManager",void 0);var o=r.ccclass,l=(r.property,[",",";","\t","|","^"]),c=["\r\n","\r","\n"],h=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},f={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:l[0],newline:c[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var s in r[n])t[s]=r[n][s];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,h(t[i],i,r,n))})):e.forEach((function(e,r){s(e,h(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,h(t[i],i,r,n))})):e.forEach((function(e,r){s(e,h(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,s=this.getLimit(r,e.length);i<s&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,s=e.split(t.newline);function u(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,s=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||s%2!=0);)-1!==n?(i=n+1,s++):r=r+t.newline+e.shift();var u,a=[],o=0,l=0,c=0,h=r.length;for(var f in r)if(r.hasOwnProperty(f)){var d=parseInt(f),v=r[f];0===d&&'"'===v&&(o++,l=1),'"'===v&&(o++,r[d-1]===t.delimiter&&l===d&&l++),'"'===v&&o%2==0&&(r[d+1]!==t.delimiter&&d+1!==h||(c=d,u=r.substring(l,c),a.push(u),c=l=c+2)),v===t.delimiter&&o%2==0&&((c=d)>l?(u=r.substring(l,c),a.push(u),c=l=c+1):c===l&&(a.push(""),c=l=c+1))}return(c=h)>=l&&(u=r.substring(l,c),a.push(u)),a}return r.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=u(s),t.cast=u(s),n=u(s)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,s[0].split(t.delimiter),t.cast);s.length>0;){var a=u(s);a.length>1&&r(i(a),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,s=n.length;i<s;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var s=0,u=this.getLimit(t.limit,e.length);s<u;s++)r(this.encodeCells(e[s],n,i));return!0},encodeObjects:function(e,t,r){var n,i,s=t.delimiter,u=t.newline;for(var a in n=[],i=[],e[0])n.push(a),i.push(e[0][a]);!0===t.header?r(this.encodeCells(n,s,u)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,s,u)),r(this.encodeCells(i,s));for(var o=1,l=this.getLimit(t.limit,e.length);o<l;o++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[o][n[c]]);r(this.encodeCells(i,s,u))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,l,i),t.newline=t.newline||this.mostFrequent(e,c,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",o("CSVManager")((s=i=function(){function e(){a(this,"_csvTables",{}),a(this,"_csvTableForArr",{}),a(this,"_tableCast",{}),a(this,"_tableComment",{})}var t,r,n,i=e.prototype;return i.addTable=function(e,t,r){if(!this._csvTables[e]||r){var n={},i=[];f.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this._tableCast[e]=f.opts.cast,this._tableComment[e]=f.opts.comment,this._csvTables[e]=n,this._csvTableForArr[e]=i}},i.getTableArr=function(e){return this._csvTableForArr[e]},i.getTable=function(e){return this._csvTables[e]},i.queryOne=function(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]},i.queryByID=function(e,t){return this.queryOne(e,null,t)},i.queryAll=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===r&&(i[s]=n[s]);return i},i.queryIn=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},s=Object.keys(n),u=s.length,a=0;a<u;a++){var o=n[s[a]];r.indexOf(o[t])>-1&&(i[s[a]]=o)}return i},i.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),s=i.length,u=Object.keys(t),a=u.length,o=0;o<s;o++){for(var l=r[i[o]],c=!0,h=0;h<a;h++){var f=u[h];c=c&&t[f]===l[f]&&!n[i[o]]}c&&(n[i[o]]=l)}return n},i.queryOneByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(var s in r){for(var u=r[s],a=!0,o=0;o<i;o++){var l=n[o];a=a&&t[l]===u[l]}if(a)return u}return null},t=e,n=[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}],(r=null)&&u(t.prototype,r),n&&u(t,n),e}(),a(i,"_instance",void 0),n=s))||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/gameConstants.ts",["cc"],(function(_){"use strict";var E,A;return{setters:[function(_){E=_.cclegacy,A=_.Vec3}],execute:function(){E._RF.push({},"db3c12zip9P5qTGUFJ0DP+R","gameConstants",void 0);_("gameConstants",{LANGUAGE_LIST:{DIAMOND:"钻石",COMMING_SOON:"敬请期待",VIDEO:"视频免费",DIAMOND_NOT_ENOUGH:"钻石不足"},MUSIC_LIST:{CLICK:"click",WALK:"walk",JUMP:"jump",GETBEICK:"getBrick",PUTBRICK:"putBrick",BUMP:"bump",FALL:"fall",GETDIAMOND:"getDiamond",WIN:"win",RUNFAST:"runFast",COUNTDOWN:"countdown",COUNTDOWN_END:"countdownEnd",DEAD:"dead",REWARDMUL:"rewardMul"},MUSIC_RANDOM:{WALK:5,GETBEICK:5},EFFECT_LIST:{BRICK:"beickSet",END_ROAD:"colorBar",REWARD_ROAD:"activation",RUNFAST:"flyLight"},CLIENTEVENT_LIST:{CHANGECAMERATYPE:"changeCameraType",RESTARTGAME:"restartGame",ADDROLEBRICK:"addRoleBrick",TOUCHMOVEPLAYER:"touchMovePlayer",RESURRECTIONPLAYER:"resurrectionPlayer"},PANEL_PATH:{MAIN_PANEL:"main/mainPanel",SETTING_PANEL:"setting/settingPanel",GAME_PANEL:"game/gamePanel",RESURRECTION_PANEL:"resurrection/resurrectionPanel",GAMEOVER_PANEL:"gameOver/gameOverPanel",TIPS_PANEL:"common/tips",CLOSEPANEL:"close/closePanel"},COLLIDER_GROUP_LIST:{DEFAULT:1,PLAYER:2,FLOOR:4,AI:8},COLLIDER_ROLE_BOX_SIZE:new A(.15,.52,.15),COLLIDER_ROLE_BOX_CENTER:new A(0,.24,0),CAMERA_READY_DATA:{offsetPosInit:new A(0,1.1,2.2),offsetLookAtPos:new A(0,.3,0)},CAMERA_PLAYING_DATA:{offsetPosInit:new A(0,1.5,3),offsetLookAtPos:new A(0,0,0)},CAMERA_ADDBRICK_OFFSET:new A(0,.0225,.045),CAMERA_ENDROAD_DATA:{offsetPosInit:new A(0,.9,2.6),offsetLookAtPos:new A(0,.3,0)},CAMERA_REWARDROAD_DATA:{offsetPosInit:new A(0,2.5,3.5),offsetLookAtPos:new A(0,-.8,0)},CAMERA_TYPE_LIST:{READY:0,READY_TO_PLAYING:1,PLAYING:2,SWOOP:3,ENDROAD:4,REWARD:5},CAMERA_MAX_BRICKNUM:20,SKIN_MODEL_PATH:"role/girl",SKIN_MAT_PATH:"roleMat/girl",SKIN_ID_LIST:[0,1,2,10,11],ROLE_STATE_LIST:{IDLE:1,IDLE_TAKE_BRICK:2,RUN:3,RUN_TAKE_BRICK:4,PUT_BRICK:5,JUMP:6,SWOOP:7,CLIMB:8,FALL:9,WIN:10,FAIL:11,BUMP:12},ROLE_STATE_NAME:{1:"idle01",2:"idle02",3:"run",4:"move",5:"move01",6:"jump",7:"jump01",8:"climb1",9:"fall",10:"win",11:"fail",12:"jump01"},ROLE_FACE_DIRECTION:{FRONT:1,BACK:2,RIGHT_FRONT:3,LEFT_FRONT:4},ROLE_SPEED_Y_JUMP_START:1.85,ROLE_GRAVITY_JUMP:-6,ROLE_SPEED_Y_SWOOP_DOWN:.8,ROLE_SWOOP_DEATH:-.24,ROLE_CHECK_SWOOP_Y:.04,PLAYER_SPEED_RUN:2,PLAYER_SPEED_ON_BRICK:3.5,PLAYER_CLIMB_DOWN_RANGE:.33,PLAYER_CLIMB_DOWN_Y:-.23,PLAYER_CLIMB_CHECK_RANGE:.2,PLAYER_BUMP_AI_DISTANCE:.3,AI_NUM:3,AI_SPEED_RUN:16.8,AI_SPEED_ON_BRICK:3.5*8.4,AI_OFFSET_MAX:.4,AI_SPEED_BUMP:.7,AI_SPEED_Y_BUMP_START:4,AI_GRAVITY_BUMP:-3,AI_CHECK_HIDE_Y:-3,AI_INIT_POS_LIST:{1:new A(.3,0,-.63),2:new A(-.3,0,-.91),3:new A(.3,0,-1.39),4:new A(-.3,0,-1.9)},AIWAY_TWO_POINT_RANGE:.11,AIWAY_NAME:"aiWay",AIWAY_PATH_IN_RESOURCES:"aiWayData",BRICK_ONCE_HEIGHT:.1,BRICK_ONCE_CHECK_RANGE:.18,BRICK_ONCE_SIZE_HAND_INIT:.6,BRICK_ONCE_SIZE_DOWN_MAX:.25,BRICK_ONCE_SIZE_DOWN_INIT:.18,BRICK_CAN_GET_RANGE:.1,BRICK_CAN_GET_INTERVAL:1,BRICK_FLOOR_DOWN_Y:-.033,BRICK_PRODUCTION_TIME:3,BRICK_SHAKE_MIN:20,BRICK_SHAKE_HALF_TIME:.25,BRICK_SHAKE_GRADIENT:.25,BRICK_HAND_OFFSET_X:.162,BRICK_HAND_OFFSET_Z:.041,CSV_TYPE_BRICKLAYER:"brickLayer",CSV_BRICK_LAYER_DATA:{2001:[3,2]},CSV_MAP_ITEM_RANGE:{ROAD:[1e3,2e3],BRICK_LAYER:[2e3,3e3]},CSV_MAP_ITEM_NAME:{ROAD_END:"1010",ROAD_END_REWARD:"1011",FINISH_LINE:"finishLine"},BRICK_LAYER_ONCE_Z:.18,BRICK_LAYER_ONCE_Y:.04,ROAD_END_POS_LIST:[new A(0,0,-1.25),new A(-.262,0,-1.489),new A(.262,0,-1.489),new A(-.59,0,-1.653),new A(.59,0,-1.653)],REWARD_START_TRANSVERSE:1,REWARD_CIRCLR_COUNT:15,REWARD_TRANSVERSE_RANGE_HALF:1.5,REWARD_LONGITUDINAL_RANGE_HALF:1.2,REWARD_SIZE:1.7,REWARD_LAST_SCALE_NUM:2,MAIN_BASIS_DIAMOND:100,MAIN_BASIS_BRICK:100,MAIN_MUL:1.2,GAME_TOUCH_MUL:9,TOUCH_MOVE_CHECK_NAX:180,RESURR_PLAYER_ADD_BRICK_NUM:10,RESURR_COUNTDOWN_TIME:6,RESURR_TIME_TO_SHOW_NEXT:4,GAMEOVER_BASIS_DIAMOND:100,MAX_LEVEL_NUM:2});E._RF.pop()}}}));

System.register("chunks:///_virtual/lz-string.min.js",["./cjs-loader.mjs"],(function(r,e){"use strict";var o;return{setters:[function(r){o=r.default}],execute:function(){let n;r("default",void 0),o.define(e.meta.url,(function(e,t,i,s,u){o.createRequireWithReqMap({},t);window.LZString=function(){function r(r,e){if(!t[r]){t[r]={};for(var o=0;o<r.length;o++)t[r][r.charAt(o)]=o}return t[r][e]}var e=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},i={compressToBase64:function(r){if(null==r)return"";var e=i._compress(r,6,(function(r){return o.charAt(r)}));switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return r(o,e.charAt(n))}))},compressToUTF16:function(r){return null==r?"":i._compress(r,15,(function(r){return e(r+32)}))+" "},decompressFromUTF16:function(r){return null==r?"":""==r?null:i._decompress(r.length,16384,(function(e){return r.charCodeAt(e)-32}))},compressToUint8Array:function(r){for(var e=i.compress(r),o=new Uint8Array(2*e.length),n=0,t=e.length;t>n;n++){var s=e.charCodeAt(n);o[2*n]=s>>>8,o[2*n+1]=s%256}return o},decompressFromUint8Array:function(r){if(null==r)return i.decompress(r);for(var o=new Array(r.length/2),n=0,t=o.length;t>n;n++)o[n]=256*r[2*n]+r[2*n+1];var s=[];return o.forEach((function(r){s.push(e(r))})),i.decompress(s.join(""))},compressToEncodedURIComponent:function(r){return null==r?"":i._compress(r,6,(function(r){return n.charAt(r)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(o){return r(n,e.charAt(o))})))},compress:function(r){return i._compress(r,16,(function(r){return e(r)}))},_compress:function(r,e,o){if(null==r)return"";var n,t,i,s={},u={},c="",a="",p="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<r.length;i+=1)if(c=r.charAt(i),Object.prototype.hasOwnProperty.call(s,c)||(s[c]=f++,u[c]=!0),a=p+c,Object.prototype.hasOwnProperty.call(s,a))p=a;else{if(Object.prototype.hasOwnProperty.call(u,p)){if(p.charCodeAt(0)<256){for(n=0;h>n;n++)m<<=1,v==e-1?(v=0,d.push(o(m)),m=0):v++;for(t=p.charCodeAt(0),n=0;8>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1}else{for(t=1,n=0;h>n;n++)m=m<<1|t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t=0;for(t=p.charCodeAt(0),n=0;16>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[p]}else for(t=s[p],n=0;h>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++),s[a]=f++,p=String(c)}if(""!==p){if(Object.prototype.hasOwnProperty.call(u,p)){if(p.charCodeAt(0)<256){for(n=0;h>n;n++)m<<=1,v==e-1?(v=0,d.push(o(m)),m=0):v++;for(t=p.charCodeAt(0),n=0;8>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1}else{for(t=1,n=0;h>n;n++)m=m<<1|t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t=0;for(t=p.charCodeAt(0),n=0;16>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[p]}else for(t=s[p],n=0;h>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++)}for(t=2,n=0;h>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==e-1){d.push(o(m));break}v++}return d.join("")},decompress:function(r){return null==r?"":""==r?null:i._decompress(r.length,32768,(function(e){return r.charCodeAt(e)}))},_decompress:function(r,o,n){var t,i,s,u,c,a,p,l=[],f=4,h=4,d=3,m="",v=[],w={val:n(0),position:o,index:1};for(t=0;3>t;t+=1)l[t]=t;for(s=0,c=Math.pow(2,2),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;switch(s){case 0:for(s=0,c=Math.pow(2,8),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;p=e(s);break;case 1:for(s=0,c=Math.pow(2,16),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;p=e(s);break;case 2:return""}for(l[3]=p,i=p,v.push(p);;){if(w.index>r)return"";for(s=0,c=Math.pow(2,d),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;switch(p=s){case 0:for(s=0,c=Math.pow(2,8),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;l[h++]=e(s),p=h-1,f--;break;case 1:for(s=0,c=Math.pow(2,16),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;l[h++]=e(s),p=h-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,d),d++),l[p])m=l[p];else{if(p!==h)return null;m=i+i.charAt(0)}v.push(m),l[h++]=i+m.charAt(0),i=m,0==--f&&(f=Math.pow(2,d),d++)}}};return i}(),"function"==typeof define&&define.amd?define((function(){return LZString})):void 0!==i&&null!=i&&(i.exports=LZString),n=r("default",i.exports)}));r("__cjsMetaURL",e.meta.url)}}}));

System.register("chunks:///_virtual/roleBase.ts",["cc","./resourceUtil.ts","./audioManager.ts","./clientEvent.ts","./playerData.ts","./poolManager.ts","./uiManager.ts","./gameConstants.ts","./gameUtils.ts","./gameManager.ts","./effectManager.ts","./playerMusic.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,_,c,h,l,E,d,T,S,R,I,u,k,L,f,C,B,O,N;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Vec3,o=t.instantiate,r=t.MeshRenderer,s=t.SkeletalAnimation,a=t.RigidBody,_=t.BoxCollider,c=t.PhysicsSystem,h=t.tween,l=t.v3,E=t.geometry,d=t.Animation,T=t.Component},function(t){S=t.resourceUtil},function(t){R=t.AudioManager},function(t){I=t.clientEvent},function(t){u=t.playerData},function(t){k=t.poolManager},function(t){L=t.uiManager},function(t){f=t.gameConstants},function(t){C=t.gameUtils},function(t){B=t.GameManager},function(t){O=t.EffectManager},function(t){N=t.PlayerMusic}],execute:function(){var A;function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e._RF.push({},"e0095WB2AtJJoPouSFZZC3Z","roleBase",void 0);var F=i.ccclass,P=(i.property,new n),M=new n;t("RoleBase",F("RoleBase")(A=function(t){var e,i;function T(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return v(p(e=t.call.apply(t,[this].concat(n))||this),"_lastBrickPos",null),v(p(e),"_aniRole",null),v(p(e),"_ndRole",null),v(p(e),"_ndBrickParent",null),v(p(e),"_onFloorList",[]),v(p(e),"_roleState",null),v(p(e),"_nowSpeedY",5),v(p(e),"_speed",0),v(p(e),"_isOver",!1),v(p(e),"_roleId",1),v(p(e),"_isMandatoryChange",!1),v(p(e),"_isBrickShake",!1),v(p(e),"_brickMoveTime",0),v(p(e),"_brickMoveToLeft",!0),v(p(e),"_isInBrick",!1),v(p(e),"_pfNowBrick",null),v(p(e),"_isRunFastCheck",null),v(p(e),"_skinId",-1),v(p(e),"rankNum",0),v(p(e),"brickNum",0),e}i=t,(e=T).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var A,F,m,y=T.prototype;return y.onLoad=function(){var t=this;S.loadModelRes("brick/brick1").then((function(e){t._pfNowBrick=e}))},y.changeSkin=function(){var t,e,i=this;0===this._roleId?t=u.instance.getPlayerInfo("roleSkinId"):(e=Math.floor(B.aiSkinList.length*Math.random()),t=B.aiSkinList[e]+0,B.aiSkinList.splice(e,1)),t!==this._skinId&&(this._skinId=t,this._ndRole&&this._ndRole.destroy(),S.loadModelRes(f.SKIN_MODEL_PATH+Math.floor(this._skinId/10)).then((function(t){S.loadMatRes(f.SKIN_MAT_PATH+i._skinId).then((function(e){var n;i._ndRole=o(t),i._ndRole.parent=i.node,0===i._roleId&&i._ndRole.addComponent(N),null===(n=i._ndRole.getComponentInChildren(r))||void 0===n||n.setMaterial(e,0),i._aniRole=i._ndRole.getComponent(s),i._ndBrickParent=i._ndRole.getChildByName("brick Socket"),i._ndBrickParent.destroyAllChildren(),i._initState(),i._changeRoleEul(f.ROLE_FACE_DIRECTION.BACK)}))})))},y.createInitCom=function(t){var e=this.node.addComponent(a);e.type=a.Type.KINEMATIC,e.setGroup(t),e.setMask(f.COLLIDER_GROUP_LIST.FLOOR);var i=this.node.addComponent(_);i.isTrigger=!0,i.size=f.COLLIDER_ROLE_BOX_SIZE,i.center=f.COLLIDER_ROLE_BOX_CENTER,i.on("onTriggerEnter",this._triggerEnter,this),i.on("onTriggerExit",this._triggerExit,this)},y._triggerEnter=function(t){},y._triggerExit=function(t){if(t.otherCollider){var e=t.otherCollider.node,i=this._onFloorList.indexOf(e);-1!==i&&this._onFloorList.splice(i,1)}},y.initRole=function(){this.changeSkin(),this._ndBrickParent&&this._ndBrickParent.destroyAllChildren(),this._onFloorList.length=0,this.brickNum=0,this.rankNum=0,this._brickMoveTime=0,this._lastBrickPos=null,this._isRunFastCheck=!1;var t=this.node.getChildByName(f.EFFECT_LIST.RUNFAST);t&&O.instance.putRunFastEff(t),this.node.setRotationFromEuler(new n(0,0,0)),this._changeRoleEul(f.ROLE_FACE_DIRECTION.BACK),this._initState()},y.startCountdown=function(){0===this._onFloorList.length&&this._getNowUnderRoad()},y._getNowUnderRoad=function(){this._checkUnderRoad()&&this._onFloorList.push(c.instance.raycastResults[0].collider.node)},y.playerStart=function(){this._isOver=!1,this._checkRunState()},y._swoopFail=function(){this.roleState=f.ROLE_STATE_LIST.FALL},y._initState=function(){this._isMandatoryChange=!0,this.roleState=f.ROLE_STATE_LIST.IDLE},y._initLastBrickPos=function(){this._lastBrickPos&&(this._lastBrickPos=null)},y._checkCanGetBrick=function(){var t=this,e=this.node.getPosition(),i=C.checkNowBrickIndex(e.z),n=B.canGetBrickList[i];if(n)for(var o=function(i){var o=n[i];if(!o.active)return"continue";var r=o.position;C.getTwoPosXZLength(r.x,r.z,e.x,e.z)<f.BRICK_CAN_GET_RANGE&&(o.active=!1,setTimeout((function(){o.isValid&&(o.active=!0)}),1e3*f.BRICK_PRODUCTION_TIME),t._addRoleBrick(1))},r=n.length-1;r>-1;r--)o(r)},y._addBrickTips=function(){},y._addRoleBrick=function(t,e,i){0!==this.brickNum||i||(B.isGameStart?this.roleState=f.ROLE_STATE_LIST.RUN_TAKE_BRICK:this.roleState=f.ROLE_STATE_LIST.IDLE_TAKE_BRICK),0===this._roleId&&(this._addBrickTips(),R.instance.playSound(f.MUSIC_LIST.GETBEICK+C.getMusicNum(f.MUSIC_RANDOM.GETBEICK))),this.brickNum+=t;for(var o=0;o<t;o++){var s=new n,a=k.instance.getNode(this._pfNowBrick,this._ndBrickParent),_=f.BRICK_ONCE_SIZE_HAND_INIT;a.setScale(_,_,_);var c=this._ndBrickParent.children.length,h=this._getNowShakeBrickZ(c-1,Math.floor(c/2));s.set(f.BRICK_HAND_OFFSET_X,(c-1)*f.BRICK_ONCE_HEIGHT,h+f.BRICK_HAND_OFFSET_Z),a.setPosition(s);var l=a.getComponentInChildren(r);l.receiveShadow=r.ShadowReceivingMode.ON,l.shadowCastingMode=r.ShadowCastingMode.ON,e||(s.set(1.5,.1,0),O.instance.playEffect(a,f.EFFECT_LIST.BRICK,!1,!0,0,1,s)),o!==t-1||e||this._checkNowBrickShakeState()}},y._subRoleBrick=function(){if(this.roleState=f.ROLE_STATE_LIST.PUT_BRICK,this.brickNum--,0===this.brickNum)for(this._checkUnderFooting()?this.roleState=f.ROLE_STATE_LIST.RUN:this.roleState=f.ROLE_STATE_LIST.JUMP;this._ndBrickParent.children.length>0;)k.instance.putNode(this._ndBrickParent.children[0]);0===this._roleId&&R.instance.playSound(f.MUSIC_LIST.PUTBRICK);var t=this._ndBrickParent.children.length;k.instance.putNode(this._ndBrickParent.children[t-1]),this._checkNowBrickShakeState(),this._createBrickToGround()},y._createBrickToGround=function(){var t=k.instance.getNode(this._pfNowBrick,B.ndBrickFloor),e=f.BRICK_ONCE_SIZE_DOWN_MAX;t.setScale(new n(e,e,e));var i=t.getComponentInChildren(r);i.receiveShadow=r.ShadowReceivingMode.OFF,i.shadowCastingMode=r.ShadowCastingMode.OFF;var o=this.node.position;if(this._lastBrickPos){var s=f.BRICK_ONCE_CHECK_RANGE,a=C.checkTwoPosEulRad(o.x,o.z,this._lastBrickPos.x,this._lastBrickPos.z);M.set(this._lastBrickPos.x,f.BRICK_FLOOR_DOWN_Y,this._lastBrickPos.z).add3f(C.getDirectionOfDistanceX(s,a),0,C.getDirectionOfDistanceZ(s,a))}else M.set(o.x,f.BRICK_FLOOR_DOWN_Y,o.z);this._lastBrickPos=M,t.setPosition(M);var _=f.BRICK_ONCE_SIZE_DOWN_INIT;h(t).to(.5,{scale:new n(_,_,_)}).start(),O.instance.playParticle(f.EFFECT_LIST.BRICK,M,1,1)},y._changeRoleEul=function(t){if(this._aniRole){var e=new n;if(t===f.ROLE_FACE_DIRECTION.FRONT)e=l(0,0,0);else if(t===f.ROLE_FACE_DIRECTION.BACK)e=l(0,180,0);else if(t===f.ROLE_FACE_DIRECTION.RIGHT_FRONT)e=l(0,45,0);else{if(t!==f.ROLE_FACE_DIRECTION.LEFT_FRONT)return void console.error("error _changeRoleEul type:"+t);e=l(0,-45,0)}this._ndRole.setRotationFromEuler(e)}},y._checkUnderFooting=function(){return this._onFloorList.length>0||this._checkInBrick()},y._checkInBrick=function(t){this._isInBrick=!1,t||(t=this.node.position);for(var e=0;e<B.ndBrickFloor.children.length;e++){var i=B.ndBrickFloor.children[e].position;if(C.getTwoPosXZLength(i.x,i.z,t.x,t.z)<f.BRICK_ONCE_CHECK_RANGE){this._isInBrick=!0,this._lastBrickPos=i;break}}return this._isInBrick},y._checkRunState=function(){this.brickNum>0?this.roleState=f.ROLE_STATE_LIST.RUN_TAKE_BRICK:this.roleState=f.ROLE_STATE_LIST.RUN},y._touchFinishLine=function(){var t=this;if(0===this.rankNum||0!==this._roleId){this._isOver=!0,this._roleId||(R.instance.playSound(f.MUSIC_LIST.WIN),I.dispatchEvent(f.CLIENTEVENT_LIST.CHANGECAMERATYPE,f.CAMERA_TYPE_LIST.ENDROAD)),B.arriveRoadEndNum++,this.rankNum=B.arriveRoadEndNum;var e=f.ROLE_STATE_LIST.FAIL,i=0;1===this.rankNum?(e=f.ROLE_STATE_LIST.WIN,i=f.ROLE_FACE_DIRECTION.FRONT):i=this.rankNum%2==0?f.ROLE_FACE_DIRECTION.RIGHT_FRONT:f.ROLE_FACE_DIRECTION.LEFT_FRONT;var n=B.ndRoadEnd.getPosition().add(f.ROAD_END_POS_LIST[this.rankNum-1]);this.node.lookAt(n),h(this.node).to(1,{position:n}).call((function(){t._clrerAllGetBrick(),t._changeRoleEul(i),t.roleState=e,t._gameIsOver(!1)})).start()}},y._checkNowBrickShakeState=function(){var t=this._ndBrickParent.children.length;t>f.BRICK_SHAKE_MIN?this._isBrickShake=!0:(this._isBrickShake=!1,this._ndBrickParent.children[t-1]&&0!==this._ndBrickParent.children[t-1].position.z&&this._brickShakeInit())},y._brickShakeInit=function(){var t=f.BRICK_ONCE_HEIGHT;P.set(f.BRICK_HAND_OFFSET_X,0,f.BRICK_HAND_OFFSET_Z);for(var e=this._ndBrickParent.children.length,i=0;i<e;i++){var n=this._ndBrickParent.children[i];P.y=i*t,n.setPosition(P)}},y._allBrickShake=function(t,e){if(this._isBrickShake)for(var i=f.BRICK_SHAKE_HALF_TIME,n=this._ndBrickParent.children.length,o=Math.floor(n/2),r=0;r<n;r++){var s=this._ndBrickParent.children[r];P.set(s.position),r>o?(P.z=this._getNowShakeBrickZ(r,o),e||r!==n-1||(this._brickMoveToLeft?this._brickMoveTime-=t:this._brickMoveTime+=t,this._brickMoveTime<-i?(this._brickMoveTime=-i,this._brickMoveToLeft=!1):this._brickMoveTime>i&&(this._brickMoveTime=i,this._brickMoveToLeft=!0))):P.z=0,s.setPosition(P)}},y._getNowShakeBrickZ=function(t,e){var i;return(i=0===e?0:(t-e)/(2*e))*i*this._brickMoveTime*(e*f.BRICK_SHAKE_GRADIENT)},y._checkUnderRoad=function(){var t=this.node.position,e=new E.Ray(t.x,0,t.z,0,-1,0),i=c.instance.raycast(e);return i&&this._initLastBrickPos(),i},y._stopRunFastEff=function(){if(this._isRunFastCheck){var t=this.node.getChildByName(f.EFFECT_LIST.RUNFAST);t&&(this._isRunFastCheck=!1,O.instance.putRunFastEff(t))}},y._gameIsOver=function(t){0===this._roleId&&(B.isWin=t,L.instance.hideDialog(f.PANEL_PATH.GAME_PANEL),L.instance.showDialog(f.PANEL_PATH.GAMEOVER_PANEL))},y._clrerAllGetBrick=function(){for(;this._ndBrickParent.children.length>0;)k.instance.putNode(this._ndBrickParent.children[0])},A=T,(F=[{key:"roleState",set:function(t){var e=this;if(this._aniRole){if(this._isMandatoryChange)this._isMandatoryChange=!1;else{if(t===this._roleState)return;if(this._roleState===f.ROLE_STATE_LIST.FALL||this._roleState===f.ROLE_STATE_LIST.WIN||this._roleState===f.ROLE_STATE_LIST.BUMP||this._roleState===f.ROLE_STATE_LIST.CLIMB)return;if(this._roleState===f.ROLE_STATE_LIST.JUMP&&this._nowSpeedY>0&&t!==f.ROLE_STATE_LIST.SWOOP)return}switch(this._roleState=t,this._aniRole.play(f.ROLE_STATE_NAME[this._roleState]),t){case f.ROLE_STATE_LIST.FALL:0===this._roleId?R.instance.playSound(f.MUSIC_LIST.FALL):R.instance.playSound(f.MUSIC_LIST.DEAD),this._stopRunFastEff();break;case f.ROLE_STATE_LIST.PUT_BRICK:this._aniRole.once(d.EventType.FINISHED,(function(){e.roleState===f.ROLE_STATE_LIST.PUT_BRICK&&e._checkRunState()}));break;case f.ROLE_STATE_LIST.JUMP:0===this._roleId&&R.instance.playSound(f.MUSIC_LIST.JUMP),this._nowSpeedY=f.ROLE_SPEED_Y_JUMP_START+0;break;case f.ROLE_STATE_LIST.BUMP:R.instance.playSound(f.MUSIC_LIST.BUMP),this._speed=f.AI_SPEED_BUMP,this._nowSpeedY=f.AI_SPEED_Y_BUMP_START+0,this._aniRole.once(d.EventType.FINISHED,(function(){e._isMandatoryChange=!0,e.roleState=f.ROLE_STATE_LIST.FALL})),this._stopRunFastEff();break;case f.ROLE_STATE_LIST.SWOOP:this._aniRole.once(d.EventType.FINISHED,(function(){e.roleState===f.ROLE_STATE_LIST.SWOOP&&0!==e._roleId&&(e._isMandatoryChange=!0,e.roleState=f.ROLE_STATE_LIST.FALL)})),this._stopRunFastEff();case f.ROLE_STATE_LIST.WIN:case f.ROLE_STATE_LIST.FAIL:this._stopRunFastEff()}}},get:function(){return this._roleState}}])&&g(A.prototype,F),m&&g(A,m),T}(T))||A);e._RF.pop()}}}));

System.register("chunks:///_virtual/resurrectionPanel.ts",["cc","./audioManager.ts","./clientEvent.ts","./uiManager.ts","./gameConstants.ts"],(function(n){"use strict";var t,e,i,o,r,u,a,c,l,s;return{setters:[function(n){t=n.cclegacy,e=n._decorator,i=n.Node,o=n.Label,r=n.ProgressBar,u=n.Component},function(n){a=n.AudioManager},function(n){c=n.clientEvent},function(n){l=n.uiManager},function(n){s=n.gameConstants}],execute:function(){var d,f,p,h,b,w,N,E,v,C,R;function _(n,t,e,i){e&&Object.defineProperty(n,t,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(i):void 0})}function D(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function m(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function g(n,t,e,i,o){var r={};return Object.keys(i).forEach((function(n){r[n]=i[n]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=e.slice().reverse().reduce((function(e,i){return i(n,t,e)||e}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(n,t,r),r=null),r}t._RF.push({},"e097fcVm+ZAXJKKrJ62IwH9","resurrectionPanel",void 0);var T=e.ccclass,y=e.property;n("ResurrectionPanel",(d=T("ResurrectionPanel"),f=y(i),p=y(o),h=y(i),b=y(i),d((E=g((N=function(n){var t,e;function i(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return _(D(t=n.call.apply(n,[this].concat(i))||this),"ndCountDownHeart",E,D(t)),_(D(t),"lbCountDown",v,D(t)),_(D(t),"ndResurrection",C,D(t)),_(D(t),"ndNext",R,D(t)),m(D(t),"_pbCountDownHeart",null),m(D(t),"countDownNum",0),t}e=n,(t=i).prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var o=i.prototype;return o.onLoad=function(){this._pbCountDownHeart=this.ndCountDownHeart.getComponent(r)},o.show=function(n){n?(this.ndCountDownHeart.active=!0,this.ndResurrection.active=!0,this.ndNext.active=!1,this.countDownNum=s.RESURR_COUNTDOWN_TIME+0,this._updateCountDownNum()):(this.ndCountDownHeart.active=!1,this.ndResurrection.active=!1,this.ndNext.active=!0,this.countDownNum=0)},o.update=function(n){this.countDownNum>0&&(this.countDownNum-=n,this._updateCountDownNum(),this.countDownNum<=0&&(this.ndResurrection.active=!1,this.ndCountDownHeart.active=!1),this.countDownNum<=s.RESURR_TIME_TO_SHOW_NEXT&&!this.ndNext.active&&(this.ndNext.active=!0))},o._updateCountDownNum=function(){this.lbCountDown.string=Math.ceil(this.countDownNum).toString(),this._pbCountDownHeart.progress=this.countDownNum/s.RESURR_COUNTDOWN_TIME},o.onBtnResurrectionClick=function(){a.instance.playSound(s.MUSIC_LIST.CLICK),c.dispatchEvent(s.CLIENTEVENT_LIST.RESURRECTIONPLAYER),l.instance.hideDialog(s.PANEL_PATH.RESURRECTION_PANEL),l.instance.showDialog(s.PANEL_PATH.GAME_PANEL)},o.onBtnNextClick=function(){a.instance.playSound(s.MUSIC_LIST.CLICK),c.dispatchEvent(s.CLIENTEVENT_LIST.RESTARTGAME),l.instance.hideDialog(s.PANEL_PATH.RESURRECTION_PANEL)},i}(u)).prototype,"ndCountDownHeart",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=g(N.prototype,"lbCountDown",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=g(N.prototype,"ndResurrection",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=g(N.prototype,"ndNext",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=N))||w));t._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["cc"],(function(t){"use strict";var e,n,o,i;return{setters:[function(t){e=t.cclegacy,n=t._decorator,o=t.instantiate,i=t.NodePool}],execute:function(){var r,a,c;function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e._RF.push({},"e4ab6T5/1VCqK/Vn+UcADNM","poolManager",void 0);var u=n.ccclass;n.property,t("poolManager",u("poolManager")((c=a=function(){function t(){s(this,"_dictPool",{}),s(this,"_dictPrefab",{})}var e,n,r,a=t.prototype;return a.getNode=function(t,e){var n=t.name;t.position||(n=t.data.name),this._dictPrefab[n]=t;var r=null;if(this._dictPool.hasOwnProperty(n)){var a=this._dictPool[n];r=a.size()>0?a.get():o(t)}else{var c=new i;this._dictPool[n]=c,r=o(t)}return r.parent=e,r.active=!0,r},a.putNode=function(t){if(t){var e=t.name,n=null;this._dictPool.hasOwnProperty(e)?n=this._dictPool[e]:(n=new i,this._dictPool[e]=n),n.put(t)}},a.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},e=t,r=[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}],(n=null)&&l(e.prototype,n),r&&l(e,r),t}(),s(a,"_instance",void 0),r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc"],(function(e){"use strict";var r,n;return{setters:[function(e){r=e.cclegacy,n=e._decorator}],execute:function(){var t,a,c;r._RF.push({},"e55dbzBNn1NUrh8r5zusvCZ","clientEvent",void 0);var l,i,u,o=n.ccclass;n.property,e("clientEvent",o("clientEvent")((c=a=function(){function e(){}return e.on=function(r,n,t){var a={handler:n,target:t},c=e._handlers[r];c||(c=[],e._handlers[r]=c);for(var l=0;l<c.length;l++)if(!c[l])return c[l]=a,l;return c.push(a),c.length},e.off=function(r,n,t){var a=e._handlers[r];if(a)for(var c=0;c<a.length;c++){var l=a[c];if(l.handler===n&&(!t||t===l.target)){a.splice(c,1);break}}},e.dispatchEvent=function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];var c,l=e._handlers[r],i=[];for(c=1;c<arguments.length;c++)i.push(arguments[c]);if(l)for(c=0;c<l.length;c++){var u=l[c];u.handler&&u.handler.apply(u.target,i)}},e}(),u={},(i="_handlers")in(l=a)?Object.defineProperty(l,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[i]=u,t=c))||t);r._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["cc","./storageManager.ts","./constant.ts"],(function(t){"use strict";var e,n,a,i,s;return{setters:[function(t){e=t.cclegacy,n=t._decorator,a=t.Component},function(t){i=t.StorageManager},function(t){s=t.constant}],execute:function(){var r,o,c;function l(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e._RF.push({},"e5927B2lO9C6o5eLg2NmcKB","playerData",void 0);var u=n.ccclass;n.property,t("playerData",u("playerData")((c=o=function(t){var e,n;function a(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return h(f(e=t.call.apply(t,[this].concat(a))||this),"serverTime",0),h(f(e),"localTime",0),h(f(e),"_userId",""),h(f(e),"_playerInfo",null),h(f(e),"_history",null),h(f(e),"_settings",null),h(f(e),"_isNewBee",!1),h(f(e),"_dataVersion",""),e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var r,o,c,u=a.prototype;return u.initPlayerData=function(){this.loadGlobalCache(),this.loadFromCache()},u.loadGlobalCache=function(){var t=i.instance.getUserId();t?this._userId=t:this.generateRandomAccount()},u.loadFromCache=function(){this._playerInfo=this._loadDataByKey(s.LOCAL_CACHE.PLAYER),this._history=this._loadDataByKey(s.LOCAL_CACHE.HISTORY),this._settings=this._loadDataByKey(s.LOCAL_CACHE.SETTINGS),this._playerInfo.createDate||this.createPlayerInfo()},u._loadDataByKey=function(t){var e={},n=i.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(t){e={}}return e},u.createPlayerInfo=function(t){if(this._playerInfo={diamond:100,key:0,level:1,createDate:new Date,mainBrickAdd:0,mainDiamondMul:0,roleSkinId:0},this._isNewBee=!0,t)for(var e in t)this._playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},u.generateRandomAccount=function(){this._userId=""+Date.now()+10,i.instance.setUserId(this._userId)},u.saveAccount=function(t){this._userId=t,i.instance.setUserId(t)},u.savePlayerInfoToLocalCache=function(){i.instance.setConfigData(s.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},u.saveSettingsToLocalCache=function(){i.instance.setConfigData(s.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings))},u.saveAll=function(){i.instance.setConfigDataWithoutSave(s.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo)),i.instance.setConfigDataWithoutSave(s.LOCAL_CACHE.HISTORY,JSON.stringify(this._history)),i.instance.setConfigDataWithoutSave(s.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),i.instance.setConfigData(s.LOCAL_CACHE.DATA_VERSION,this._dataVersion)},u.getPlayerInfo=function(t){return this._playerInfo[t]},u.updatePlayerInfo=function(t,e){var n=!1;this._playerInfo.hasOwnProperty(t)&&("number"==typeof e?(n=!0,this._playerInfo[t]+=e,this._playerInfo[t]<0&&(this._playerInfo[t]=0)):"boolean"!=typeof e&&"string"!=typeof e||(n=!0,this._playerInfo[t]=e)),n&&i.instance.setConfigData(s.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},u.getSetting=function(t){return this._settings&&this._settings.hasOwnProperty(t)?this._settings[t]:null},u.setSetting=function(t,e){this._settings||(this._settings={}),this._settings[t]=e,this.saveSettingsToLocalCache()},u.clear=function(){this._playerInfo={},this._settings={},this.saveAll()},r=a,c=[{key:"instance",get:function(){return this._instance||(this._instance=new a),this._instance}}],(o=null)&&l(r.prototype,o),c&&l(r,c),a}(a),h(o,"_instance",void 0),r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["cc","./resourceUtil.ts","./poolManager.ts","./tips.ts"],(function(i){"use strict";var t,e,n,o,a,r,s,p;return{setters:[function(i){t=i.cclegacy,e=i._decorator,n=i.isValid,o=i.find,a=i.Vec3},function(i){r=i.resourceUtil},function(i){s=i.poolManager},function(i){p=i.tips}],execute:function(){var h,c,u;function l(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function f(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}t._RF.push({},"f9384FYDp5GqoW+CtrCla3U","uiManager",void 0);var d=e.ccclass;e.property,i("uiManager",d("uiManager")((u=c=function(){function i(){f(this,"_dictSharedPanel",{}),f(this,"_dictLoading",{}),f(this,"_arrPopupDialog",[]),f(this,"_showTipsTime",0)}var t,e,h,c=i.prototype;return c.isDialogVisible=function(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;var t=this._dictSharedPanel[i];return n(t)&&t.active&&t.parent},c.showDialog=function(i,t,e){var a=this;if(!this._dictLoading[i]){var s=i.lastIndexOf("/"),p=i.slice(s+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(i)){var h=this._dictSharedPanel[i];if(n(h)){h.parent=o("Canvas"),h.active=!0;var c=h.getComponent(p),u=h.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(c&&c.show)c.show.apply(c,t),e&&e(c);else{if(!u||!u.show)throw"查找不到脚本文件"+p;u.show.apply(u,t),e&&e(u)}return}}this._dictLoading[i]=!0,r.createUI(i,(function(n,o){var r=!1;if(a._dictLoading[i]||(r=!0),a._dictLoading[i]=!1,n)console.error(n);else{a._dictSharedPanel[i]=o;var s=o.getComponent(p),h=o.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(s&&s.show)s.show.apply(s,t),e&&e(s);else{if(!h||!h.show)throw"查找不到脚本文件"+p;h.show.apply(h,t),e&&e(h)}r&&a.hideDialog(i)}}))}},c.hideDialog=function(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){var e=this._dictSharedPanel[i];if(e&&n(e)){var o=e.getComponent("animationUI");o?o.close((function(){e.parent=null,t&&"function"==typeof t&&t()})):(e.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1},c.pushToPopupSeq=function(i,t,e){var n={panelPath:i,scriptName:t,param:e,isShow:!1};this._arrPopupDialog.push(n),this._checkPopupSeq()},c.insertToPopupSeq=function(i,t,e){var n={panelPath:t,param:e,isShow:!1};this._arrPopupDialog.splice(i,0,n)},c.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t._arrPopupDialog[0]&&t._arrPopupDialog[0].panelPath===i&&(t._arrPopupDialog.shift(),t._checkPopupSeq())}))},c._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var i=this._arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this._arrPopupDialog[0].isShow=!0)}},c.showTips=function(i,t,e,n,o){var r=this;void 0===t&&(t="txt"),void 0===e&&(e=new a),void 0===n&&(n=1),void 0===o&&(o=function(){});var s=String(i),p=function(){r._showTipsAni(s,t,e,n,o)},h=Date.now();if(h-this._showTipsTime<800&&"gold"!==t&&"heart"!==t){var c=800-(h-this._showTipsTime);setTimeout((function(){p()}),c),this._showTipsTime=h+c}else p(),this._showTipsTime=h},c._showTipsAni=function(i,t,e,n,a){r.getUIPrefabRes(gameConstants.PANEL_PATH.TIPS_PANEL,(function(r,h){r||s.instance.getNode(h,o("Canvas")).getComponent(p).show(i,t,e,n,a)}))},t=i,h=[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}],(e=null)&&l(t.prototype,e),h&&l(t,h),i}(),f(c,"_instance",void 0),h=u))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./util.ts","./storageManager.ts","./resourceUtil.ts","./audioManager.ts","./clientEvent.ts","./constant.ts","./playerData.ts","./poolManager.ts","./tips.ts","./uiManager.ts","./csvManager.ts","./localConfig.ts","./gameConstants.ts","./gameUtils.ts","./gameManager.ts","./gameOverPanel.ts","./mapConstants.ts","./aiWayItem.ts","./aiWay.ts","./closePanel.ts","./shopPanel.ts","./effectManager.ts","./addBrickTips.ts","./playerMusic.ts","./roleBase.ts","./player.ts","./ai.ts","./mainPanel.ts","./mapLoader.ts","./rewardPanel.ts","./settingPanel.ts","./cameraFollow.ts","./gamePanel.ts","./lodash.ts","./createBrickLayer.ts","./resurrectionPanel.ts","./cocosAnalytics.min.mjs_cjs=&original=.js","./lz-string.min.mjs_cjs=&original=.js"],(function(){"use strict";return{setters:[function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});